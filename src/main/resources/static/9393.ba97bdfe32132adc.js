"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[9393],{14900:function(P,h,r){r.d(h,{n:function(){return A}});var C=r(78069),b=r(48047),n=r(76442),S=r(36362);function y(l,p){if(1&l&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Created By:"),n.qZA(),n._uU(3),n.qZA()),2&l){var d=n.oxw(2);n.xp6(3),n.hij(" ",d.source.createdBy," ")}}function Z(l,p){if(1&l&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&l){var d=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,d.source.created,"medium"),"")}}function T(l,p){1&l&&(n.TgZ(0,"div",8),n.TgZ(1,"b"),n._uU(2,"-"),n.qZA(),n.qZA())}function I(l,p){if(1&l&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Last Edited By"),n.qZA(),n._uU(3),n.qZA()),2&l){var d=n.oxw(2);n.xp6(3),n.hij(": ",d.source.lastEditedBy," ")}}function x(l,p){if(1&l&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&l){var d=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,d.source.lastEdited,"medium"),"")}}function M(l,p){if(1&l&&(n.TgZ(0,"div",1),n.YNc(1,y,4,1,"div",2),n.YNc(2,Z,5,4,"div",3),n.YNc(3,T,3,0,"div",4),n.YNc(4,I,4,1,"div",2),n.YNc(5,x,5,4,"div",3),n.qZA()),2&l){var d=n.oxw();n.xp6(1),n.Q6J("ngIf",d.source.createdBy),n.xp6(1),n.Q6J("ngIf",d.source.created),n.xp6(1),n.Q6J("ngIf",d.source.created&&d.source.lastEdited),n.xp6(1),n.Q6J("ngIf",d.source.lastEditedBy),n.xp6(1),n.Q6J("ngIf",d.source.lastEdited)}}var A=function(){var l=function(){function p(){(0,C.Z)(this,p)}return(0,b.Z)(p,[{key:"ngOnInit",value:function(){}}]),p}();return l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=n.Xpm({type:l,selectors:[["app-audit-info"]],inputs:{source:"source"},decls:1,vars:1,consts:[["class","audit-container",4,"ngIf"],[1,"audit-container"],["class","name",4,"ngIf"],["class","date",4,"ngIf"],["class","spacer",4,"ngIf"],[1,"name"],[1,"static"],[1,"date"],[1,"spacer"]],template:function(d,F){1&d&&n.YNc(0,M,6,5,"div",0),2&d&&n.Q6J("ngIf",F.source)},directives:[S.O5],pipes:[S.uU],styles:[".audit-container[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:start;align-items:flex-start;padding-left:15px;font-family:Roboto,Helvetica Neue,sans-serif;padding-top:10px;padding-bottom:2px}.spacer[_ngcontent-%COMP%]{padding-left:5px;padding-right:10px}.static[_ngcontent-%COMP%]{padding-right:3px}.name[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{padding-right:5px}"]}),l}()},27333:function(P,h,r){r.r(h),r.d(h,{SubstanceFormStructureModule:function(){return nt}});var C=r(48047),b=r(78069),n=r(36362),S=r(24582),y=r(7318),Z=r(79223),T=r(33567),I=r(9552),x=r(69093),M=r(45592),A=r(40104),l=r(99146),p=r(12570),d=r(34470),F=r(27336),t=r(76442),z=r(83448),J=r(95758),L=r(66088),D=r(82835),E=r(87317),k=r(65590),_=r(82796),Y=r(17537);function R(u,m){if(1&u){var a=t.EpF();t.TgZ(0,"div",6),t._UZ(1,"span",7),t.TgZ(2,"span",8),t.TgZ(3,"button",9),t.NdJ("click",function(){return t.CHM(a),t.oxw().openStructureImportDialog()}),t._UZ(4,"mat-icon",10),t._uU(5," Import "),t.qZA(),t.TgZ(6,"button",11),t.NdJ("click",function(){return t.CHM(a),t.oxw().openStructureExportDialog()}),t._UZ(7,"mat-icon",12),t._uU(8," Export "),t.qZA(),t.TgZ(9,"button",13),t.NdJ("click",function(){return t.CHM(a),t.oxw().openStructureImageModal()}),t._UZ(10,"mat-icon",14),t._uU(11," View stereochemistry "),t.qZA(),t.qZA(),t.qZA()}}function Q(u,m){if(1&u){var a=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"span",15),t.TgZ(2,"button",16),t.NdJ("click",function(){return t.CHM(a),t.oxw().duplicateCheck()}),t._UZ(3,"mat-icon",17),t._uU(4," Check for duplicates "),t.qZA(),t.qZA(),t._UZ(5,"span",7),t.TgZ(6,"span",8),t.TgZ(7,"button",18),t._UZ(8,"mat-icon",10),t._uU(9," Import \u25bc "),t.qZA(),t.TgZ(10,"button",11),t.NdJ("click",function(){return t.CHM(a),t.oxw().openStructureExportDialog()}),t._UZ(11,"mat-icon",12),t._uU(12," Export "),t.qZA(),t.TgZ(13,"button",13),t.NdJ("click",function(){return t.CHM(a),t.oxw().openStructureImageModal()}),t._UZ(14,"mat-icon",14),t._uU(15," View stereochemistry "),t.qZA(),t.qZA(),t.TgZ(16,"mat-menu",null,19),t.TgZ(18,"button",20),t.NdJ("click",function(){return t.CHM(a),t.oxw().openStructureImportDialog()}),t._uU(19," Import Structure "),t.qZA(),t.TgZ(20,"button",20),t.NdJ("click",function(){return t.CHM(a),t.oxw().openNameResolverDialog()}),t._uU(21," Resolve name "),t.qZA(),t.qZA(),t.qZA()}if(2&u){var o=t.MAs(17);t.xp6(7),t.Q6J("matMenuTriggerFor",o)}}function w(u,m){if(1&u&&(t.TgZ(0,"span"),t._UZ(1,"br"),t.TgZ(2,"a",29),t._uU(3),t.qZA(),t.qZA()),2&u){var a=m.$implicit,o=t.oxw(3);t.xp6(2),t.Q6J("href",o.fixLink(a.href),t.LSH),t.xp6(1),t.hij(" ",a.text," ")}}function j(u,m){if(1&u){var a=t.EpF();t.TgZ(0,"div",23),t.TgZ(1,"div",24),t._uU(2),t.qZA(),t.TgZ(3,"div",25),t._uU(4),t.YNc(5,w,4,2,"span",26),t.qZA(),t.TgZ(6,"button",27),t.NdJ("click",function(){var s=t.CHM(a).index;return t.oxw(2).dismissErrorMessage(s)}),t._UZ(7,"mat-icon",28),t.qZA(),t.qZA()}if(2&u){var o=m.$implicit;t.xp6(1),t.Q6J("ngClass",o.messageType),t.xp6(1),t.Oqu(o.messageType),t.xp6(2),t.Oqu(o.message),t.xp6(1),t.Q6J("ngForOf",o.links)}}function B(u,m){if(1&u&&(t.TgZ(0,"div",21),t.YNc(1,j,8,4,"div",22),t.qZA()),2&u){var a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.structureErrorsArray)}}function H(u,m){if(1&u){var a=t.EpF();t.TgZ(0,"div",30),t.TgZ(1,"button",31),t.NdJ("click",function(){return t.CHM(a),t.oxw().generateSRU()}),t._uU(2,"Generate SRUs"),t.qZA(),t.qZA()}}var V=function(m,a){return{"messages-container":!0,collapsed:m,expanded:a}},W=function(){var u=function(m){(0,S.Z)(o,m);var a=(0,y.Z)(o);function o(i,e,s,c,f,O,U,v,rt){var g;return(0,b.Z)(this,o),(g=a.call(this)).substanceFormService=i,g.substanceFormStructureService=e,g.structureService=s,g.loadingService=c,g.dialog=f,g.overlayContainerService=O,g.gaService=U,g.substanceService=v,g.substanceFormStructuralUnitsService=rt,g.isInitializing=!0,g.subscriptions=[],g}return(0,C.Z)(o,[{key:"ngOnInit",value:function(){var e=this;this.overlayContainer=this.overlayContainerService.getContainerElement();var s=this.substanceFormService.definition.subscribe(function(f){if(e.substanceType=f.substanceClass,"polymer"===e.substanceType){e.menuLabelUpdate.emit("Idealized Structure");var O=e.substanceFormStructureService.substanceIdealizedStructure.subscribe(function(v){v&&(e.structure=v),e.loadStructure()});e.subscriptions.push(O)}else{e.menuLabelUpdate.emit("Structure");var U=e.substanceFormStructureService.substanceStructure.subscribe(function(v){e.structure=v,e.loadStructure()});e.subscriptions.push(U)}});this.subscriptions.push(s),this.substanceFormService.resolvedMol.subscribe(function(f){null!=f&&""!==f&&(e.updateStructureForm(f),e.structureEditor.setMolecule(f))})}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){e.unsubscribe()})}},{key:"editorOnLoad",value:function(e){var s=this;this.loadingService.setLoading(!1),this.structureEditor=e,this.loadStructure(),this.structureEditor.structureUpdated().subscribe(function(c){s.updateStructureForm(c),s.smiles=s.structure&&s.structure.smiles||null,s.mol=s.structure&&s.structure.molfile||null}),this.isInitializing=!1}},{key:"startInitializing",value:function(){this.isInitializing=!0}},{key:"endInitializing",value:function(){this.isInitializing=!1}},{key:"loadStructure",value:function(){this.structure&&this.structureEditor&&this.structure.molfile&&(this.isInitializing=!0,this.structureEditor.setMolecule(this.structure.molfile),this.smiles=this.structure.smiles,this.mol=this.structure.molfile,this.isInitializing=!1)}},{key:"molvecUpdate",value:function(e){this.updateStructureForm(e),this.structureEditor.setMolecule(e)}},{key:"updateStructureForm",value:function(e){var s=this;this.isInitializing||(this.structure.molfile=e,this.structureService.interpretStructure(e).subscribe(function(c){s.processStructurePostResponse(c)}))}},{key:"processStructurePostResponse",value:function(e){var s=this;e&&e.structure&&("polymer"===this.substanceType||this.structure.hash!==e.structure.hash||this.structure.charge!==e.structure.charge)&&(this.smiles=e.structure.smiles,this.mol=e.structure.molfile,Object.keys(e.structure).forEach(function(c){"molfile"!==c&&(s.structure[c]=e.structure[c])}),this.structure.uuid="",this.substanceFormStructureService.updateMoieties(e.moieties),"polymer"!==this.substanceType&&e.moieties&&e.moieties.length>1&&(clearTimeout(this.userMessageTimer),this.userMessage="Certain moieties may have been updated and/or deleted. Please check that the changes are correct.",this.userMessageTimer=setTimeout(function(){s.userMessage=null},2e4)))}},{key:"openStructureImportDialog",value:function(){var e=this;this.gaService.sendEvent("structureForm","button:import","import structure");var s=this.dialog.open(x.Nt,{height:"auto",width:"650px",data:{}});this.overlayContainer.style.zIndex="1002",s.afterClosed().subscribe(function(c){e.overlayContainer.style.zIndex=null,null!=c&&(c&&c.structure&&c.structure.molfile&&e.structureEditor.setMolecule(c.structure.molfile),e.processStructurePostResponse(c))},function(){})}},{key:"generateSRU",value:function(){var e=this;this.loadingService.setLoading(!0),this.structureService.interpretStructure(this.structure.molfile).subscribe(function(s){s.structuralUnits&&s.structuralUnits.length>0&&e.substanceFormStructuralUnitsService.updateSRUs(s.structuralUnits),e.loadingService.setLoading(!1)},function(s){e.loadingService.setLoading(!1)})}},{key:"openStructureExportDialog",value:function(){var e=this,s=this.dialog.open(M.g,{height:"auto",width:"650px",data:{molfile:this.mol,smiles:this.smiles,type:this.substanceType}});this.overlayContainer.style.zIndex="1002",s.afterClosed().subscribe(function(){e.overlayContainer.style.zIndex=null},function(){e.overlayContainer.style.zIndex=null})}},{key:"openNameResolverDialog",value:function(){var e=this;this.gaService.sendEvent("structureForm","button:resolveName","resolve name");var s=this.dialog.open(l.a,{height:"auto",width:"800px",data:{}});this.overlayContainer.style.zIndex="1002",s.afterClosed().subscribe(function(c){e.overlayContainer.style.zIndex=null,null!=c&&""!==c&&(e.updateStructureForm(c),e.structureEditor.setMolecule(c))},function(){})}},{key:"openStructureImageModal",value:function(){var e=this,s=this.dialog.open(x.oV,{height:"90%",width:"650px",panelClass:"structure-image-panel",data:{structure:this.structure.id}});this.overlayContainer.style.zIndex="1002",s.afterClosed().subscribe(function(){e.overlayContainer.style.zIndex=null},function(){e.overlayContainer.style.zIndex=null})}},{key:"duplicateCheck",value:function(){var e=this;this.structureErrorsArray=[],this.substanceFormService.structureDuplicateCheck().subscribe(function(s){s.forEach(function(c){c.messageType&&"INFO"!==c.messageType&&e.structureErrorsArray.push(c)})})}},{key:"dismissErrorMessage",value:function(e){this.structureErrorsArray.splice(e,1)}},{key:"fixLink",value:function(e){return this.substanceService.oldLinkFix(e)}}]),o}(Z.o);return u.\u0275fac=function(a){return new(a||u)(t.Y36(T.B),t.Y36(F.p),t.Y36(I.D),t.Y36(z.b),t.Y36(J.uw),t.Y36(L.Xj),t.Y36(A.$),t.Y36(p.d),t.Y36(d.Z))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-substance-form-structure-card"]],features:[t.qOj],decls:11,vars:11,consts:[[2,"z-index","9999",3,"loadedMolfile","editorOnLoad"],[3,"ngClass"],["class","button-row",4,"ngIf"],["class","submission-messages",4,"ngIf"],["showSettings","true",3,"structure","type"],["class","button-container",4,"ngIf"],[1,"button-row"],[1,"middle-fill"],[1,"right-buttons"],["mat-button","","color","primary","matTooltip","Import options",3,"click"],["svgIcon","cloud_upload"],["mat-button","","color","primary","matTooltip","export structure",3,"click"],["svgIcon","get_app"],["mat-button","","color","primary","matTooltip","preview structure stereochemistry",3,"click"],["svgIcon","zoom_in"],[1,"left-buttons"],["matTooltip","check the database for duplicate structures","mat-button","","color","primary",1,"dupe-check",3,"click"],["svgIcon","search"],["mat-button","","color","primary","matTooltip","Import options",3,"matMenuTriggerFor"],["importMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"submission-messages"],["class","validation-message",4,"ngFor","ngForOf"],[1,"validation-message"],[1,"message-type",3,"ngClass"],[1,"message"],[4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Dismiss",3,"click"],["svgIcon","close"],["target","_blank",1,"internal-link",3,"href"],[1,"button-container"],["color","primary","matTooltip","generate structural units for this structure",1,"mat-flat-button","mat-primary",3,"click"]],template:function(a,o){1&a&&(t.TgZ(0,"div"),t.TgZ(1,"div"),t.TgZ(2,"div"),t.TgZ(3,"app-structure-editor",0),t.NdJ("loadedMolfile",function(e){return o.molvecUpdate(e)})("editorOnLoad",function(e){return o.editorOnLoad(e)}),t.qZA(),t.qZA(),t.TgZ(4,"div",1),t._uU(5),t.qZA(),t.qZA(),t.YNc(6,R,12,0,"div",2),t.YNc(7,Q,22,1,"div",2),t.YNc(8,B,2,1,"div",3),t._UZ(9,"app-structure-form",4),t.YNc(10,H,3,0,"div",5),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngClass",t.WLB(8,V,!o.userMessage,o.userMessage)),t.xp6(1),t.hij(" ",o.userMessage," "),t.xp6(1),t.Q6J("ngIf",o.structure&&"polymer"===o.substanceType),t.xp6(1),t.Q6J("ngIf",o.structure&&"structure"===o.substanceType),t.xp6(1),t.Q6J("ngIf",o.structureErrorsArray&&o.structureErrorsArray.length>0),t.xp6(1),t.Q6J("structure",o.structure)("type",o.substanceType),t.xp6(1),t.Q6J("ngIf","polymer"===o.substanceType))},directives:[D.K,n.mk,n.O5,E.lW,k.Hw,_.p6,_.VK,_.OP,n.sg,Y.h],styles:[".messages-container[_ngcontent-%COMP%]{text-align:center;font-weight:500;font-size:1.05em;transition:all .5s ease-out;overflow:hidden}.messages-container.collapsed[_ngcontent-%COMP%]{max-height:0}.messages-container.expanded[_ngcontent-%COMP%]{max-height:500px;padding:10px 0 5px}.button-container[_ngcontent-%COMP%]{margin-top:-50px}.button-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;width:100%;margin-bottom:10px}.button-row[_ngcontent-%COMP%]   .right-buttons[_ngcontent-%COMP%]{-ms-flex-line-pack:end;align-content:flex-end;display:-ms-flexbox;display:flex;margin-right:-8px}.button-row[_ngcontent-%COMP%]   .left-buttons[_ngcontent-%COMP%]{-ms-flex-line-pack:start;align-content:flex-start;display:-ms-flexbox;display:flex}.SUCCESS[_ngcontent-%COMP%]{color:#3f914c;background-color:#def2de}.submission-messages[_ngcontent-%COMP%]{overflow:hidden;height:auto;transition:all .5s ease-out;max-width:1028px;width:100%;background-color:#fff;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;max-height:500px;overflow-y:auto;padding:10px}.submission-messages[_ngcontent-%COMP%]   .validation-message[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;padding:5px 0;-ms-flex-align:center;align-items:center}.submission-messages[_ngcontent-%COMP%]   .validation-message[_ngcontent-%COMP%]   .message-type[_ngcontent-%COMP%]{text-transform:uppercase;font-weight:500;margin-right:20px;padding:10px;border-radius:3px}.submission-messages[_ngcontent-%COMP%]   .dismiss-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.WARNING[_ngcontent-%COMP%]{color:#8a6d3b;background-color:#fcf8e3}.ERROR[_ngcontent-%COMP%]{color:#a94442;background-color:#f2dede}.dupe-check[_ngcontent-%COMP%]{margin-bottom:5px}.internal-link[_ngcontent-%COMP%]{color:#448aff}.z-index[_ngcontent-%COMP%]{z-index:9999!important}"]}),u}(),q=r(64061),K=r(56473),G=r(44770),X=r(43365),N=r(90587),$=r(91434),tt=r(7168),et=r(96769),nt=function(){var u=(0,C.Z)(function m(){(0,b.Z)(this,m)});return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[[n.ez,q.o.forChild(W),K.h,G.lN,X.c,N.UX,N.u5,$.LD,tt.O,et.O,_.Tx,k.Ps,E.ot]]}),u}()}}]);
//# sourceMappingURL=9393.ba97bdfe32132adc.js.map