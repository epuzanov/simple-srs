"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[8694],{84577:function(D,x,o){o.d(x,{h:function(){return P}});var C=o(78069),b=o(48047),n=o(76442),O=o(42827),h=o(90587),Z=o(87317),A=o(82796),y=o(40089),e=o(36362),I=o(65590),S=o(61534);function r(g,_){1&g&&n._UZ(0,"mat-icon",8)}function f(g,_){1&g&&n._UZ(0,"mat-icon",9)}function c(g,_){if(1&g){var l=n.EpF();n.TgZ(0,"div",10),n.NdJ("click",function(u){return u.stopPropagation()}),n.TgZ(1,"mat-checkbox",11),n.NdJ("change",function(u){var U=n.CHM(l).$implicit;return n.oxw().updateAccess(u,U)}),n._uU(2),n.qZA(),n.qZA()}if(2&g){var i=_.$implicit;n.xp6(1),n.Q6J("formControlName",i.value),n.xp6(1),n.hij(" ",i.display," ")}}var P=function(){var g=function(){function _(l,i){(0,C.Z)(this,_),this.cvService=l,this.element=i,this.privateAccess=[],this.accessOut=new n.vpe,this.accessFormGroup=new h.cw({})}return(0,b.Z)(_,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"access",get:function(){return this.privateAccess},set:function(i){null!=i?(this.privateAccess=i,this.getVocabularies()):(this.privateAccess=[],this.getVocabularies())}},{key:"getVocabularies",value:function(){var i=this;this.cvService.getDomainVocabulary("ACCESS_GROUP").subscribe(function(v){var u=v.ACCESS_GROUP.list;i.createAccessFromGroup(u),i.accessOptions=u,i.crosscheckAccesses()})}},{key:"createAccessFromGroup",value:function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],v={};i.forEach(function(u){v[u.value]=new h.NI}),this.accessFormGroup=new h.cw(v)}},{key:"crosscheckAccesses",value:function(){var i=this;this.tooltipMessage="Access is set to: ",this.privateAccess.length>0?(this.privateAccess.forEach(function(v){for(var u=0;u<i.accessOptions.length;u++)if(v===i.accessOptions[u].value){i.accessFormGroup.controls[v].setValue(!0),i.tooltipMessage+=i.accessOptions[u].display+", ";break}}),this.tooltipMessage=this.tooltipMessage.replace(/(, )$/,"")):this.tooltipMessage+="public"}},{key:"updateAccess",value:function(i,v){if(0===this.privateAccess.length&&(this.tooltipMessage=this.tooltipMessage.replace("public","")),i.checked)this.privateAccess.push(v.value),this.privateAccess.length>1&&(this.tooltipMessage+=", "),this.tooltipMessage+=v.display;else{var u=this.privateAccess.indexOf(v.value);u>-1&&this.privateAccess.splice(u,1),this.tooltipMessage=this.tooltipMessage.replace(v.display,"").replace(": , ",": ").replace(", ,",",").replace(/,$/,"").replace(/(, )$/,""),0===this.privateAccess.length&&(this.tooltipMessage+="public")}this.accessOut.emit(this.privateAccess)}},{key:"menuOpened",value:function(){var i=new Event("focusin",{bubbles:!0,cancelable:!0});this.element.nativeElement.dispatchEvent(i)}},{key:"menuClosed",value:function(){var i=new Event("focusout",{bubbles:!0,cancelable:!0});this.element.nativeElement.dispatchEvent(i)}}]),_}();return g.\u0275fac=function(l){return new(l||g)(n.Y36(O.I),n.Y36(n.SBq))},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-access-manager"]],inputs:{label:"label",access:"access"},outputs:{accessOut:"accessOut"},decls:10,vars:7,consts:[[1,"menu-container"],["mat-button","",3,"matMenuTriggerFor","matTooltip","menuOpened","menuClosed"],["svgIcon","lock",4,"ngIf"],["svgIcon","lock_open",4,"ngIf"],["xPosition","before"],["accessMenu","matMenu"],[3,"formGroup"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["svgIcon","lock"],["svgIcon","lock_open"],["mat-menu-item","",3,"click"],[3,"formControlName","change"]],template:function(l,i){if(1&l&&(n.TgZ(0,"div",0),n.TgZ(1,"button",1),n.NdJ("menuOpened",function(){return i.menuOpened()})("menuClosed",function(){return i.menuClosed()}),n.YNc(2,r,1,0,"mat-icon",2),n.YNc(3,f,1,0,"mat-icon",3),n.TgZ(4,"span"),n._uU(5),n.qZA(),n.qZA(),n.TgZ(6,"mat-menu",4,5),n.TgZ(8,"form",6),n.YNc(9,c,3,2,"div",7),n.qZA(),n.qZA(),n.qZA()),2&l){var v=n.MAs(7);n.xp6(1),n.Q6J("matMenuTriggerFor",v)("matTooltip",i.tooltipMessage),n.xp6(1),n.Q6J("ngIf",i.access.length),n.xp6(1),n.Q6J("ngIf",!i.access.length),n.xp6(2),n.Oqu(i.label?i.label:"Access"),n.xp6(3),n.Q6J("formGroup",i.accessFormGroup),n.xp6(1),n.Q6J("ngForOf",i.accessOptions)}},directives:[Z.lW,A.p6,y.gM,e.O5,I.Hw,A.VK,h._Y,h.JL,h.sg,e.sg,A.OP,S.oG,h.JJ,h.u],styles:[".menu-container[_ngcontent-%COMP%]{padding-bottom:14px}"]}),g}()},14900:function(D,x,o){o.d(x,{n:function(){return S}});var C=o(78069),b=o(48047),n=o(76442),O=o(36362);function h(r,f){if(1&r&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Created By:"),n.qZA(),n._uU(3),n.qZA()),2&r){var c=n.oxw(2);n.xp6(3),n.hij(" ",c.source.createdBy," ")}}function Z(r,f){if(1&r&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&r){var c=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,c.source.created,"medium"),"")}}function A(r,f){1&r&&(n.TgZ(0,"div",8),n.TgZ(1,"b"),n._uU(2,"-"),n.qZA(),n.qZA())}function y(r,f){if(1&r&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Last Edited By"),n.qZA(),n._uU(3),n.qZA()),2&r){var c=n.oxw(2);n.xp6(3),n.hij(": ",c.source.lastEditedBy," ")}}function e(r,f){if(1&r&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&r){var c=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,c.source.lastEdited,"medium"),"")}}function I(r,f){if(1&r&&(n.TgZ(0,"div",1),n.YNc(1,h,4,1,"div",2),n.YNc(2,Z,5,4,"div",3),n.YNc(3,A,3,0,"div",4),n.YNc(4,y,4,1,"div",2),n.YNc(5,e,5,4,"div",3),n.qZA()),2&r){var c=n.oxw();n.xp6(1),n.Q6J("ngIf",c.source.createdBy),n.xp6(1),n.Q6J("ngIf",c.source.created),n.xp6(1),n.Q6J("ngIf",c.source.created&&c.source.lastEdited),n.xp6(1),n.Q6J("ngIf",c.source.lastEditedBy),n.xp6(1),n.Q6J("ngIf",c.source.lastEdited)}}var S=function(){var r=function(){function f(){(0,C.Z)(this,f)}return(0,b.Z)(f,[{key:"ngOnInit",value:function(){}}]),f}();return r.\u0275fac=function(c){return new(c||r)},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-audit-info"]],inputs:{source:"source"},decls:1,vars:1,consts:[["class","audit-container",4,"ngIf"],[1,"audit-container"],["class","name",4,"ngIf"],["class","date",4,"ngIf"],["class","spacer",4,"ngIf"],[1,"name"],[1,"static"],[1,"date"],[1,"spacer"]],template:function(c,P){1&c&&n.YNc(0,I,6,5,"div",0),2&c&&n.Q6J("ngIf",P.source)},directives:[O.O5],pipes:[O.uU],styles:[".audit-container[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:start;align-items:flex-start;padding-left:15px;font-family:Roboto,Helvetica Neue,sans-serif;padding-top:10px;padding-bottom:2px}.spacer[_ngcontent-%COMP%]{padding-left:5px;padding-right:10px}.static[_ngcontent-%COMP%]{padding-right:3px}.name[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{padding-right:5px}"]}),r}()},24501:function(D,x,o){o.r(x),o.d(x,{SubstanceFormMonomersModule:function(){return $}});var C=o(48047),b=o(78069),n=o(36362),O=o(24582),h=o(7318),Z=o(79550),A=o(24874),y=o(21584),e=o(76442),I=o(78444),S=o(51279),r=o(18291),f=o(63169),c=o(27164),P=o(95758),g=o(66088),_=o(87317),l=o(65590),i=o(24459),v=o(16667),u=o(61534),E=o(14900);function U(s,p){if(1&s){var a=e.EpF();e.TgZ(0,"div",20),e._uU(1," Deleted\xa0 "),e.TgZ(2,"button",21),e.NdJ("click",function(){return e.CHM(a),e.oxw().undoDelete()}),e._UZ(3,"mat-icon",22),e.qZA(),e.qZA()}}function F(s,p){if(1&s&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&s){var a=e.oxw();e.xp6(1),e.hij(" Error retrieving monomer, missing reference uuid for ",a.privateMonomer.monomerSubstance.name," ")}}function N(s,p){if(1&s&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&s){var a=e.oxw();e.xp6(1),e.hij(" ",a.displayAmount(a.privateMonomer.amount)," ")}}var Q=function(){var s=function(){function p(a,t,m,d){(0,b.Z)(this,p),this.cvService=a,this.dialog=t,this.utilsService=m,this.overlayContainerService=d,this.monomerDeleted=new e.vpe,this.subscriptions=[]}return(0,C.Z)(p,[{key:"ngOnInit",value:function(){this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"monomer",get:function(){return this.privateMonomer},set:function(t){this.privateMonomer=t,this.relatedSubstanceUuid=this.privateMonomer.monomerSubstance?this.privateMonomer.monomerSubstance.refuuid:""}},{key:"updateType",value:function(t){this.privateMonomer.type=t}},{key:"definingChange",value:function(t){this.privateMonomer.defining=t.checked}},{key:"ngAfterViewInit",value:function(){}},{key:"deleteComponent",value:function(){var t=this;this.privateMonomer.$$deletedCode=this.utilsService.newUUID(),(!this.privateMonomer||!this.monomer)&&(this.deleteTimer=setTimeout(function(){t.monomerDeleted.emit(t.privateMonomer)},1e3))}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateMonomer.$$deletedCode}},{key:"componentUpdated",value:function(t){null!==t?(this.privateMonomer.monomerSubstance={refPname:t._name,name:t._name,refuuid:t.uuid,substanceClass:"reference",approvalID:t.approvalID},this.relatedSubstanceUuid=this.privateMonomer.monomerSubstance.refuuid):(this.privateMonomer.monomerSubstance=null,this.relatedSubstanceUuid=null)}},{key:"openAmountDialog",value:function(){var t=this;this.privateMonomer.amount||(this.privateMonomer.amount={});var m=this.dialog.open(c.O,{data:{subsAmount:this.privateMonomer.amount},width:"1040px"});this.overlayContainer.style.zIndex="1002";var d=m.afterClosed().subscribe(function(T){t.overlayContainer.style.zIndex=null,t.privateMonomer.amount=T});this.subscriptions.push(d)}},{key:"displayAmount",value:function(t){return this.utilsService.displayAmount(t)}},{key:"formatValue",value:function(t){return t?"object"==typeof t?t.display?t.display:t.value?t.value:null:t:null}}]),p}();return s.\u0275fac=function(a){return new(a||s)(e.Y36(r.I),e.Y36(P.uw),e.Y36(f.FW),e.Y36(g.Xj))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-monomer-form"]],inputs:{monomer:"monomer"},outputs:{monomerDeleted:"monomerDeleted"},decls:22,vars:8,consts:[[1,"component-form-container","form-row"],["class","notification-backdrop",4,"ngIf"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete monomer",3,"click"],["svgIcon","delete_forever"],[1,"related-substance"],[1,"flex-column"],["eventCategory","substanceRelationshipRelatedSub","placeholder","Monomer Substance","header","Monomer Substance",3,"subuuid","name","selectionUpdated"],[4,"ngIf"],[1,"type"],["domain","MONOMER_TYPE","title","Monomer Type",3,"model","valueChange"],[1,"amount"],[1,"label","padded","amount-label"],["mat-icon-button","","matTooltip","add",3,"click"],["svgIcon","add_circle_outline"],["class","amount-display",4,"ngIf"],[1,"checkbox-container","column-checkbox"],[3,"checked","change"],[1,"form-row"],[3,"source"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"],[1,"amount-display"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.YNc(1,U,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return t.deleteComponent()}),e._UZ(4,"mat-icon",4),e.qZA(),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"app-substance-selector",7),e.NdJ("selectionUpdated",function(d){return t.componentUpdated(d)}),e.qZA(),e.YNc(8,F,2,1,"span",8),e.qZA(),e.qZA(),e.TgZ(9,"div",9),e.TgZ(10,"app-cv-input",10),e.NdJ("valueChange",function(d){return t.updateType(d)}),e.qZA(),e.qZA(),e.TgZ(11,"div",11),e.TgZ(12,"div",12),e._uU(13," Amount "),e.TgZ(14,"button",13),e.NdJ("click",function(){return t.openAmountDialog()}),e._UZ(15,"mat-icon",14),e.qZA(),e.qZA(),e.YNc(16,N,2,1,"div",15),e.qZA(),e.TgZ(17,"div",16),e.TgZ(18,"mat-checkbox",17),e.NdJ("change",function(d){return t.definingChange(d)}),e._uU(19,"Defining"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",18),e._UZ(21,"app-audit-info",19),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngIf",t.monomer.$$deletedCode),e.xp6(6),e.Q6J("subuuid",t.relatedSubstanceUuid)("name",t.privateMonomer.monomerSubstance?t.privateMonomer.monomerSubstance.name:""),e.xp6(1),e.Q6J("ngIf",t.privateMonomer.monomerSubstance&&t.privateMonomer.monomerSubstance.uuid&&!t.privateMonomer.monomerSubstance.refuuid),e.xp6(2),e.Q6J("model",t.monomer.type),e.xp6(6),e.Q6J("ngIf",t.privateMonomer.amount),e.xp6(2),e.Q6J("checked",t.privateMonomer.defining),e.xp6(3),e.Q6J("source",t.privateMonomer))},directives:[n.O5,_.lW,l.Hw,i.Q,v.S,u.oG,E.n],styles:[".notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.component-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .related-substance[_ngcontent-%COMP%]{width:30%}.form-row[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{width:25%;-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{min-width:15%}.amount-label[_ngcontent-%COMP%]{padding-bottom:10px}  .related-substance img{max-width:125px!important;margin:auto}.defining[_ngcontent-%COMP%]{padding-bottom:20px}.column-checkbox[_ngcontent-%COMP%]     .mat-checkbox-layout{-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center}.column-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{margin-right:unset;margin-left:unset}.column-checkbox[_ngcontent-%COMP%]     .mat-checkbox-layout .mat-checkbox-label{padding-left:0;font-size:11px;padding-bottom:7.5px;line-height:11px}.checkbox-container[_ngcontent-%COMP%], .radio-container[_ngcontent-%COMP%]{padding-bottom:16px;padding-right:15px}"]}),s}(),k=o(19975);function R(s,p){1&s&&e._UZ(0,"mat-divider",8),2&s&&e.Q6J("inset",!0)}function Y(s,p){if(1&s){var a=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"app-monomer-form",6),e.NdJ("monomerDeleted",function(M){return e.CHM(a),e.oxw().deleteCode(M)}),e.qZA(),e.YNc(2,R,1,1,"mat-divider",7),e.qZA()}if(2&s){var t=p.$implicit,m=p.last;e.Q6J("id","substance-monomer-"+p.index),e.xp6(1),e.Q6J("monomer",t),e.xp6(1),e.Q6J("ngIf",!m)}}var B=function(){var s=function(p){(0,O.Z)(t,p);var a=(0,h.Z)(t);function t(m,d,T){var M;return(0,b.Z)(this,t),(M=a.call(this,T)).substanceFormMonomersService=m,M.scrollToService=d,M.gaService=T,M.subscriptions=[],M.analyticsEventCategory="substance form monomers",M}return(0,C.Z)(t,[{key:"ngOnInit",value:function(){this.canAddItemUpdate.emit(!0),this.menuLabelUpdate.emit("Monomers")}},{key:"ngAfterViewInit",value:function(){var d=this,T=this.substanceFormMonomersService.substanceMonomers.subscribe(function(M){d.monomers=M});this.subscriptions.push(T)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(d){d.unsubscribe()})}},{key:"addItem",value:function(){this.addMonomer()}},{key:"addMonomer",value:function(){var d=this;this.substanceFormMonomersService.addSubstanceMonomer(),setTimeout(function(){d.scrollToService.scrollToElement("substance-monomer-0","center")})}},{key:"deleteMonomer",value:function(d){this.substanceFormMonomersService.deleteSubstanceMonomer(d)}}]),t}(Z.u);return s.\u0275fac=function(a){return new(a||s)(e.Y36(y.C),e.Y36(I.i),e.Y36(A.$))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-substance-form-monomers-card"]],features:[e.qOj],decls:8,vars:1,consts:[[1,"flex-row"],[1,"middle-fill"],["class","monomer","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"],["appScrollToTarget","",1,"monomer",3,"id"],[3,"monomer","monomerDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.qZA(),e.YNc(2,Y,3,3,"div",2),e.TgZ(3,"div",0),e._UZ(4,"span",1),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.addMonomer()}),e._uU(6," Add Monomer "),e._UZ(7,"mat-icon",4),e.qZA(),e.qZA()),2&a&&(e.xp6(2),e.Q6J("ngForOf",t.monomers))},directives:[n.sg,S.P,Q,n.O5,k.d,_.lW,l.Hw],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:#00000080}.code[_ngcontent-%COMP%]:nth-child(odd){background-color:#448aff12}.code[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#448aff26}.code[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#80808026}.code[_ngcontent-%COMP%]     .mat-expansion-panel, .code[_ngcontent-%COMP%]     .mat-table, .code[_ngcontent-%COMP%]     textarea{background-color:transparent}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}"]}),s}(),L=o(64061),V=o(7168),W=o(94673),j=o(44770),J=o(90587),G=o(26439),K=o(43365),w=o(63200),$=function(){var s=(0,C.Z)(function p(){(0,b.Z)(this,p)});return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[n.ez,L.o.forChild(B),V.O,k.t,l.Ps,_.ot,W.w,j.lN,J.UX,J.u5,G.TU,K.c,w.U,u.p9]]}),s}()}}]);
//# sourceMappingURL=8694.1f276a39dbdf63f1.js.map