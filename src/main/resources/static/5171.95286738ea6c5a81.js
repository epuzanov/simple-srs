"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[5171],{14900:function(E,y,t){t.d(y,{n:function(){return v}});var h=t(78069),k=t(48047),n=t(76442),L=t(36362);function Z(d,g){if(1&d&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Created By:"),n.qZA(),n._uU(3),n.qZA()),2&d){var u=n.oxw(2);n.xp6(3),n.hij(" ",u.source.createdBy," ")}}function D(d,g){if(1&d&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&d){var u=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,u.source.created,"medium"),"")}}function b(d,g){1&d&&(n.TgZ(0,"div",8),n.TgZ(1,"b"),n._uU(2,"-"),n.qZA(),n.qZA())}function C(d,g){if(1&d&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Last Edited By"),n.qZA(),n._uU(3),n.qZA()),2&d){var u=n.oxw(2);n.xp6(3),n.hij(": ",u.source.lastEditedBy," ")}}function F(d,g){if(1&d&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&d){var u=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,u.source.lastEdited,"medium"),"")}}function x(d,g){if(1&d&&(n.TgZ(0,"div",1),n.YNc(1,Z,4,1,"div",2),n.YNc(2,D,5,4,"div",3),n.YNc(3,b,3,0,"div",4),n.YNc(4,C,4,1,"div",2),n.YNc(5,F,5,4,"div",3),n.qZA()),2&d){var u=n.oxw();n.xp6(1),n.Q6J("ngIf",u.source.createdBy),n.xp6(1),n.Q6J("ngIf",u.source.created),n.xp6(1),n.Q6J("ngIf",u.source.created&&u.source.lastEdited),n.xp6(1),n.Q6J("ngIf",u.source.lastEditedBy),n.xp6(1),n.Q6J("ngIf",u.source.lastEdited)}}var v=function(){var d=function(){function g(){(0,h.Z)(this,g)}return(0,k.Z)(g,[{key:"ngOnInit",value:function(){}}]),g}();return d.\u0275fac=function(u){return new(u||d)},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-audit-info"]],inputs:{source:"source"},decls:1,vars:1,consts:[["class","audit-container",4,"ngIf"],[1,"audit-container"],["class","name",4,"ngIf"],["class","date",4,"ngIf"],["class","spacer",4,"ngIf"],[1,"name"],[1,"static"],[1,"date"],[1,"spacer"]],template:function(u,I){1&u&&n.YNc(0,x,6,5,"div",0),2&u&&n.Q6J("ngIf",I.source)},directives:[L.O5],pipes:[L.uU],styles:[".audit-container[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:start;align-items:flex-start;padding-left:15px;font-family:Roboto,Helvetica Neue,sans-serif;padding-top:10px;padding-bottom:2px}.spacer[_ngcontent-%COMP%]{padding-left:5px;padding-right:10px}.static[_ngcontent-%COMP%]{padding-right:3px}.name[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{padding-right:5px}"]}),d}()},35171:function(E,y,t){t.r(y),t.d(y,{SubstanceFormDisulfideLinksModule:function(){return ie}});var h=t(48047),k=t(78069),n=t(36362),L=t(75143),Z=t(7168),D=t(19975),b=t(65590),C=t(87317),F=t(94673),x=t(44770),v=t(90587),d=t(26439),g=t(43365),u=t(40089),I=t(31959),N=t(24582),w=t(7318),Y=t(79550),T=t(35354),Q=t(40104),A=t(39401),S=t(33567),e=t(76442),O=t(95758),M=t(66088),B=t(51279),j=t(63169),V=t(18291),U=t(91434),$=t(1130);function z(o,r){if(1&o){var a=e.EpF();e.TgZ(0,"div",9),e._uU(1," Deleted\xa0 "),e.TgZ(2,"button",10),e.NdJ("click",function(){return e.CHM(a),e.oxw().undoDelete()}),e._UZ(3,"mat-icon",11),e.qZA(),e.qZA()}}function R(o,r){if(1&o&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&o){var a=r.$implicit;e.Q6J("value",a),e.xp6(1),e.AsE(" ",a.subunitIndex,"_",a.residueIndex," ")}}function H(o,r){if(1&o){var a=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"mat-form-field",13),e.TgZ(2,"mat-label"),e._uU(3),e.qZA(),e.TgZ(4,"mat-select",14),e.NdJ("selectionChange",function(c){var f=e.CHM(a).index;return e.oxw().updateSuggestions(c.value,f)}),e.YNc(5,R,2,3,"mat-option",15),e.TgZ(6,"mat-option",16),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){var i=r.$implicit,s=r.index,l=e.oxw();e.xp6(3),e.Oqu(0===s?"To":"From"),e.xp6(1),e.Q6J("formControlName","site"+s),e.xp6(1),e.Q6J("ngForOf",l.cysteine),e.xp6(1),e.Q6J("value",i),e.xp6(1),e.AsE(" ",i.subunitIndex,"_",i.residueIndex," ")}}var W=function(){var o=function(){function r(a,i,s,l,m,c){(0,k.Z)(this,r),this.cvService=a,this.dialog=i,this.utilsService=s,this.overlayContainerService=l,this.substanceFormService=m,this.substanceFormDisulfideLinksService=c,this.cysteine=[],this.linkDeleted=new e.vpe,this.testForm=new v.cw({site0:new v.NI("",[v.kI.required]),site1:new v.NI("",[v.kI.required])}),this.subscriptions=[]}return(0,h.Z)(r,[{key:"ngOnInit",value:function(){this.privateLink.sites?(this.testForm.controls.site0.setValue(this.privateLink.sites[0]),this.testForm.controls.site1.setValue(this.privateLink.sites[1])):this.privateLink.sites=[{},{}],this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"ngAfterViewInit",value:function(){var i=this;setTimeout(function(){var s=i.substanceFormDisulfideLinksService.substanceCysteineSites.subscribe(function(l){i.cysteine=l});i.subscriptions.push(s)})}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"link",get:function(){return this.privateLink},set:function(i){this.privateLink=i}},{key:"deleteLink",value:function(){var i=this;confirm("Are you sure you want to delete links?")&&(this.privateLink.$$deletedCode=this.utilsService.newUUID(),this.deleteTimer=setTimeout(function(){i.linkDeleted.emit(i.link)},1e3),this.substanceFormDisulfideLinksService.emitDisulfideLinkUpdate())}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateLink.$$deletedCode,this.substanceFormDisulfideLinksService.emitDisulfideLinkUpdate()}},{key:"updateAccess",value:function(i){this.link.access=i}},{key:"updateSuggestions",value:function(i,s){this.cysteine=this.cysteine.filter(function(l){return l.residueIndex!==i.residueIndex||l.subunitIndex!==i.subunitIndex}),this.privateLink.sites[s]!==i&&(this.privateLink.sites[s].residueIndex&&this.cysteine.push(this.privateLink.sites[s]),this.privateLink.sites[s]=i,this.substanceFormDisulfideLinksService.updateCysteine(this.cysteine)),this.testForm.controls["site"+s].setValue(i)}},{key:"openDialog",value:function(){var i=this,s=this.privateLink.sites;(!s[0].residueIndex||!s[1].residueIndex)&&(s=[]);var l=this.dialog.open(A.r,{data:{card:"disulfide",link:s},width:"1040px",panelClass:"subunit-dialog"});this.overlayContainer.style.zIndex="1002";var m=l.afterClosed().subscribe(function(c){i.overlayContainer.style.zIndex=null,c&&(c[0]&&c[0].subunitIndex?(i.privateLink.sites[0]=c[0],i.testForm.controls.site0.setValue(i.privateLink.sites[0])):(i.privateLink.sites[0]={},i.testForm.controls.site0.reset()),c[1]&&c[1].subunitIndex?(i.privateLink.sites[1]=c[1],i.testForm.controls.site1.setValue(i.privateLink.sites[1])):(i.privateLink.sites[1]={},i.testForm.controls.site1.reset())),i.substanceFormDisulfideLinksService.emitDisulfideLinkUpdate()});this.subscriptions.push(m)}}]),r}();return o.\u0275fac=function(a){return new(a||o)(e.Y36(V.I),e.Y36(O.uw),e.Y36(j.FW),e.Y36(M.Xj),e.Y36(S.B),e.Y36(T.n))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-disulfide-links-form"]],inputs:{link:"link"},outputs:{linkDeleted:"linkDeleted"},decls:9,vars:3,consts:[[1,"link-form-container",3,"formGroup"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete link",3,"click"],["svgIcon","delete_forever"],["class","sites",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Select from sequence view",3,"click"],["svgIcon","edit"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"],[1,"sites"],[1,"site"],[1,"site-select",3,"formControlName","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,i){1&a&&(e.TgZ(0,"div",0),e.YNc(1,z,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return i.deleteLink()}),e._UZ(5,"mat-icon",5),e.qZA(),e.qZA(),e.YNc(6,H,8,6,"div",6),e.TgZ(7,"button",7),e.NdJ("click",function(){return i.openDialog()}),e._UZ(8,"mat-icon",8),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.Q6J("formGroup",i.testForm),e.xp6(1),e.Q6J("ngIf",i.link.$$deletedCode),e.xp6(5),e.Q6J("ngForOf",i.link.sites))},directives:[v.JL,v.sg,n.O5,C.lW,u.gM,b.Hw,n.sg,x.KE,x.hX,U.gD,v.JJ,v.u,$.ey],styles:[".notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.link-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .site[_ngcontent-%COMP%]{max-width:80px}.form-row[_ngcontent-%COMP%]   sites[_ngcontent-%COMP%]{width:35%}"]}),o}(),X=t(14900);function K(o,r){1&o&&e._UZ(0,"mat-divider",15),2&o&&e.Q6J("vertical",!0)("inset",!0)}function G(o,r){1&o&&e._UZ(0,"mat-divider",16),2&o&&e.Q6J("inset",!0)}function q(o,r){if(1&o){var a=e.EpF();e.TgZ(0,"div",11),e.YNc(1,K,1,2,"mat-divider",12),e.TgZ(2,"app-disulfide-links-form",13),e.NdJ("linkDeleted",function(p){return e.CHM(a),e.oxw().deleteDisulfideLink(p)}),e.qZA(),e.YNc(3,G,1,1,"mat-divider",14),e.qZA()}if(2&o){var i=r.$implicit,s=r.last,l=r.index,m=e.oxw();e.Q6J("id","substance-disulfide-links-"+l)("ngClass",l%2==0?"side-border":""),e.xp6(1),e.Q6J("ngIf",l%2==0),e.xp6(1),e.Q6J("link",i),e.xp6(1),e.Q6J("ngIf",!s&&l!==m.disulfideLinks.length-2)}}function ee(o,r){if(1&o){var a=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"button",17),e.NdJ("click",function(){return e.CHM(a),e.oxw().deleteAllDisulfideLinks()}),e._uU(2," Delete All Links\n"),e.qZA(),e.qZA()}}var ne=function(){var o=function(r){(0,N.Z)(i,r);var a=(0,w.Z)(i);function i(s,l,m,c,p){var f;return(0,k.Z)(this,i),(f=a.call(this,m)).substanceFormDisulfideLinksService=s,f.substanceFormService=l,f.gaService=m,f.dialog=c,f.overlayContainerService=p,f.subscriptions=[],f.analyticsEventCategory="substance form disulfide Links",f}return(0,h.Z)(i,[{key:"ngOnInit",value:function(){this.canAddItemUpdate.emit(!0),this.menuLabelUpdate.emit("Disulfide Links"),this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"ngAfterViewInit",value:function(){var l=this,m=this.substanceFormDisulfideLinksService.substanceDisulfideLinks.subscribe(function(f){l.disulfideLinks=f,l.countCysteine()});this.subscriptions.push(m);var c=this.substanceFormService.substanceSubunits.subscribe(function(f){l.subunits=f,l.countCysteine()});this.subscriptions.push(c);var p=this.substanceFormDisulfideLinksService.substanceCysteineSites.subscribe(function(f){l.cysteine=f,l.countCysteine()});this.subscriptions.push(p)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(l){l.unsubscribe()})}},{key:"countCysteine",value:function(){var l=this;null!=this.disulfideLinks&&null!=this.subunits&&null!=this.cysteine&&(this.cysteineBonds=0,this.subunits&&this.subunits.forEach(function(m){l.cysteineBonds+=m.sequence.toUpperCase().split("C").length-1}),this.cysteine&&this.cysteine.length?this.cysteineBonds=this.cysteine.length:this.cysteineBonds-=2*this.disulfideLinks.length,this.getSuggestions())}},{key:"getSuggestions",value:function(){var l=[];if(this.subunits)for(var m=0;m<this.subunits.length;m++){var c=this.subunits[m].sequence;if(null!=c&&c.length>0)for(var p=0;p<c.length;p++)"C"===c[p].toUpperCase()&&l.push({residueIndex:p+1,subunitIndex:m+1})}this.disulfideLinks.forEach(function(_){_.sites&&_.sites.forEach(function(P){l=l.filter(function(J){return J.residueIndex!==P.residueIndex||J.subunitIndex!==P.subunitIndex})})})}},{key:"addItem",value:function(){this.addLink()}},{key:"addLink",value:function(){this.substanceFormDisulfideLinksService.addSubstanceDisulfideLink(),setTimeout(function(){}),this.substanceFormDisulfideLinksService.emitDisulfideLinkUpdate()}},{key:"deleteDisulfideLink",value:function(l){this.substanceFormDisulfideLinksService.deleteSubstanceDisulfideLink(l),this.substanceFormDisulfideLinksService.emitDisulfideLinkUpdate()}},{key:"deleteAllDisulfideLinks",value:function(){confirm("Are you sure you want to delete all links?")&&(this.substanceFormDisulfideLinksService.deleteAllDisulfideLinks(),this.substanceFormDisulfideLinksService.emitDisulfideLinkUpdate())}},{key:"openDialog",value:function(){var l=this,m=this.dialog.open(A.r,{data:{card:"multi-disulfide",link:[]},width:"1040px",panelClass:"subunit-dialog"});this.overlayContainer.style.zIndex="1002";var c=m.afterClosed().subscribe(function(p){l.overlayContainer.style.zIndex=null,p&&l.substanceFormDisulfideLinksService.addCompleteDisulfideLinks(p)});this.subscriptions.push(c)}}]),i}(Y.u);return o.\u0275fac=function(a){return new(a||o)(e.Y36(T.n),e.Y36(S.B),e.Y36(Q.$),e.Y36(O.uw),e.Y36(M.Xj))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-substance-form-disulfide-links-card"]],features:[e.qOj],decls:16,vars:4,consts:[[1,"responsive","columns"],[1,"flex-row","form-row2"],[1,"add-buttons"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"],[1,"cysteine"],["appScrollToTarget","","class","site-set alternate-backgrounds2",3,"id","ngClass",4,"ngFor","ngForOf"],["class","flex-row",4,"ngIf"],[3,"source"],[1,"flex-row"],[1,"middle-fill"],["appScrollToTarget","",1,"site-set","alternate-backgrounds2",3,"id","ngClass"],["style","",3,"vertical","inset",4,"ngIf"],[3,"link","linkDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[3,"vertical","inset"],[1,"form-divider",3,"inset"],["mat-raised-button","","mat-primary","",3,"click"]],template:function(a,i){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return i.openDialog()}),e._uU(4," Add Multiple Links "),e._UZ(5,"mat-icon",4),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e._uU(7),e.qZA(),e.qZA(),e.YNc(8,q,4,5,"div",6),e.qZA(),e.YNc(9,ee,3,0,"div",7),e._UZ(10,"app-audit-info",8),e.TgZ(11,"div",9),e._UZ(12,"span",10),e.TgZ(13,"button",3),e.NdJ("click",function(){return i.addLink()}),e._uU(14," Add Disulfide Link "),e._UZ(15,"mat-icon",4),e.qZA(),e.qZA()),2&a&&(e.xp6(7),e.hij(" Number of unspecified Cysteine residues: ",i.cysteineBonds," "),e.xp6(1),e.Q6J("ngForOf",i.disulfideLinks),e.xp6(1),e.Q6J("ngIf",i.disulfideLinks&&i.disulfideLinks.length>0),e.xp6(1),e.Q6J("source",i.disulfideLinks))},directives:[C.lW,b.Hw,n.sg,B.P,n.mk,n.O5,D.d,W,X.n],styles:[".link-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.form-row2[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end;-ms-flex:1 0 99%;flex:1 0 99%}.form-row2[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row2[_ngcontent-%COMP%]   .add-buttons[_ngcontent-%COMP%]{width:40%}.form-row2[_ngcontent-%COMP%]   .cysteine[_ngcontent-%COMP%]{width:50%}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.site-set[_ngcontent-%COMP%]{-ms-flex:1 0 48%;flex:1 0 48%;margin:5px;max-width:50%}.columns[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.alternate-backgrounds2[_ngcontent-%COMP%]:nth-child(4n){background-color:#448aff12}.alternate-backgrounds2[_ngcontent-%COMP%]:nth-child(4n)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#448aff26}.alternate-backgrounds2[_ngcontent-%COMP%]:nth-child(4n+3){background-color:#448aff12}.alternate-backgrounds2[_ngcontent-%COMP%]:nth-child(4n+3)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#448aff26}.alternate-backgrounds2[_ngcontent-%COMP%]:nth-child(4n+1)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#80808026}.alternate-backgrounds2[_ngcontent-%COMP%]:nth-child(4n+2)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#80808026}.alternate-backgrounds2[_ngcontent-%COMP%]     .mat-expansion-panel, .alternate-backgrounds2[_ngcontent-%COMP%]     .mat-table, .alternate-backgrounds2[_ngcontent-%COMP%]     textarea{background-color:transparent}"]}),o}(),ie=(t(64061),function(){var o=(0,h.Z)(function r(){(0,k.Z)(this,r)});return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[n.ez,L.o0.forChild(ne),Z.O,D.t,b.Ps,C.ot,F.w,x.lN,v.UX,v.u5,d.TU,u.AV,I.vV,g.c,U.LD]]}),o}())}}]);
//# sourceMappingURL=5171.95286738ea6c5a81.js.map