{"version":3,"mappings":"iUAIMA,gBAAuCA,qBAAQA,kCAC/CA,iBAAwCA,SAAuCA,0CAAvCA,8EAIxCA,gBAAuCA,wBAAWA,kCAClDA,iBAAwCA,SAA2BA,gCAA3BA,gEAIxCA,gBAAuCA,wBAAWA,kCAClDA,iBAAwCA,SAAgCA,0CAAhCA,sEAG1CA,sCACAA,iBCPG,IAAMC,EAAb,eAAaA,EAAb,0CASE,WACSC,GAAsC,6BAE7CC,gBAFOD,YARTC,mBAA6B,CAAC,UAAY,aAAe,cAGzDA,mBAAmB,IAAIC,IACvBD,gBAAqC,GAIUA,EAVjD,uCAeE,WAAQ,WACNE,KAAKC,iBAAiBC,UAAU,YAE9B,GADAJ,EAAKK,UAAYA,EACK,MAAlBL,EAAKK,WAC0B,MAA9BL,EAAKK,UAAUC,aACwB,MAAvCN,EAAKK,UAAUC,YAAYC,UAC3BP,EAAKK,UAAUC,YAAYC,SAASC,OAAQ,CAC/CR,EAAKO,SAAWP,EAAKK,UAAUC,YAAYC,SAC3CP,EAAKS,YAAYC,KAAKV,EAAKO,SAASC,QACpC,IAAMG,EAAkBX,EAAKD,UAAUa,oBAAoB,wBAAwBR,UAAU,YAC3FJ,EAAKa,WAAaC,EAASC,qBAAwBC,aAErDhB,EAAKiB,cAAcC,KAAKP,GACxBX,EAAKmB,qBA5Bb,yBAiCE,WACEjB,KAAKe,cAAcG,QAAQ,YACzBC,EAAaC,kBAnCnB,2BAuCE,WACEpB,KAAKqB,UAAY,EADN,gBAEWrB,KAAKK,UAFhB,IAEX,2BACEL,KAAKqB,UAAYrB,KAAKqB,UADaC,QACOC,MAAMjB,aAHvCkB,2BAvCf,0BA+CE,SAAaD,GACX,OAAOA,EAAMjB,OAAS,IAAMN,KAAKqB,YAhDrC,+BAmDE,SAAkBI,GAChB,OAAIzB,KAAKW,YAAcX,KAAKW,WAAWc,IAASzB,KAAKW,WAAWc,GAAMC,QAC7D1B,KAAKW,WAAWc,GAAMC,QAEtBD,MAvDbE,GAAkDC,kDAArChC,GAA4BD,qCAA5BC,EAA4BiC,0eDZzClC,iBACEA,mBAEEA,WACEA,sBACAA,sBACFA,QAEAA,WACEA,sBACAA,sBACFA,QAEAA,WACEA,sBACAA,uBACFA,QAEAA,uBACAA,uBACFA,QACFA,eApBmBA,wCAiBKA,sDACaA,qICPxBC,EAAb,+CCQakC,EAAb,eAAaA,KAAbC,iFAAaD,4DAVF,CACPE,KACAC,aAAsCrC,GACtCsC,KACAC,KACAC,KACAC,QAISP,EAAb","names":["i0","SubstanceNaLinkagesComponent","cvService","n","Subject","this","substanceUpdated","subscribe","substance","nucleicAcid","linkages","length","countUpdate","emit","cvSubscription","getDomainVocabulary","vocabulary","response","NUCLEIC_ACID_LINKAGE","dictionary","subscriptions","push","getTotalSites","forEach","subscription","unsubscribe","siteCount","l","sites","g","term","display","o","SubstanceCardBase","selectors","SubstanceNaLinkagesModule","f","CommonModule","DynamicComponentLoaderModule","MatTableModule","CdkTableModule","MatPaginatorModule","MatInputModule"],"sources":["./src/app/core/substance-details/substance-na-linkages/substance-na-linkages.component.html","./src/app/core/substance-details/substance-na-linkages/substance-na-linkages.component.ts","./src/app/core/substance-details/substance-na-linkages/substance-na-linkages.module.ts"],"sourcesContent":["<div class=\"responsive\">\r\n  <table mat-table [dataSource]=\"linkages\">\r\n\r\n    <ng-container matColumnDef='linkage'>\r\n      <th mat-header-cell *matHeaderCellDef> Linkage </th>\r\n      <td mat-cell *matCellDef=\"let linkage\"> {{getLinkageDisplay(linkage.linkage)}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef='Site Range'>\r\n      <th mat-header-cell *matHeaderCellDef> Site Range </th>\r\n      <td mat-cell *matCellDef=\"let linkage\"> {{linkage.sitesShorthand}} </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef='Site Count'>\r\n      <th mat-header-cell *matHeaderCellDef> Site Count </th>\r\n      <td mat-cell *matCellDef=\"let linkage\"> {{getSiteCount(linkage.sites)}} </td>\r\n    </ng-container>\r\n\r\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n    <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n  </table>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {Linkage, Site, SubstanceDetail} from '../../substance/substance.model';\r\nimport {SubstanceCardBase} from '../substance-card-base';\r\nimport {Subject, Subscription} from 'rxjs';\r\nimport {DataDictionaryService} from '@gsrs-core/utils/data-dictionary.service';\r\nimport {ControlledVocabularyService, VocabularyDictionary, VocabularyTerm} from '@gsrs-core/controlled-vocabulary';\r\n\r\n@Component({\r\n  selector: 'app-substance-na-linkages',\r\n  templateUrl: './substance-na-linkages.component.html',\r\n  styleUrls: ['./substance-na-linkages.component.scss']\r\n})\r\nexport class SubstanceNaLinkagesComponent extends SubstanceCardBase implements OnInit, OnDestroy {\r\n  linkages: Array<Linkage>;\r\n  displayedColumns: string[] = ['linkage' , 'Site Range' , 'Site Count' ];\r\n  siteCount: number;\r\n  vocabulary: any;\r\n  substanceUpdated = new Subject<SubstanceDetail>();\r\n  subscriptions: Array<Subscription> = [];\r\n\r\n\r\n  constructor(\r\n    public cvService: ControlledVocabularyService,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.substanceUpdated.subscribe(substance => {\r\n      this.substance = substance;\r\n      if (this.substance != null\r\n        && this.substance.nucleicAcid != null\r\n        && this.substance.nucleicAcid.linkages != null\r\n        && this.substance.nucleicAcid.linkages.length) {\r\n        this.linkages = this.substance.nucleicAcid.linkages;\r\n        this.countUpdate.emit(this.linkages.length);\r\n        const cvSubscription =  this.cvService.getDomainVocabulary('NUCLEIC_ACID_LINKAGE').subscribe(response => {\r\n          this.vocabulary = response['NUCLEIC_ACID_LINKAGE'].dictionary;\r\n        });\r\n        this.subscriptions.push(cvSubscription);\r\n        this.getTotalSites();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscriptions.forEach(subscription => {\r\n      subscription.unsubscribe();\r\n    });\r\n  }\r\n\r\n  getTotalSites() {\r\n    this.siteCount = 0;\r\n    for (const linkage of this.linkages) {\r\n      this.siteCount = this.siteCount + linkage.sites.length;\r\n    }\r\n\r\n  }\r\n\r\n  getSiteCount(sites: Array<Site>): string {\r\n    return sites.length + '/' + this.siteCount;\r\n  }\r\n\r\n  getLinkageDisplay(term: string): string {\r\n    if (this.vocabulary && this.vocabulary[term] && this.vocabulary[term].display) {\r\n      return this.vocabulary[term].display;\r\n    } else {\r\n      return term;\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {SubstanceNaLinkagesComponent} from './substance-na-linkages.component';\r\nimport {DynamicComponentLoaderModule} from '../../dynamic-component-loader/dynamic-component-loader.module';\r\nimport {MatInputModule} from '@angular/material/input';\r\nimport {MatPaginatorModule} from '@angular/material/paginator';\r\nimport {MatTableModule} from '@angular/material/table';\r\nimport {CdkTableModule} from '@angular/cdk/table';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    DynamicComponentLoaderModule.forChild(SubstanceNaLinkagesComponent),\r\n    MatTableModule,\r\n    CdkTableModule,\r\n    MatPaginatorModule,\r\n    MatInputModule,\r\n  ],\r\n  declarations: [SubstanceNaLinkagesComponent]\r\n})\r\nexport class SubstanceNaLinkagesModule { }\r\n"],"sourceRoot":"webpack:///","file":"5718.c15fddde23c98a94.js"}