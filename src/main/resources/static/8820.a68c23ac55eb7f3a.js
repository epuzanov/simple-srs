"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[8820],{84577:function(J,P,e){e.d(P,{h:function(){return U}});var A=e(78069),y=e(48047),n=e(76442),Z=e(42827),_=e(90587),T=e(87317),O=e(82796),b=e(40089),S=e(36362),x=e(65590),C=e(61534);function s(f,h){1&f&&n._UZ(0,"mat-icon",8)}function g(f,h){1&f&&n._UZ(0,"mat-icon",9)}function r(f,h){if(1&f){var d=n.EpF();n.TgZ(0,"div",10),n.NdJ("click",function(m){return m.stopPropagation()}),n.TgZ(1,"mat-checkbox",11),n.NdJ("change",function(m){var E=n.CHM(d).$implicit;return n.oxw().updateAccess(m,E)}),n._uU(2),n.qZA(),n.qZA()}if(2&f){var t=h.$implicit;n.xp6(1),n.Q6J("formControlName",t.value),n.xp6(1),n.hij(" ",t.display," ")}}var U=function(){var f=function(){function h(d,t){(0,A.Z)(this,h),this.cvService=d,this.element=t,this.privateAccess=[],this.accessOut=new n.vpe,this.accessFormGroup=new _.cw({})}return(0,y.Z)(h,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"access",get:function(){return this.privateAccess},set:function(t){null!=t?(this.privateAccess=t,this.getVocabularies()):(this.privateAccess=[],this.getVocabularies())}},{key:"getVocabularies",value:function(){var t=this;this.cvService.getDomainVocabulary("ACCESS_GROUP").subscribe(function(p){var m=p.ACCESS_GROUP.list;t.createAccessFromGroup(m),t.accessOptions=m,t.crosscheckAccesses()})}},{key:"createAccessFromGroup",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],p={};t.forEach(function(m){p[m.value]=new _.NI}),this.accessFormGroup=new _.cw(p)}},{key:"crosscheckAccesses",value:function(){var t=this;this.tooltipMessage="Access is set to: ",this.privateAccess.length>0?(this.privateAccess.forEach(function(p){for(var m=0;m<t.accessOptions.length;m++)if(p===t.accessOptions[m].value){t.accessFormGroup.controls[p].setValue(!0),t.tooltipMessage+=t.accessOptions[m].display+", ";break}}),this.tooltipMessage=this.tooltipMessage.replace(/(, )$/,"")):this.tooltipMessage+="public"}},{key:"updateAccess",value:function(t,p){if(0===this.privateAccess.length&&(this.tooltipMessage=this.tooltipMessage.replace("public","")),t.checked)this.privateAccess.push(p.value),this.privateAccess.length>1&&(this.tooltipMessage+=", "),this.tooltipMessage+=p.display;else{var m=this.privateAccess.indexOf(p.value);m>-1&&this.privateAccess.splice(m,1),this.tooltipMessage=this.tooltipMessage.replace(p.display,"").replace(": , ",": ").replace(", ,",",").replace(/,$/,"").replace(/(, )$/,""),0===this.privateAccess.length&&(this.tooltipMessage+="public")}this.accessOut.emit(this.privateAccess)}},{key:"menuOpened",value:function(){var t=new Event("focusin",{bubbles:!0,cancelable:!0});this.element.nativeElement.dispatchEvent(t)}},{key:"menuClosed",value:function(){var t=new Event("focusout",{bubbles:!0,cancelable:!0});this.element.nativeElement.dispatchEvent(t)}}]),h}();return f.\u0275fac=function(d){return new(d||f)(n.Y36(Z.I),n.Y36(n.SBq))},f.\u0275cmp=n.Xpm({type:f,selectors:[["app-access-manager"]],inputs:{label:"label",access:"access"},outputs:{accessOut:"accessOut"},decls:10,vars:7,consts:[[1,"menu-container"],["mat-button","",3,"matMenuTriggerFor","matTooltip","menuOpened","menuClosed"],["svgIcon","lock",4,"ngIf"],["svgIcon","lock_open",4,"ngIf"],["xPosition","before"],["accessMenu","matMenu"],[3,"formGroup"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["svgIcon","lock"],["svgIcon","lock_open"],["mat-menu-item","",3,"click"],[3,"formControlName","change"]],template:function(d,t){if(1&d&&(n.TgZ(0,"div",0),n.TgZ(1,"button",1),n.NdJ("menuOpened",function(){return t.menuOpened()})("menuClosed",function(){return t.menuClosed()}),n.YNc(2,s,1,0,"mat-icon",2),n.YNc(3,g,1,0,"mat-icon",3),n.TgZ(4,"span"),n._uU(5),n.qZA(),n.qZA(),n.TgZ(6,"mat-menu",4,5),n.TgZ(8,"form",6),n.YNc(9,r,3,2,"div",7),n.qZA(),n.qZA(),n.qZA()),2&d){var p=n.MAs(7);n.xp6(1),n.Q6J("matMenuTriggerFor",p)("matTooltip",t.tooltipMessage),n.xp6(1),n.Q6J("ngIf",t.access.length),n.xp6(1),n.Q6J("ngIf",!t.access.length),n.xp6(2),n.Oqu(t.label?t.label:"Access"),n.xp6(3),n.Q6J("formGroup",t.accessFormGroup),n.xp6(1),n.Q6J("ngForOf",t.accessOptions)}},directives:[T.lW,O.p6,b.gM,S.O5,x.Hw,O.VK,_._Y,_.JL,_.sg,S.sg,O.OP,C.oG,_.JJ,_.u],styles:[".menu-container[_ngcontent-%COMP%]{padding-bottom:14px}"]}),f}()},14900:function(J,P,e){e.d(P,{n:function(){return C}});var A=e(78069),y=e(48047),n=e(76442),Z=e(36362);function _(s,g){if(1&s&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Created By:"),n.qZA(),n._uU(3),n.qZA()),2&s){var r=n.oxw(2);n.xp6(3),n.hij(" ",r.source.createdBy," ")}}function T(s,g){if(1&s&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&s){var r=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,r.source.created,"medium"),"")}}function O(s,g){1&s&&(n.TgZ(0,"div",8),n.TgZ(1,"b"),n._uU(2,"-"),n.qZA(),n.qZA())}function b(s,g){if(1&s&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Last Edited By"),n.qZA(),n._uU(3),n.qZA()),2&s){var r=n.oxw(2);n.xp6(3),n.hij(": ",r.source.lastEditedBy," ")}}function S(s,g){if(1&s&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&s){var r=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,r.source.lastEdited,"medium"),"")}}function x(s,g){if(1&s&&(n.TgZ(0,"div",1),n.YNc(1,_,4,1,"div",2),n.YNc(2,T,5,4,"div",3),n.YNc(3,O,3,0,"div",4),n.YNc(4,b,4,1,"div",2),n.YNc(5,S,5,4,"div",3),n.qZA()),2&s){var r=n.oxw();n.xp6(1),n.Q6J("ngIf",r.source.createdBy),n.xp6(1),n.Q6J("ngIf",r.source.created),n.xp6(1),n.Q6J("ngIf",r.source.created&&r.source.lastEdited),n.xp6(1),n.Q6J("ngIf",r.source.lastEditedBy),n.xp6(1),n.Q6J("ngIf",r.source.lastEdited)}}var C=function(){var s=function(){function g(){(0,A.Z)(this,g)}return(0,y.Z)(g,[{key:"ngOnInit",value:function(){}}]),g}();return s.\u0275fac=function(r){return new(r||s)},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-audit-info"]],inputs:{source:"source"},decls:1,vars:1,consts:[["class","audit-container",4,"ngIf"],[1,"audit-container"],["class","name",4,"ngIf"],["class","date",4,"ngIf"],["class","spacer",4,"ngIf"],[1,"name"],[1,"static"],[1,"date"],[1,"spacer"]],template:function(r,U){1&r&&n.YNc(0,x,6,5,"div",0),2&r&&n.Q6J("ngIf",U.source)},directives:[Z.O5],pipes:[Z.uU],styles:[".audit-container[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:start;align-items:flex-start;padding-left:15px;font-family:Roboto,Helvetica Neue,sans-serif;padding-top:10px;padding-bottom:2px}.spacer[_ngcontent-%COMP%]{padding-left:5px;padding-right:10px}.static[_ngcontent-%COMP%]{padding-right:3px}.name[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{padding-right:5px}"]}),s}()},31089:function(J,P,e){e.r(P),e.d(P,{SubstanceFormStructuralUnitsModule:function(){return z}});var A=e(48047),y=e(78069),n=e(36362),Z=e(75143),_=e(7168),T=e(19975),O=e(65590),b=e(87317),S=e(94673),x=e(44770),C=e(90587),s=e(26439),g=e(43365),r=e(24582),U=e(7318),f=e(79550),h=e(40104),d=e(34470),t=e(76442),p=e(78444),m=e(51279),I=e(27164),E=e(18291),F=e(63169),R=e(33567),w=e(27299),N=e(95758),Y=e(66088),Q=e(9292),B=e(16667),L=e(11307),j=e(14900);function K(i,u){if(1&i&&(t.TgZ(0,"div",26),t._uU(1),t.qZA()),2&i){var a=t.oxw();t.xp6(1),t.hij(" ",a.displayAmount(a.unit.amount)," ")}}function W(i,u){if(1&i&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&i){var a=u.$implicit;t.xp6(1),t.hij(" ",a.text," ")}}function k(i,u){if(1&i&&(t.TgZ(0,"div",27),t.YNc(1,W,2,1,"div",28),t.qZA()),2&i){var a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.errors)}}var G=function(){var i=function(){function u(a,o,c,l,M,v){var D=this;(0,y.Z)(this,u),this.cvService=a,this.dialog=o,this.utilsService=c,this.substanceService=l,this.overlayContainerService=M,this.substanceFormService=v,this.unitDeleted=new t.vpe,this.subscriptions=[],this.errors=[],this.hidePopup=!1,this.substanceService.showImagePopup.subscribe(function(q){D.hidePopup=q})}return(0,A.Z)(u,[{key:"ngOnInit",value:function(){this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"showHidePopup",value:function(){this.hidePopup=!this.hidePopup,this.substanceService.showImagePopup.next(this.hidePopup),this.substanceService.imagePopupUnit.next(this.unit)}},{key:"openAmountDialog",value:function(){var o=this;this.unit.amount||(this.unit.amount={},"SRU-BLOCK"===this.unit.type&&(this.unit.amount={type:"DEGREE OF POLYMERIZATION",units:"per polymer"}));var c=this.dialog.open(I.O,{data:{subsAmount:this.unit.amount},width:"1040px"});this.overlayContainer.style.zIndex="1002";var l=c.afterClosed().subscribe(function(M){o.overlayContainer.style.zIndex=null,o.unit.amount=M});this.subscriptions.push(l)}},{key:"displayAmount",value:function(o){return this.utilsService.displayAmount(o)}},{key:"displayToConnectivity",value:function(o){var c=this.utilsService.sruDisplayToConnectivity(o);this.errors=c.$errors,0===this.errors.length&&(delete c.$errors,this.unit.attachmentMap=c)}},{key:"deleteSRU",value:function(){this.unit.$$deletedCode=this.utilsService.newUUID(),this.unitDeleted.emit(this.unit)}}]),u}();return i.\u0275fac=function(a){return new(a||i)(t.Y36(E.I),t.Y36(N.uw),t.Y36(F.FW),t.Y36(w.d),t.Y36(Y.Xj),t.Y36(R.B))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-structural-unit-form"]],inputs:{unit:"unit"},outputs:{unitDeleted:"unitDeleted"},decls:30,vars:8,consts:[[1,"unit-form-container"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete SRU",3,"click"],["svgIcon","delete_forever"],[1,"form-row","full"],[1,"flex-column","related-substance"],["appSubstanceImage","",1,"related-image",3,"entityId","click"],[1,"form-container"],[1,"inner-row-top"],["domain","POLYMER_SRU_TYPE","title","SRU Type",1,"type",3,"model","valueChange"],[1,"label"],["matInput","","placeholder","Label","required","","name","label",3,"ngModel","ngModelChange"],[1,"attachment-count"],["matInput","","placeholder","attachment count","required","","name","attachment count","disabled","",3,"ngModel","ngModelChange"],[1,"inner-row-bottom"],[1,"amount"],[1,"label","padded"],["mat-icon-button","","matTooltip","add",3,"click"],["svgIcon","add_circle_outline"],["class","amount-display",4,"ngIf"],[1,"connectivity-container"],[1,"connectivity"],["matInput","","cdkTextareaAutosize","",3,"ngModel","ngModelChange"],["class","error-container",4,"ngIf"],[1,"form-row"],[3,"source"],[1,"amount-display"],[1,"error-container"],[4,"ngFor","ngForOf"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return o.deleteSRU()}),t._UZ(3,"mat-icon",3),t.qZA(),t.qZA(),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"img",6),t.NdJ("click",function(){return o.showHidePopup()}),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"div",8),t.TgZ(9,"app-cv-input",9),t.NdJ("valueChange",function(l){return o.unit.type=l}),t.qZA(),t.TgZ(10,"mat-form-field",10),t.TgZ(11,"input",11),t.NdJ("ngModelChange",function(l){return o.unit.label=l}),t.qZA(),t.qZA(),t.TgZ(12,"mat-form-field",12),t.TgZ(13,"input",13),t.NdJ("ngModelChange",function(l){return o.unit.attachmentCount=l}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",14),t.TgZ(15,"div",15),t.TgZ(16,"div",16),t._uU(17," Amount "),t.qZA(),t.TgZ(18,"button",17),t.NdJ("click",function(){return o.openAmountDialog()}),t._UZ(19,"mat-icon",18),t.qZA(),t.YNc(20,K,2,1,"div",19),t.qZA(),t.TgZ(21,"div",20),t.TgZ(22,"mat-form-field",21),t.TgZ(23,"mat-label"),t._uU(24,"Connectivity"),t.qZA(),t.TgZ(25,"textarea",22),t.NdJ("ngModelChange",function(l){return o.displayToConnectivity(l)}),t._uU(26,"          "),t.qZA(),t.qZA(),t.YNc(27,k,2,1,"div",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",24),t._UZ(29,"app-audit-info",25),t.qZA()),2&a&&(t.xp6(6),t.Q6J("entityId",o.unit&&(o.unit.uuid||o.unit._structure&&o.unit._structure.id)),t.xp6(3),t.Q6J("model",o.unit.type),t.xp6(2),t.Q6J("ngModel",o.unit.label),t.xp6(2),t.Q6J("ngModel",o.unit.attachmentCount),t.xp6(7),t.Q6J("ngIf",o.unit.amount),t.xp6(5),t.Q6J("ngModel",o.unit._displayConnectivity),t.xp6(2),t.Q6J("ngIf",o.errors&&o.errors.length>0),t.xp6(2),t.Q6J("source",o.unit))},directives:[b.lW,O.Hw,Q.m,B.S,x.KE,g.Nt,C.Fj,C.Q7,C.JJ,C.On,n.O5,x.hX,L.IC,n.sg,j.n],styles:[".unit-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative;display:-ms-flexbox;display:flex}.related-substance[_ngcontent-%COMP%]{max-width:20%;width:20%}  .related-substance img{max-width:125px!important;margin:auto}.full[_ngcontent-%COMP%]{width:100%}.form-container[_ngcontent-%COMP%]{width:80%}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .attachment-count[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .connectivity[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{width:50%;padding-right:15px}.inner-row-top[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.inner-row-top[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.inner-row-top[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .inner-row-top[_ngcontent-%COMP%]   .attachment-count[_ngcontent-%COMP%], .inner-row-top[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.inner-row-top[_ngcontent-%COMP%]   .connectivity[_ngcontent-%COMP%]{width:100%}.inner-row-top[_ngcontent-%COMP%]   .connectivity-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.inner-row-top[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{width:50%;padding-right:15px}.inner-row-bottom[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.inner-row-bottom[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{width:50%;padding-right:15px}.references-container[_ngcontent-%COMP%]{width:100%}.padded[_ngcontent-%COMP%]{padding-right:20px}.amount-display[_ngcontent-%COMP%]{padding-top:11px}.form-actions[_ngcontent-%COMP%]{-ms-flex-pack:start;justify-content:flex-start;margin:5px 0 10px}.form-content[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.mod-type[_ngcontent-%COMP%], .location-type[_ngcontent-%COMP%], .sites[_ngcontent-%COMP%], .group-access[_ngcontent-%COMP%], .extent[_ngcontent-%COMP%], .amount[_ngcontent-%COMP%]{width:33%}.group[_ngcontent-%COMP%], .access[_ngcontent-%COMP%]{width:45%}"]}),i}();function V(i,u){1&i&&t._UZ(0,"mat-divider",5),2&i&&t.Q6J("inset",!0)}function $(i,u){if(1&i){var a=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"app-structural-unit-form",3),t.NdJ("unitDeleted",function(v){return t.CHM(a),t.oxw().deleteSRU(v)}),t.qZA(),t.YNc(2,V,1,1,"mat-divider",4),t.qZA()}if(2&i){var o=u.$implicit,c=u.last;t.Q6J("id","substance-structural-unit-"+u.index),t.xp6(1),t.Q6J("unit",o),t.xp6(1),t.Q6J("ngIf",!c)}}var H=function(){var i=function(u){(0,r.Z)(o,u);var a=(0,U.Z)(o);function o(c,l,M){var v;return(0,y.Z)(this,o),(v=a.call(this,M)).substanceFormStructuralUnitsService=c,v.scrollToService=l,v.gaService=M,v.subscriptions=[],v.analyticsEventCategory="substance form structural units",v}return(0,A.Z)(o,[{key:"ngOnInit",value:function(){this.menuLabelUpdate.emit("Structural Units")}},{key:"ngAfterViewInit",value:function(){var l=this,M=this.substanceFormStructuralUnitsService.substanceSRUs.subscribe(function(v){l.structuralUnits=v});this.subscriptions.push(M)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(l){l.unsubscribe()})}},{key:"deleteSRU",value:function(l){this.substanceFormStructuralUnitsService.deleteSubstanceSRU(l)}}]),o}(f.u);return i.\u0275fac=function(a){return new(a||i)(t.Y36(d.Z),t.Y36(p.i),t.Y36(h.$))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-substance-form-structural-units-card"]],features:[t.qOj],decls:2,vars:1,consts:[[1,"responsive"],["class","alternate-backgrounds","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["appScrollToTarget","",1,"alternate-backgrounds",3,"id"],[3,"unit","unitDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.YNc(1,$,3,3,"div",1),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngForOf",o.structuralUnits))},directives:[n.sg,m.P,G,n.O5,T.d],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:#0000001f}.code[_ngcontent-%COMP%]:nth-child(odd){background-color:#448aff12}.code[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#448aff26}.code[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#80808026}.code[_ngcontent-%COMP%]     .mat-expansion-panel, .code[_ngcontent-%COMP%]     .mat-table, .code[_ngcontent-%COMP%]     textarea{background-color:transparent}"]}),i}(),X=e(24054),z=(e(64061),function(){var i=(0,A.Z)(function u(){(0,y.Z)(this,u)});return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[n.ez,Z.o0.forChild(H),_.O,T.t,O.Ps,b.ot,S.w,x.lN,C.UX,C.u5,s.TU,g.c,X.f]]}),i}())}}]);
//# sourceMappingURL=8820.a68c23ac55eb7f3a.js.map