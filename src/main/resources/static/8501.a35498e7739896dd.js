"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[8501],{33662:function(V,O,l){l.d(O,{f:function(){return E}});var P=l(78069),x=l(48047),C=l(42827),d=l(90587),t=l(76442),N=l(84577),M=l(36362),F=l(44770),e=l(91434),S=l(1130),T=l(43365);function b(g,v){if(1&g&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&g){var p=v.$implicit;t.Q6J("value",p.value),t.xp6(1),t.hij(" ",p.display," ")}}function h(g,v){if(1&g&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&g){var p=t.oxw(2);t.s9C("value",p.privateSubstanceAmount.type),t.xp6(1),t.hij("",p.privateSubstanceAmount.type," (not in CV)")}}function w(g,v){if(1&g){var p=t.EpF();t.TgZ(0,"div",27),t.TgZ(1,"input",28),t.NdJ("focusout",function(m){return t.CHM(p),t.oxw(2).updateType(m.target)}),t.qZA(),t.qZA()}}function U(g,v){if(1&g&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&g){var p=v.$implicit;t.Q6J("value",p.value),t.xp6(1),t.hij(" ",p.display," ")}}function I(g,v){if(1&g&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&g){var p=t.oxw(2);t.s9C("value",p.privateSubstanceAmount.units),t.xp6(1),t.hij("",p.privateSubstanceAmount.units," (not in CV)")}}function Z(g,v){if(1&g){var p=t.EpF();t.TgZ(0,"div",27),t.TgZ(1,"input",28),t.NdJ("focusout",function(m){return t.CHM(p),t.oxw(2).updateUnits(m.target)}),t.qZA(),t.qZA()}}function J(g,v){if(1&g&&(t.TgZ(0,"form",3),t.TgZ(1,"div",4),t.TgZ(2,"div",5),t.TgZ(3,"div"),t.TgZ(4,"mat-form-field",6),t.TgZ(5,"mat-label"),t._uU(6,"Type *"),t.qZA(),t.TgZ(7,"mat-select",7),t.TgZ(8,"mat-option",8),t.TgZ(9,"span",9),t._uU(10,"Clear selection"),t.qZA(),t.qZA(),t.YNc(11,b,2,2,"mat-option",10),t.YNc(12,h,2,2,"mat-option",11),t.TgZ(13,"mat-option",12),t._uU(14,"Other (New Value)"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,w,2,0,"div",13),t.qZA(),t.TgZ(16,"mat-form-field",14),t._UZ(17,"input",15),t.qZA(),t.TgZ(18,"mat-form-field",16),t._UZ(19,"input",17),t.qZA(),t.TgZ(20,"mat-form-field",18),t._UZ(21,"input",19),t.qZA(),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"mat-form-field",20),t._UZ(24,"input",21),t.qZA(),t.TgZ(25,"mat-form-field",22),t._UZ(26,"input",23),t.qZA(),t.TgZ(27,"div",5),t.TgZ(28,"div"),t.TgZ(29,"mat-form-field",24),t.TgZ(30,"mat-label"),t._uU(31,"Units"),t.qZA(),t.TgZ(32,"mat-select",7),t.TgZ(33,"mat-option",8),t.TgZ(34,"span",9),t._uU(35,"Clear selection"),t.qZA(),t.qZA(),t.YNc(36,U,2,2,"mat-option",10),t.YNc(37,I,2,2,"mat-option",11),t.TgZ(38,"mat-option",12),t._uU(39,"Other (New Value)"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(40,Z,2,0,"div",13),t.qZA(),t.TgZ(41,"mat-form-field",25),t._UZ(42,"input",26),t.qZA(),t.qZA(),t.qZA()),2&g){var p=t.oxw();t.xp6(7),t.Q6J("formControl",p.typeControl),t.xp6(1),t.Q6J("value",null),t.xp6(3),t.Q6J("ngForOf",p.amountTypeList),t.xp6(1),t.Q6J("ngIf",p.privateSubstanceAmount.type&&!p.inCV(p.amountTypeList,p.privateSubstanceAmount.type)&&""!==p.privateSubstanceAmount.type),t.xp6(3),t.Q6J("ngIf","other"===p.privateSubstanceAmount.type),t.xp6(2),t.Q6J("formControl",p.averageControl),t.xp6(2),t.Q6J("formControl",p.lowControl),t.xp6(2),t.Q6J("formControl",p.highControl),t.xp6(3),t.Q6J("formControl",p.lowLimitControl),t.xp6(2),t.Q6J("formControl",p.highLimitControl),t.xp6(6),t.Q6J("formControl",p.unitsControl),t.xp6(1),t.Q6J("value",null),t.xp6(3),t.Q6J("ngForOf",p.amountUnitList),t.xp6(1),t.Q6J("ngIf",p.privateSubstanceAmount.units&&!p.inCV(p.amountUnitList,p.privateSubstanceAmount.units)&&""!==p.privateSubstanceAmount.units),t.xp6(3),t.Q6J("ngIf","other"===p.privateSubstanceAmount.units),t.xp6(2),t.Q6J("formControl",p.nonNumericValueControl)}}var E=function(){var g=function(){function v(p){(0,P.Z)(this,v),this.cvService=p,this.amountTypeList=[],this.amountUnitList=[],this.typeControl=new d.NI("",d.kI.required),this.averageControl=new d.NI(""),this.lowControl=new d.NI(""),this.highControl=new d.NI(""),this.lowLimitControl=new d.NI(""),this.highLimitControl=new d.NI(""),this.unitsControl=new d.NI(""),this.nonNumericValueControl=new d.NI("")}return(0,x.Z)(v,[{key:"ngOnInit",value:function(){this.getVocabularies()}},{key:"substanceAmount",get:function(){return this.privateSubstanceAmount},set:function(f){var m=this;null!=f&&(this.privateSubstanceAmount=f,this.typeControl.setValue(this.privateSubstanceAmount.type),this.typeControl.valueChanges.subscribe(function(u){m.privateSubstanceAmount.type=u}),this.averageControl.setValue(this.privateSubstanceAmount.average),this.averageControl.valueChanges.subscribe(function(u){(null===u||1===u.length&&u.match(/[a-z]/i))&&m.averageControl.setValue(""),m.privateSubstanceAmount.average=u}),this.lowControl.setValue(this.privateSubstanceAmount.low),this.lowControl.valueChanges.subscribe(function(u){(null===u||1===u.length&&u.match(/[a-z]/i))&&m.lowControl.setValue(""),m.privateSubstanceAmount.low=u}),this.highControl.setValue(this.privateSubstanceAmount.high),this.highControl.valueChanges.subscribe(function(u){(null===u||1===u.length&&u.match(/[a-z]/i))&&m.highControl.setValue(""),m.privateSubstanceAmount.high=u}),this.lowLimitControl.setValue(this.privateSubstanceAmount.lowLimit),this.lowLimitControl.valueChanges.subscribe(function(u){(null===u||1===u.length&&u.match(/[a-z]/i))&&m.lowLimitControl.setValue(""),m.privateSubstanceAmount.lowLimit=u}),this.highLimitControl.setValue(this.privateSubstanceAmount.highLimit),this.highLimitControl.valueChanges.subscribe(function(u){(null===u||1===u.length&&u.match(/[a-z]/i))&&m.highLimitControl.setValue(""),m.privateSubstanceAmount.highLimit=u}),this.unitsControl.setValue(this.privateSubstanceAmount.units),this.unitsControl.valueChanges.subscribe(function(u){m.privateSubstanceAmount.units=u}),this.nonNumericValueControl.setValue(this.privateSubstanceAmount.nonNumericValue),this.nonNumericValueControl.valueChanges.subscribe(function(u){m.privateSubstanceAmount.nonNumericValue=u}))}},{key:"updateAccess",value:function(f){this.privateSubstanceAmount.access=f,this.substanceAmount.access=f}},{key:"updateType",value:function(f){var m=this;setTimeout(function(){m.typeControl.setValue(f.value)}),this.privateSubstanceAmount.type=f.value}},{key:"updateUnits",value:function(f){var m=this;setTimeout(function(){m.unitsControl.setValue(f.value)}),this.privateSubstanceAmount.units=f.value}},{key:"getVocabularies",value:function(){var f=this;this.cvService.getDomainVocabulary("AMOUNT_TYPE","AMOUNT_UNIT").subscribe(function(m){f.amountTypeList=m.AMOUNT_TYPE.list,f.amountUnitList=m.AMOUNT_UNIT.list})}},{key:"inCV",value:function(f,m){return f.some(function(u){return m===u.value})}}]),v}();return g.\u0275fac=function(p){return new(p||g)(t.Y36(C.I))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-amount-form"]],inputs:{substanceAmount:"substanceAmount"},decls:3,vars:2,consts:[[1,"access"],[1,"right",3,"access","accessOut"],["class","amount-form",4,"ngIf"],[1,"amount-form"],[1,"form-row"],[1,"other-container"],[1,"amount-type"],[3,"formControl"],[3,"value"],[1,"deselect"],[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["value","other"],["class","custom",4,"ngIf"],[1,"amount-average"],["type","number","matInput","","placeholder","Average",3,"formControl"],[1,"low"],["type","number","matInput","","placeholder","Low",3,"formControl"],[1,"high"],["type","number","matInput","","placeholder","High",3,"formControl"],[1,"low-limit"],["type","number","matInput","","placeholder","Low Limit",3,"formControl"],[1,"high-limit"],["type","number","matInput","","placeholder","High Limit",3,"formControl"],[1,"amount-units"],[1,"non-numeric-value"],["matInput","","placeholder","Non-numeric Value",3,"formControl"],[1,"custom"],["matInput","","placeholder","Custom value","name","custom",3,"focusout"]],template:function(p,f){1&p&&(t.TgZ(0,"div",0),t.TgZ(1,"app-access-manager",1),t.NdJ("accessOut",function(u){return f.updateAccess(u)}),t.qZA(),t.qZA(),t.YNc(2,J,43,16,"form",2)),2&p&&(t.xp6(1),t.Q6J("access",f.substanceAmount.access),t.xp6(1),t.Q6J("ngIf",f.substanceAmount))},directives:[N.h,M.O5,d._Y,d.JL,d.F,F.KE,F.hX,e.gD,d.JJ,d.oH,S.ey,M.sg,T.Nt,d.wV,d.Fj],styles:[".form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .amount-type[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .amount-average[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .low[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .high[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .low-limit[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .high-limit[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .amount-units[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .non-numeric-value[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .amount-type[_ngcontent-%COMP%]{width:125px}.form-row[_ngcontent-%COMP%]   .amount-units[_ngcontent-%COMP%]{width:110px}.form-row[_ngcontent-%COMP%]   .amount-average[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .low[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .high[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .low-limit[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .high-limit[_ngcontent-%COMP%]{width:70px}.form-row[_ngcontent-%COMP%]   .non-numeric-value[_ngcontent-%COMP%]{width:90px}.form-row[_ngcontent-%COMP%]   .jurisdiction[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.risen[_ngcontent-%COMP%]{margin-top:-15px}.deselect[_ngcontent-%COMP%]{color:#00000080}.other-container[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.custom[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.35)}.amount-form[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-direction:row;flex-direction:row}.right[_ngcontent-%COMP%]{float:right}"]}),g}()},38501:function(V,O,l){l.r(O),l.d(O,{SubstanceFormPropertiesModule:function(){return Ee}});var P=l(48047),x=l(78069),C=l(36362),d=l(24582),t=l(7318),N=l(79550),M=l(24874),F=l(39233),e=l(76442),S=l(78444),T=l(44770),b=l(43365),h=l(90587),w=l(26439),U=l(51279),I=l(42827),Z=l(95758),J=l(91434),E=l(1130),g=l(33662);function v(o,r){if(1&o&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&o){var n=r.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.display," ")}}var p=function(){var o=function(){function r(n){(0,x.Z)(this,r),this.cvService=n,this.propertyTypeList=[]}return(0,P.Z)(r,[{key:"ngOnInit",value:function(){this.getVocabularies()}},{key:"parameter",get:function(){return this.privateParameter},set:function(i){this.privateParameter=i}},{key:"getVocabularies",value:function(){var i=this;this.cvService.getDomainVocabulary("PROPERTY_TYPE").subscribe(function(s){i.propertyTypeList=s.PROPERTY_TYPE.list})}},{key:"isValid",get:function(){return null!=this.privateParameter.name&&""!==this.privateParameter.name&&null!=this.privateParameter.type&&""!==this.privateParameter.type}}]),r}();return o.\u0275fac=function(n){return new(n||o)(e.Y36(I.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-property-parameter-form"]],inputs:{parameter:"parameter"},decls:13,vars:4,consts:[[1,"parameter-form-container"],[1,"form-row"],[1,"name"],["matInput","","placeholder","Name","required","","name","name",3,"ngModel","ngModelChange"],[1,"type"],["name","type",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"amount-form-container"],[1,"amount-title"],[3,"substanceAmount"],[3,"value"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-form-field",2),e.TgZ(3,"input",3),e.NdJ("ngModelChange",function(a){return i.parameter.name=a}),e.qZA(),e.qZA(),e.TgZ(4,"mat-form-field",4),e.TgZ(5,"mat-label"),e._uU(6,"Type"),e.qZA(),e.TgZ(7,"mat-select",5),e.NdJ("ngModelChange",function(a){return i.parameter.type=a}),e.YNc(8,v,2,2,"mat-option",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e._uU(11,"Amount"),e.qZA(),e._UZ(12,"app-amount-form",9),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngModel",i.parameter.name),e.xp6(4),e.Q6J("ngModel",i.parameter.type),e.xp6(1),e.Q6J("ngForOf",i.propertyTypeList),e.xp6(4),e.Q6J("substanceAmount",i.parameter.value))},directives:[T.KE,b.Nt,h.Fj,h.Q7,h.JJ,h.On,T.hX,J.gD,C.sg,E.ey,g.f],styles:[".parameter-form-container[_ngcontent-%COMP%]{padding:30px 0 12px;position:relative}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;padding:0 10px;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;margin-right:15px}.form-row[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}"]}),o}(),f=l(87317);function m(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div"),e._UZ(1,"app-property-parameter-form",3,4),e.TgZ(3,"div",5),e._UZ(4,"span",6),e.TgZ(5,"button",7),e.NdJ("click",function(){return e.CHM(n),e.oxw().cancel()}),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().save()}),e._uU(8," Save "),e.qZA(),e.qZA(),e.qZA()}if(2&o){var i=e.MAs(2),s=e.oxw();e.xp6(1),e.Q6J("parameter",s.subsParameter),e.xp6(6),e.Q6J("disabled",!i||!i.isValid)}}var u=function(){var o=function(){function r(n,i){(0,x.Z)(this,r),this.dialogRef=n,this.subsParameter=i,this.isNew=Object.keys(i).length<2}return(0,P.Z)(r,[{key:"ngOnInit",value:function(){}},{key:"save",value:function(){this.dialogRef.close(this.subsParameter)}},{key:"cancel",value:function(){this.dialogRef.close()}}]),r}();return o.\u0275fac=function(n){return new(n||o)(e.Y36(Z.so),e.Y36(Z.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-property-parameter-dialog"]],decls:4,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[4,"ngIf"],[3,"parameter"],["parameterForm",""],[1,"actions"],[1,"middle-fill"],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(n,i){1&n&&(e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,m,9,2,"div",2),e.qZA()),2&n&&(e.xp6(1),e.hij("",i.isNew?"Add":"Edit"," Parameter"),e.xp6(2),e.Q6J("ngIf",i.subsParameter))},directives:[Z.uh,Z.xY,C.O5,p,f.lW],styles:[".actions[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}"]}),o}(),k=l(52149),R=l(39401),j=l(33567),$=l(66088),Q=l(65590),z=l(16667),L=l(61534),H=l(24459),W=l(84577),q=l(26131),B=l(48302),K=l(14900);function X(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div",16),e._uU(1," Deleted\xa0 "),e.TgZ(2,"button",17),e.NdJ("click",function(){return e.CHM(n),e.oxw().undoDelete()}),e._UZ(3,"mat-icon",18),e.qZA(),e.qZA()}}function G(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",19),e._uU(2,"Site Range"),e.qZA(),e.TgZ(3,"input",20),e.NdJ("ngModelChange",function(a){return e.CHM(n),e.oxw()._nonNumeric=a})("focusout",function(){return e.CHM(n),e.oxw().validateRange()}),e.qZA(),e.TgZ(4,"button",21),e.NdJ("click",function(){return e.CHM(n),e.oxw().openFeatureDialog()}),e._UZ(5,"mat-icon",22),e.qZA(),e.qZA()}if(2&o){var i=e.oxw();e.xp6(3),e.Q6J("ngModel",i._nonNumeric)}}function ee(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div",23),e.TgZ(1,"app-substance-selector",24),e.NdJ("selectionUpdated",function(a){return e.CHM(n),e.oxw().referencedSubstanceUpdated(a)}),e.qZA(),e.qZA()}if(2&o){var i=e.oxw();e.xp6(1),e.Q6J("subuuid",i.referencedSubstanceUuid)}}function te(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){var n=e.oxw(2).$implicit;e.xp6(1),e.AsE(" \xa0- \xa0 ",n.value.average," \xa0 ",n.value.units," ")}}function ne(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," \xa0 - "),e.qZA())}function oe(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," > "),e.qZA())}function ie(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," < "),e.qZA())}function re(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){var n=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",n.value.low," ")}}function ae(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," \xa0to\xa0 "),e.qZA())}function pe(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){var n=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",n.value.high," ")}}function le(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){var n=e.oxw(3).$implicit;e.xp6(1),e.hij(" \xa0 ",n.value.units," \xa0 (average) ")}}function se(o,r){if(1&o&&(e.TgZ(0,"span"),e.YNc(1,ne,2,0,"span",12),e._uU(2," \xa0 [ "),e.YNc(3,oe,2,0,"span",12),e.YNc(4,ie,2,0,"span",12),e.YNc(5,re,2,1,"span",12),e.YNc(6,ae,2,0,"span",12),e.YNc(7,pe,2,1,"span",12),e._uU(8," ] "),e.YNc(9,le,2,1,"span",12),e.qZA()),2&o){var n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",null==n.value.average||""==n.value.average),e.xp6(2),e.Q6J("ngIf",null==n.value.high||""==n.value.high),e.xp6(1),e.Q6J("ngIf",null==n.value.low||""==n.value.low),e.xp6(1),e.Q6J("ngIf",null!=n.value.low&&""!=n.value.low),e.xp6(1),e.Q6J("ngIf",null!=n.value.low&&""!=n.value.low&&null!=n.value.high&&""!=n.value.high),e.xp6(1),e.Q6J("ngIf",null!=n.value.high&&""!=n.value.high),e.xp6(2),e.Q6J("ngIf",null==n.value.average||""==n.value.average)}}function ue(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," \xa0 (average) "),e.qZA())}function me(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," > "),e.qZA())}function ce(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," < "),e.qZA())}function ge(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){var n=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",n.value.lowLimit," ")}}function fe(o,r){1&o&&(e.TgZ(0,"span"),e._uU(1," \xa0to\xa0 "),e.qZA())}function _e(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){var n=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",n.value.highLimit," ")}}function de(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1," \xa0- \xa0 [ "),e.YNc(2,me,2,0,"span",12),e.YNc(3,ce,2,0,"span",12),e.YNc(4,ge,2,1,"span",12),e.YNc(5,fe,2,0,"span",12),e.YNc(6,_e,2,1,"span",12),e._uU(7," ] \xa0(limits) "),e.qZA()),2&o){var n=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",null==n.value.highLimit||""==n.value.highLimit),e.xp6(1),e.Q6J("ngIf",null==n.value.lowLimit||""==n.value.lowLimit),e.xp6(1),e.Q6J("ngIf",null!=n.value.lowLimit&&""!=n.value.lowLimit),e.xp6(1),e.Q6J("ngIf",null!=n.value.lowLimit&&""!=n.value.lowLimit&&null!=n.value.highLimit&&""!=n.value.highLimit),e.xp6(1),e.Q6J("ngIf",null!=n.value.highLimit&&""!=n.value.highLimit)}}function ve(o,r){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){var n=e.oxw(2).$implicit;e.xp6(1),e.hij(" \xa0-\xa0 ",n.value.nonNumericValue," ")}}function he(o,r){if(1&o&&(e.TgZ(0,"span"),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.YNc(3,te,2,2,"span",12),e.YNc(4,se,10,7,"span",12),e.YNc(5,ue,2,0,"span",12),e.YNc(6,de,8,5,"span",12),e.YNc(7,ve,2,1,"span",12),e.qZA()),2&o){var n=e.oxw().$implicit;e.xp6(2),e.hij(" \xa0 ",n.value.type," "),e.xp6(1),e.Q6J("ngIf",null!=n.value.average&&""!=n.value.average),e.xp6(1),e.Q6J("ngIf",null!=n.value.low&&""!=n.value.low||null!=n.value.high&&""!=n.value.high),e.xp6(1),e.Q6J("ngIf",null!=n.value.average&&""!=n.value.average),e.xp6(1),e.Q6J("ngIf",null!=n.value.lowLimit&&""!=n.value.lowLimit||null!=n.value.highLimit&&""!=n.value.highLimit),e.xp6(1),e.Q6J("ngIf",n.value.nonNumericValue)}}function Ce(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div",29),e.TgZ(1,"button",30),e.NdJ("click",function(){var c=e.CHM(n).index;return e.oxw(3).deleteParameter(c)}),e._UZ(2,"mat-icon",5),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.YNc(5,he,8,6,"span",12),e.TgZ(6,"button",31),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(3).openPropertyParameter(c)}),e._UZ(7,"mat-icon",22),e.qZA(),e.qZA()}if(2&o){var i=r.$implicit;e.xp6(4),e.Oqu(i.name),e.xp6(1),e.Q6J("ngIf",null!=i.value)}}function ye(o,r){if(1&o&&(e.TgZ(0,"mat-list"),e.YNc(1,Ce,8,2,"div",28),e.qZA()),2&o){var n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.property.parameters)}}function Pe(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div",7),e.TgZ(1,"div"),e.TgZ(2,"h4",25),e._uU(3," Parameters "),e.TgZ(4,"button",26),e.NdJ("click",function(){return e.CHM(n),e.oxw().openPropertyParameter()}),e._UZ(5,"mat-icon",27),e.qZA(),e.qZA(),e.YNc(6,ye,2,1,"mat-list",12),e.qZA(),e.qZA()}if(2&o){var i=e.oxw();e.xp6(6),e.Q6J("ngIf",i.property.parameters)}}function xe(o,r){if(1&o&&(e.TgZ(0,"div",37),e.TgZ(1,"div",19),e._uU(2,"Amount"),e.qZA(),e._UZ(3,"app-amount-form",38),e.qZA()),2&o){var n=e.oxw(2);e.xp6(3),e.Q6J("substanceAmount",n.property.value)}}function Ze(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,xe,4,1,"div",32),e.TgZ(2,"div",7),e.TgZ(3,"div",33),e._UZ(4,"app-domain-references",34,35),e.qZA(),e.qZA(),e._UZ(6,"app-audit-info",36),e.qZA()),2&o){var n=e.oxw();e.xp6(1),e.Q6J("ngIf","PROTEIN FEATURE"!==n.property.propertyType&&"NUCLEIC ACID FEATURE"!==n.property.propertyType),e.xp6(3),e.Q6J("referencesUuids",n.property.references),e.xp6(2),e.Q6J("source",n.property)}}var Te=function(){var o=function(){function r(n,i,s,a,c){(0,x.Z)(this,r),this.cvService=n,this.dialog=i,this.utilsService=s,this.overlayContainerService=a,this.substanceFormService=c,this.propertyDeleted=new e.vpe,this.propertyNameList=[],this.propertyTypeList=[]}return(0,P.Z)(r,[{key:"ngOnInit",value:function(){this.overlayContainer=this.overlayContainerService.getContainerElement()}},{key:"property",get:function(){return this.privateProperty},set:function(i){this.privateProperty=i,this.referencedSubstanceUuid=this.privateProperty.referencedSubstance&&this.privateProperty.referencedSubstance.refuuid||"",this.privateProperty.value||(this.privateProperty.value={}),this.property.value&&this.property.value.nonNumericValue&&(this._nonNumeric=this.property.value.nonNumericValue)}},{key:"deleteProperty",value:function(){var i=this;this.privateProperty.$$deletedCode=this.utilsService.newUUID(),(!this.privateProperty.referencedSubstance||!this.privateProperty.referencedSubstance.refuuid)&&!this.privateProperty.name&&!this.privateProperty.type&&(this.deleteTimer=setTimeout(function(){i.propertyDeleted.emit(i.property)},2e3))}},{key:"deleteParameter",value:function(i){this.property.parameters.splice(i,1)}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateProperty.$$deletedCode}},{key:"updateAccess",value:function(i){this.property.access=i}},{key:"referencedSubstanceUpdated",value:function(i){this.property.referencedSubstance=null!==i?{refPname:i._name,name:i._name,refuuid:i.uuid,substanceClass:"reference",approvalID:i.approvalID}:null}},{key:"openPropertyParameter",value:function(i){var a,s=this;null==i&&(a=!0,i={value:{}});var c=JSON.stringify(i),_=this.dialog.open(u,{data:JSON.parse(c),width:"1200px"});this.overlayContainer.style.zIndex="1002",_.afterClosed().subscribe(function(y){s.overlayContainer.style.zIndex=null,null!=y&&(null==s.property.parameters&&(s.property.parameters=[]),a?s.property.parameters.unshift(y):Object.keys(y).forEach(function(A){i[A]=y[A]}))})}},{key:"openFeatureDialog",value:function(){var i=this,a=this.dialog.open(R.r,{data:{card:"feature",link:[],feature:{name:this.property.name,siteRange:this.property.value.nonNumericValue}},width:"1048px",panelClass:"subunit-dialog"});this.overlayContainer.style.zIndex="1002",a.afterClosed().subscribe(function(_){i.overlayContainer.style.zIndex=null,i.property.name=_.name||"",i.property.value.nonNumericValue=_.siteRange,i._nonNumeric=_.siteRange})}},{key:"validateRange",value:function(){try{this.substanceFormService.stringToSites(this._nonNumeric),this.property.value.nonNumericValue=this._nonNumeric}catch(i){alert('invalid shorthand for a site. Must be of form "{subunit}_{residue}" with multiple ranges seperated by a comma. Changes will be reverted'),this._nonNumeric=this.property.value.nonNumericValue}}},{key:"addOtherOption",value:function(i,s){return i.some(function(a){return s===a.value}),i}}]),r}();return o.\u0275fac=function(n){return new(n||o)(e.Y36(I.I),e.Y36(Z.uw),e.Y36(k.F),e.Y36($.Xj),e.Y36(j.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-property-form"]],inputs:{property:"property"},outputs:{propertyDeleted:"propertyDeleted"},decls:19,vars:9,consts:[[1,"property-form-container"],["class","notification-backdrop",4,"ngIf"],[1,"flex-column"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete property",3,"click"],["svgIcon","delete_forever"],[1,"flex-column","form-content"],[1,"form-row"],["required","true","key","Property Name","title","Name",1,"name","property-name",3,"model","valueChange"],["required","true","key","Property Property Type","title","Property Type","name","type",1,"type",3,"model","valueChange"],[1,"checkbox-container","column-checkbox"],["name","defining",3,"ngModel","ngModelChange"],[4,"ngIf"],["class","flex-column referenced-substance",4,"ngIf"],[3,"access","accessOut"],["class","form-row",4,"ngIf"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"],[1,"amount-title"],[3,"ngModel","ngModelChange","focusout"],["mat-icon-button","","matTooltip","Edit Feature Sites",3,"click"],["svgIcon","edit"],[1,"flex-column","referenced-substance"],["eventCategory","substancePropertyReferencedSub","placeholder","Referenced Substance","header","Referenced Substance",3,"subuuid","selectionUpdated"],[1,"parameters-title"],["mat-icon-button","","matTooltip","Add parameter",3,"click"],["svgIcon","add_circle_outline"],["mat-list-item","",4,"ngFor","ngForOf"],["mat-list-item",""],["mat-icon-button","",1,"parameter-delete-icon",3,"click"],["mat-icon-button","",1,"parameter-icon",3,"click"],["class","amount-form-container",4,"ngIf"],[1,"references-container"],[3,"referencesUuids"],["references",""],[3,"source"],[1,"amount-form-container"],[3,"substanceAmount"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.YNc(1,X,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return i.deleteProperty()}),e._UZ(5,"mat-icon",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"app-cv-input",8),e.NdJ("valueChange",function(a){return i.property.name=a}),e.qZA(),e.TgZ(9,"app-cv-input",9),e.NdJ("valueChange",function(a){return i.property.propertyType=a}),e.qZA(),e.TgZ(10,"div",10),e.TgZ(11,"mat-checkbox",11),e.NdJ("ngModelChange",function(a){return i.property.defining=a}),e._uU(12," Defining "),e.qZA(),e.qZA(),e.YNc(13,G,6,1,"div",12),e.YNc(14,ee,2,1,"div",13),e.TgZ(15,"div"),e.TgZ(16,"app-access-manager",14),e.NdJ("accessOut",function(a){return i.updateAccess(a)}),e.qZA(),e.qZA(),e.qZA(),e.YNc(17,Pe,7,1,"div",15),e.qZA(),e.qZA(),e.YNc(18,Ze,7,3,"div",12)),2&n&&(e.xp6(1),e.Q6J("ngIf",i.property.$$deletedCode),e.xp6(7),e.Q6J("model",i.property.name),e.xp6(1),e.Q6J("model",i.property.propertyType),e.xp6(2),e.Q6J("ngModel",i.property.defining),e.xp6(2),e.Q6J("ngIf","PROTEIN FEATURE"===i.property.propertyType||"NUCLEIC ACID FEATURE"===i.property.propertyType),e.xp6(1),e.Q6J("ngIf","PROTEIN FEATURE"!==i.property.propertyType&&"NUCLEIC ACID FEATURE"!==i.property.propertyType),e.xp6(2),e.Q6J("access",i.property.access),e.xp6(1),e.Q6J("ngIf",!i.property.$$deletedCode),e.xp6(1),e.Q6J("ngIf",!i.property.$$deletedCode))},directives:[C.O5,f.lW,Q.Hw,z.S,L.oG,h.JJ,h.On,h.Fj,H.Q,W.h,q.i$,C.sg,g.f,B.V,K.n],styles:[".property-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative;display:-ms-flexbox;display:flex}.type[_ngcontent-%COMP%]     mat-form-field, .qualification[_ngcontent-%COMP%]     mat-form-field, .interaction-type[_ngcontent-%COMP%]     mat-form-field{width:100%}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.referenced-substance[_ngcontent-%COMP%]{max-width:25%;width:25%}.form-content[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .radio-container[_ngcontent-%COMP%]{padding-bottom:16px;padding-right:15px}.form-row[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.references-container[_ngcontent-%COMP%]{width:100%}.amount-title[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.amount-form-container[_ngcontent-%COMP%]{padding:0 7px}.column-checkbox[_ngcontent-%COMP%]     .mat-checkbox-layout{-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center}.column-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{margin-right:unset;margin-left:unset}.column-checkbox[_ngcontent-%COMP%]     .mat-checkbox-layout .mat-checkbox-label{padding-left:0;font-size:11px;padding-bottom:7.5px;line-height:11px}.parameters-title[_ngcontent-%COMP%]{margin-bottom:0}"]}),o}(),D=l(19975);function Ae(o,r){if(1&o&&(e.TgZ(0,"mat-form-field",6),e._UZ(1,"input",7),e.qZA()),2&o){var n=e.oxw();e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",n.searchControl)}}var Y=function(){return[5,10,25,100]};function be(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",8),e.NdJ("page",function(a){e.CHM(n);var c=e.oxw();return c.pageChange(a,c.analyticsEventCategory)}),e.qZA()}if(2&o){var i=e.oxw();e.Q6J("length",i.filtered&&i.filtered.length||0)("pageIndex",i.page)("pageSize",5)("pageSizeOptions",e.DdM(4,Y))}}function Oe(o,r){1&o&&e._UZ(0,"mat-divider",12),2&o&&e.Q6J("inset",!0)}function Me(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"app-property-form",10),e.NdJ("propertyDeleted",function(_){return e.CHM(n),e.oxw().deleteProperty(_)}),e.qZA(),e.YNc(2,Oe,1,1,"mat-divider",11),e.qZA()}if(2&o){var i=r.$implicit,s=r.last;e.Q6J("id","substance-property-"+r.index),e.xp6(1),e.Q6J("property",i),e.xp6(1),e.Q6J("ngIf",!s)}}function Fe(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",8),e.NdJ("page",function(a){e.CHM(n);var c=e.oxw();return c.pageChange(a,c.analyticsEventCategory)}),e.qZA()}if(2&o){var i=e.oxw();e.Q6J("length",i.filtered&&i.filtered.length||0)("pageIndex",i.page)("pageSize",5)("pageSizeOptions",e.DdM(4,Y))}}function we(o,r){if(1&o){var n=e.EpF();e.TgZ(0,"div",13),e._UZ(1,"span",2),e.TgZ(2,"button",14),e.NdJ("click",function(){return e.CHM(n),e.oxw().addProperty()}),e._uU(3," Add property "),e._UZ(4,"mat-icon",15),e.qZA(),e.qZA()}}var Ie=function(){var o=function(r){(0,d.Z)(i,r);var n=(0,t.Z)(i);function i(s,a,c){var _;return(0,x.Z)(this,i),(_=n.call(this,c)).substanceFormPropertiesService=s,_.scrollToService=a,_.gaService=c,_.subscriptions=[],_.analyticsEventCategory="substance form properties",_}return(0,P.Z)(i,[{key:"ngOnInit",value:function(){this.canAddItemUpdate.emit(!0),this.menuLabelUpdate.emit("Properties")}},{key:"ngAfterViewInit",value:function(){var a=this,c=this.substanceFormPropertiesService.substanceProperties.subscribe(function(_){a.properties=_,a.filtered=_;var y=a.searchControl.valueChanges.subscribe(function(A){a.filterList(A,a.properties,a.analyticsEventCategory)},function(A){console.log(A)});a.subscriptions.push(y),a.page=0,a.pageChange()});this.subscriptions.push(c)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(a){a.unsubscribe()})}},{key:"addItem",value:function(){this.addProperty()}},{key:"addProperty",value:function(){var a=this;this.substanceFormPropertiesService.addSubstanceProperty(),setTimeout(function(){a.scrollToService.scrollToElement("substance-property-0","center")})}},{key:"deleteProperty",value:function(a){this.substanceFormPropertiesService.deleteSubstanceProperty(a)}}]),i}(N.u);return o.\u0275fac=function(n){return new(n||o)(e.Y36(F.S),e.Y36(S.i),e.Y36(M.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-substance-form-properties-card"]],features:[e.qOj],decls:7,vars:5,consts:[[1,"flex-row"],["class","search",3,"floatLabel",4,"ngIf"],[1,"middle-fill"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","property","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["style","display: flex;",4,"ngIf"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["appScrollToTarget","",1,"property",3,"id"],[3,"property","propertyDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"],[2,"display","flex"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Ae,2,2,"mat-form-field",1),e._UZ(2,"span",2),e.qZA(),e.YNc(3,be,1,5,"mat-paginator",3),e.YNc(4,Me,3,3,"div",4),e.YNc(5,Fe,1,5,"mat-paginator",3),e.YNc(6,we,5,0,"div",5)),2&n&&(e.xp6(1),e.Q6J("ngIf",i.properties&&i.properties.length>i.pageSize),e.xp6(2),e.Q6J("ngIf",i.properties&&i.properties.length>5),e.xp6(1),e.Q6J("ngForOf",i.paged),e.xp6(1),e.Q6J("ngIf",i.properties&&i.properties.length>5),e.xp6(1),e.Q6J("ngIf",i.properties&&i.properties.length>0))},directives:[C.O5,T.KE,b.Nt,h.Fj,h.JJ,h.oH,w.NW,C.sg,U.P,Te,D.d,f.lW,Q.Hw],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:#00000080}.property[_ngcontent-%COMP%]:nth-child(odd){background-color:#448aff12}.property[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#448aff26}.property[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#80808026}.property[_ngcontent-%COMP%]     .mat-expansion-panel, .property[_ngcontent-%COMP%]     .mat-table, .property[_ngcontent-%COMP%]     textarea{background-color:transparent}"]}),o}(),Ne=l(64061),Se=l(7168),Ue=l(94673),Je=l(63200),Ee=function(){var o=(0,P.Z)(function r(){(0,x.Z)(this,r)});return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[C.ez,Ne.o.forChild(Ie),Se.O,D.t,Q.Ps,f.ot,Ue.w,T.lN,h.UX,h.u5,w.TU,b.c,Je.U,L.p9,q.ie]]}),o}()}}]);
//# sourceMappingURL=8501.a35498e7739896dd.js.map