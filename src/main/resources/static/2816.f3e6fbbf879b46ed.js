"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[2816],{14900:function(U,y,i){i.d(y,{n:function(){return x}});var v=i(78069),h=i(48047),n=i(76442),b=i(36362);function T(u,f){if(1&u&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Created By:"),n.qZA(),n._uU(3),n.qZA()),2&u){var l=n.oxw(2);n.xp6(3),n.hij(" ",l.source.createdBy," ")}}function Z(u,f){if(1&u&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&u){var l=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,l.source.created,"medium"),"")}}function S(u,f){1&u&&(n.TgZ(0,"div",8),n.TgZ(1,"b"),n._uU(2,"-"),n.qZA(),n.qZA())}function C(u,f){if(1&u&&(n.TgZ(0,"div",5),n.TgZ(1,"b",6),n._uU(2,"Last Edited By"),n.qZA(),n._uU(3),n.qZA()),2&u){var l=n.oxw(2);n.xp6(3),n.hij(": ",l.source.lastEditedBy," ")}}function A(u,f){if(1&u&&(n.TgZ(0,"div",7),n.TgZ(1,"b",6),n._uU(2,"on"),n.qZA(),n._uU(3),n.ALo(4,"date"),n.qZA()),2&u){var l=n.oxw(2);n.xp6(3),n.hij(" ",n.xi3(4,1,l.source.lastEdited,"medium"),"")}}function I(u,f){if(1&u&&(n.TgZ(0,"div",1),n.YNc(1,T,4,1,"div",2),n.YNc(2,Z,5,4,"div",3),n.YNc(3,S,3,0,"div",4),n.YNc(4,C,4,1,"div",2),n.YNc(5,A,5,4,"div",3),n.qZA()),2&u){var l=n.oxw();n.xp6(1),n.Q6J("ngIf",l.source.createdBy),n.xp6(1),n.Q6J("ngIf",l.source.created),n.xp6(1),n.Q6J("ngIf",l.source.created&&l.source.lastEdited),n.xp6(1),n.Q6J("ngIf",l.source.lastEditedBy),n.xp6(1),n.Q6J("ngIf",l.source.lastEdited)}}var x=function(){var u=function(){function f(){(0,v.Z)(this,f)}return(0,h.Z)(f,[{key:"ngOnInit",value:function(){}}]),f}();return u.\u0275fac=function(l){return new(l||u)},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-audit-info"]],inputs:{source:"source"},decls:1,vars:1,consts:[["class","audit-container",4,"ngIf"],[1,"audit-container"],["class","name",4,"ngIf"],["class","date",4,"ngIf"],["class","spacer",4,"ngIf"],[1,"name"],[1,"static"],[1,"date"],[1,"spacer"]],template:function(l,_){1&l&&n.YNc(0,I,6,5,"div",0),2&l&&n.Q6J("ngIf",_.source)},directives:[b.O5],pipes:[b.uU],styles:[".audit-container[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:start;align-items:flex-start;padding-left:15px;font-family:Roboto,Helvetica Neue,sans-serif;padding-top:10px;padding-bottom:2px}.spacer[_ngcontent-%COMP%]{padding-left:5px;padding-right:10px}.static[_ngcontent-%COMP%]{padding-right:3px}.name[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{padding-right:5px}"]}),u}()},22816:function(U,y,i){i.r(y),i.d(y,{SubstanceFormSugarsModule:function(){return q}});var v=i(48047),h=i(78069),n=i(36362),b=i(75143),T=i(7168),Z=i(19975),S=i(65590),C=i(87317),A=i(94673),I=i(44770),x=i(90587),u=i(26439),f=i(43365),l=i(40089),_=i(31959),M=i(91434),E=i(95106),P=i(24582),J=i(7318),N=i(79550),F=(i(27299),i(33567)),R=i(40104),t=i(76442),k=i(78444),Y=i(51279),Q=i(18291),j=i(63169),L=i(39401),B=i(95758),V=i(66088),$=i(16667),w=i(14900);function H(a,d){if(1&a){var s=t.EpF();t.TgZ(0,"div",15),t._uU(1," Deleted\xa0 "),t.TgZ(2,"button",16),t.NdJ("click",function(){return t.CHM(s),t.oxw().undoDelete()}),t._UZ(3,"mat-icon",17),t.qZA(),t.qZA()}}var W=function(){var a=function(){function d(s,e,r,o,g){(0,h.Z)(this,d),this.cvService=s,this.dialog=e,this.utilsService=r,this.overlayContainerService=o,this.substanceFormService=g,this.sugarDeleted=new t.vpe,this.subscriptions=[]}return(0,v.Z)(d,[{key:"ngOnInit",value:function(){this.getVocabularies(),this.overlayContainer=this.overlayContainerService.getContainerElement(),this.updateDisplay()}},{key:"ngAfterViewInit",value:function(){this.updateDisplay()}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){e.unsubscribe()})}},{key:"sugar",get:function(){return this.updateDisplay(),this.privateSugar},set:function(e){this.privateSugar=e}},{key:"addRemainingSites",value:function(){this.privateSugar.sites=this.privateSugar.sites?this.privateSugar.sites.concat(this.remaining):this.remaining,this.updateDisplay(),this.substanceFormService.emitSugarUpdate()}},{key:"updateDisplay",value:function(e){e?this.siteDisplay=this.substanceFormService.siteString(e.sites):this.privateSugar&&(this.siteDisplay=this.substanceFormService.siteString(this.privateSugar.sites))}},{key:"deleteLink",value:function(){var e=this;this.privateSugar.$$deletedCode=this.utilsService.newUUID(),this.deleteTimer=setTimeout(function(){e.sugarDeleted.emit(e.sugar),e.substanceFormService.emitSugarUpdate()},2e3)}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateSugar.$$deletedCode}},{key:"getVocabularies",value:function(){var e=this,r=this.cvService.getDomainVocabulary("NUCLEIC_ACID_SUGAR").subscribe(function(o){e.sugarTypes=o.NUCLEIC_ACID_SUGAR.list});this.subscriptions.push(r)}},{key:"openDialog",value:function(){var e=this,r=this.dialog.open(L.r,{data:{card:"sugar",link:this.privateSugar.sites},width:"1040px"});this.overlayContainer.style.zIndex="1002";var o=r.afterClosed().subscribe(function(g){e.overlayContainer.style.zIndex=null,g&&(e.privateSugar.sites=g),e.updateDisplay(),e.substanceFormService.emitSugarUpdate()});this.subscriptions.push(o)}}]),d}();return a.\u0275fac=function(s){return new(s||a)(t.Y36(Q.I),t.Y36(B.uw),t.Y36(j.FW),t.Y36(V.Xj),t.Y36(F.B))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-sugar-form"]],inputs:{remaining:"remaining",sugar:"sugar"},outputs:{sugarDeleted:"sugarDeleted"},decls:18,vars:7,consts:[[1,"sugar-form-container"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete link",3,"click"],["svgIcon","delete_forever"],[1,"type"],["domain","NUCLEIC_ACID_SUGAR","title","Sugar",3,"model","valueChange"],[1,"addRemaining"],["mat-flat-button","","mat-primary","",3,"matTooltip","disabled","click"],[1,"links"],[1,"label"],["mat-icon-button","","matTooltip","Select sites from display",3,"click"],["svgIcon","edit"],[3,"source"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"]],template:function(s,e){1&s&&(t.TgZ(0,"div",0),t.YNc(1,H,4,0,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"button",4),t.NdJ("click",function(){return e.deleteLink()}),t._UZ(5,"mat-icon",5),t.qZA(),t.qZA(),t.TgZ(6,"div",6),t.TgZ(7,"app-cv-input",7),t.NdJ("valueChange",function(o){return e.sugar.sugar=o}),t.qZA(),t.qZA(),t.TgZ(8,"div",8),t.TgZ(9,"button",9),t.NdJ("click",function(){return e.addRemainingSites()}),t._uU(10),t.qZA(),t.qZA(),t.TgZ(11,"div",10),t.TgZ(12,"div",11),t._uU(13,"Sites"),t.qZA(),t._uU(14),t.TgZ(15,"button",12),t.NdJ("click",function(){return e.openDialog()}),t._UZ(16,"mat-icon",13),t.qZA(),t.qZA(),t.qZA(),t._UZ(17,"app-audit-info",14),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngIf",e.sugar.$$deletedCode),t.xp6(6),t.Q6J("model",e.sugar.sugar),t.xp6(2),t.MGl("matTooltip","Add remaining ",e.remaining.length," sites"),t.Q6J("disabled",0===e.remaining.length),t.xp6(1),t.hij(" Add remaining ",e.remaining.length," sites "),t.xp6(4),t.hij(" ",e.siteDisplay," "),t.xp6(3),t.Q6J("source",e.sugar))},directives:[n.O5,C.lW,l.gM,S.Hw,$.S,w.n],styles:[".sugar-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{width:30%}.form-row[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{width:40%}.form-row[_ngcontent-%COMP%]   .addRemaining[_ngcontent-%COMP%]{width:20%}.selectedSite[_ngcontent-%COMP%]{padding-left:2px;padding-right:2px}"]}),a}();function z(a,d){1&a&&t._UZ(0,"mat-divider",7),2&a&&t.Q6J("inset",!0)}function G(a,d){if(1&a){var s=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"app-sugar-form",5),t.NdJ("sugarDeleted",function(m){return t.CHM(s),t.oxw().deleteSugar(m)}),t.qZA(),t.YNc(2,z,1,1,"mat-divider",6),t.qZA()}if(2&a){var e=d.$implicit,r=d.last,o=d.index,g=t.oxw();t.Q6J("id","substance-sugars-"+o),t.xp6(1),t.Q6J("sugar",e)("remaining",g.remainingSites),t.xp6(1),t.Q6J("ngIf",!r)}}function X(a,d){if(1&a){var s=t.EpF();t.TgZ(0,"div",8),t._UZ(1,"span",9),t.TgZ(2,"div",8),t.TgZ(3,"button",10),t.NdJ("click",function(){return t.CHM(s),t.oxw().addOtherSugar()}),t._uU(4," Add sugar "),t._UZ(5,"mat-icon",11),t.qZA(),t.qZA(),t.qZA()}}var K=function(){var a=function(d){(0,P.Z)(e,d);var s=(0,J.Z)(e);function e(r,o,g){var c;return(0,h.Z)(this,e),(c=s.call(this,g)).substanceFormService=r,c.scrollToService=o,c.gaService=g,c.remainingSites=[],c.invalidSites=0,c.subscriptions=[],c.analyticsEventCategory="substance form sugars",c}return(0,v.Z)(e,[{key:"ngOnInit",value:function(){this.canAddItemUpdate.emit(!0),this.menuLabelUpdate.emit("Sugars")}},{key:"ngAfterViewInit",value:function(){var o=this,g=this.substanceFormService.substanceSugars.subscribe(function(m){o.sugars=m,o.getRemainingSites()});this.subscriptions.push(g);var c=this.substanceFormService.substanceSubunits.subscribe(function(m){o.subunits=m,o.getRemainingSites()});this.subscriptions.push(c)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(o){o.unsubscribe()})}},{key:"getRemainingSites",value:function(){var o=[],g=[];this.subunits&&this.sugars&&(this.subunits.forEach(function(c){if(null!=c.sequence&&c.sequence.length>0)for(var m=1;m<=c.sequence.length;m++)g.push({subunitIndex:c.subunitIndex,residueIndex:m})}),this.sugars.forEach(function(c){o=o.concat(c.sites)})),this.remainingSites=g.filter(function(c){return!o.some(function(m){return c.subunitIndex===m.subunitIndex&&c.residueIndex===m.residueIndex})}),this.invalidSites=g.length-o.length}},{key:"addItem",value:function(){this.addOtherSugar()}},{key:"addOtherSugar",value:function(){var o=this;this.substanceFormService.addSubstanceSugar(),setTimeout(function(){o.scrollToService.scrollToElement("substance-sugars-0","center")})}},{key:"deleteSugar",value:function(o){this.substanceFormService.deleteSubstanceSugar(o)}},{key:"findElements",value:function(o,g,c){var O,m=[],p=(0,E.Z)(o);try{for(p.s();!(O=p.n()).done;){var D=O.value;D[g]===c&&m.push(D)}}catch(tt){p.e(tt)}finally{p.f()}return m}}]),e}(N.u);return a.\u0275fac=function(s){return new(s||a)(t.Y36(F.B),t.Y36(k.i),t.Y36(R.$))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-substance-form-sugars"]],features:[t.qOj],decls:5,vars:4,consts:[[1,"responsive"],[1,"form-row",3,"ngClass"],["class","alternate-backgrounds","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["class","form-row",4,"ngIf"],["appScrollToTarget","",1,"alternate-backgrounds",3,"id"],[3,"sugar","remaining","sugarDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"],[1,"form-row"],[1,"middle-fill"],["mat-button","",3,"click"],["svgIcon","add_circle_outline"]],template:function(s,e){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._uU(2),t.qZA(),t.YNc(3,G,3,4,"div",2),t.qZA(),t.YNc(4,X,6,0,"div",3)),2&s&&(t.xp6(1),t.Q6J("ngClass",0===e.invalidSites?"":"too-many"),t.xp6(1),t.hij("Remaining Sugars: ",0===e.invalidSites?e.remainingSites.length:e.invalidSites,""),t.xp6(1),t.Q6J("ngForOf",e.sugars),t.xp6(1),t.Q6J("ngIf",e.sugars&&e.sugars.length>0))},directives:[n.mk,n.sg,Y.P,W,n.O5,Z.d,C.lW,S.Hw],styles:[".form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;padding:5px 10px;-ms-flex-align:end;align-items:flex-end;font-size:18px;margin-bottom:5px}.too-many[_ngcontent-%COMP%]{color:red}"]}),a}(),q=(i(64061),function(){var a=(0,v.Z)(function d(){(0,h.Z)(this,d)});return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[n.ez,b.o0.forChild(K),T.O,Z.t,S.Ps,C.ot,A.w,I.lN,x.UX,x.u5,u.TU,l.AV,_.vV,f.c,M.LD]]}),a}())}}]);
//# sourceMappingURL=2816.f3e6fbbf879b46ed.js.map