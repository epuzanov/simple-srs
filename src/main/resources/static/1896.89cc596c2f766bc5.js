"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[1896],{1896:function(Aa,M,_){_.r(M),_.d(M,{SubstanceProductsModule:function(){return ha}});var g=_(48047),b=_(78069),v=_(36362),R=_(75143),C=_(24582),x=_(7318),y=_(40104),F=_(42154),z=_(68756),t=_(76442),E=function(){var e=function(n){(0,C.Z)(o,n);var a=(0,x.Z)(o);function o(c,i){var s;return(0,b.Z)(this,o),(s=a.call(this,c)).gaService=c,s.service=i,s.results=[],s.isAdmin=!1,s}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){}},{key:"setPageEvent",value:function(i){null!=i&&(this.page=i.pageIndex,this.pageSize=i.pageSize)}},{key:"setResultData",value:function(i,s){this.results=i,this.filtered=i,this.totalRecords=this.service.totalRecords,this.pageChangeFda()}},{key:"pageChangeFda",value:function(i,s){if(this.paged=[],this.filtered)for(var p=0;p<this.filtered.length&&null!=this.filtered[p];p++)this.paged.push(this.filtered[p])}}]),o}(z.uJ);return e.\u0275fac=function(a){t.$Z()},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e}(),w=_(53141),U=_(44250),Y=_(59295),P=_(35096),f=_(98002),N=_(83448),D=_(95758),q=_(12379),S=_(87317),A=_(65590),T=_(74742),l=_(97217),Z=_(26439),$=_(63322),L=_(48968);function B(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",3),t.TgZ(3,"b"),t._uU(4,"No Application Found"),t.qZA(),t.qZA(),t._UZ(5,"br"),t.qZA())}function j(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",22),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).export()}),t._UZ(2,"mat-icon",24),t._uU(3," Export All Applications "),t.qZA(),t.qZA()}}function H(e,n){1&e&&(t.TgZ(0,"div",25),t._UZ(1,"mat-progress-spinner",26),t.qZA())}function G(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Type "),t.qZA())}var W=function(n){return["/application",n,"edit"]};function K(e,n){if(1&e&&(t.TgZ(0,"a",31),t._UZ(1,"mat-icon",32),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,W,a.id))}}var X=function(n){return["/application",n]};function V(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t._uU(3," \xa0\xa0 "),t.YNc(4,K,2,3,"a",30),t.qZA()),2&e){var a=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.VKq(3,X,a.id)),t.xp6(1),t.Oqu(a.appType),t.xp6(2),t.Q6J("ngIf",o.isAdmin)}}var tt=function(n,a){return["/application-darrts",n,a]};function et(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",29),t._uU(2),t.qZA(),t._UZ(3,"br"),t.TgZ(4,"span",33),t._uU(5,"(Integrity)"),t.qZA(),t.qZA()),2&e){var a=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.WLB(2,tt,a.appType,a.appNumber)),t.xp6(1),t.Oqu(a.appType)}}function nt(e,n){if(1&e&&(t.TgZ(0,"td",28),t.YNc(1,V,5,5,"span",0),t.YNc(2,et,6,5,"span",0),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.fromTable&&"GSRS"===a.fromTable),t.xp6(1),t.Q6J("ngIf",a.fromTable&&"GSRS"!==a.fromTable)}}function at(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Number "),t.qZA())}function it(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.appNumber," ")}}function ot(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Product Name "),t.qZA())}function st(e,n){if(1&e&&(t.TgZ(0,"div",36),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.productName," ")}}function rt(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,st,2,1,"div",35),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.applicationProductNameList)}}function ct(e,n){if(1&e&&(t.TgZ(0,"td",28),t.YNc(1,rt,2,1,"div",34),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.applicationProductList)}}function ut(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Sponsor Name "),t.qZA())}function pt(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sponsorName," ")}}function lt(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Status "),t.qZA())}function dt(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.appStatus," ")}}function mt(e,n){1&e&&(t.TgZ(0,"th",27),t._uU(1," Application Sub Type "),t.qZA())}function _t(e,n){if(1&e&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.appSubType," ")}}function vt(e,n){1&e&&t._UZ(0,"tr",37)}function ft(e,n){1&e&&t._UZ(0,"tr",38)}var gt=function(){return[5,10,25,100]};function bt(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",4),t.TgZ(1,"div",5),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.TgZ(5,"span",6),t._uU(6),t.qZA(),t._uU(7," \xa0\xa0\xa0 "),t.YNc(8,j,4,0,"span",7),t.qZA(),t.TgZ(9,"div",8),t.YNc(10,H,2,0,"div",9),t.TgZ(11,"table",10),t.ynx(12,11),t.YNc(13,G,2,0,"th",12),t.YNc(14,nt,3,2,"td",13),t.BQk(),t.ynx(15,14),t.YNc(16,at,2,0,"th",12),t.YNc(17,it,2,1,"td",13),t.BQk(),t.ynx(18,15),t.YNc(19,ot,2,0,"th",12),t.YNc(20,ct,2,1,"td",13),t.BQk(),t.ynx(21,16),t.YNc(22,ut,2,0,"th",12),t.YNc(23,pt,2,1,"td",13),t.BQk(),t.ynx(24,17),t.YNc(25,lt,2,0,"th",12),t.YNc(26,dt,2,1,"td",13),t.BQk(),t.ynx(27,18),t.YNc(28,mt,2,0,"th",12),t.YNc(29,_t,2,1,"td",13),t.BQk(),t.YNc(30,vt,1,0,"tr",19),t.YNc(31,ft,1,0,"tr",20),t.qZA(),t.qZA(),t.TgZ(32,"mat-paginator",21),t.NdJ("page",function(s){return t.CHM(a),t.oxw().getApplicationBySubstanceKeyCenter(s)}),t.qZA(),t.qZA()}if(2&e){var o=n.$implicit,c=t.oxw();t.s9C("label",o),t.xp6(3),t.hij(" ",o,""),t.xp6(3),t.Oqu(c.loadingStatus),t.xp6(2),t.Q6J("ngIf",c.isAdmin),t.xp6(2),t.Q6J("ngIf",c.showSpinner),t.xp6(1),t.Q6J("dataSource",c.paged),t.xp6(19),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(1),t.Q6J("length",c.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(11,gt))}}var ht=function(){var e=function(n){(0,C.Z)(o,n);var a=(0,x.Z)(o);function o(c,i,s,p,d,m,u){var r;return(0,b.Z)(this,o),(r=a.call(this,p,d)).router=c,r.authService=i,r.loadingService=s,r.gaService=p,r.applicationService=d,r.generalService=m,r.dialog=u,r.applicationCount=0,r.totalApplication=0,r.centerList=[],r.centerListOriginal=[],r.center="",r.fromTable="",r.loadingStatus="",r.showSpinner=!1,r.foundCenterList=!1,r.loadingComplete=!1,r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.countApplicationOut=new t.vpe,r.displayedColumns=["appType","appNumber","productName","sponsorName","applicationStatus","applicationSubType"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var i=this;this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,Y.q)(1)).subscribe(function(s){i.isAdmin=s}),this.bdnum&&(this.getApplicationCenterList(),this.privateSearch="root_applicationProductList_applicationIngredientList_substanceKey:"+this.bdnum,this.getApplicationBySubstanceKeyCenter(null,"initial"))}},{key:"getApplicationCenterList",value:function(){var i=this;this.applicationService.getApplicationCenterList(this.bdnum).subscribe(function(s){i.centerListOriginal=s,i.centerList=s,i.centerList&&i.centerList.length>0&&(i.foundCenterList=!0),i.loadingComplete=!0})}},{key:"applicationTabSelected",value:function(i){if(i){var p=i.tab.textLabel;if(null!=p){this.loadingStatus="Loading data...";var d=p.indexOf(" ");this.center=p.slice(0,d),this.fromTable=p.slice(d+1,p.length)}this.paged=[],this.privateSearch="root_applicationProductList_applicationIngredientList_substanceKey:"+this.bdnum+" AND root_center:"+this.center+" AND root_fromTable: "+this.fromTable,this.getApplicationBySubstanceKeyCenter()}}},{key:"getApplicationBySubstanceKeyCenter",value:function(i,s){var p=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.applicationService.getApplicationAll("default",this.page*this.pageSize,this.pageSize,this.privateSearch,this.privateFacetParams).subscribe(function(u){s&&"initial"===s?p.etagAllExport=u.etag:(p.applicationService.totalRecords=u.total,p.applicationCount=u.total,p.setResultData(u.content),p.etag=u.etag,p.countApplicationOut.emit(p.applicationCount))},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var s="xlsx",p=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(P.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceApplication"}}).afterClosed().subscribe(function(m){m&&""!==m&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,m+"."+s).subscribe(function(r){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",r.id])},function(r){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.applicationService.getAppAllApiExportUrl(i,s)}},{key:"updateApplicationUrl",get:function(){return this.applicationService.getUpdateApplicationUrl()}},{key:"applicationListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.applicationService.getApplicationListExportUrl(this.bdnum))}}]),o}(E);return e.\u0275fac=function(a){return new(a||e)(t.Y36(f.F0),t.Y36(U.e),t.Y36(N.b),t.Y36(y.$),t.Y36($.I),t.Y36(L.m),t.Y36(D.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-application"]],inputs:{bdnum:"bdnum"},outputs:{countApplicationOut:"countApplicationOut"},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"padleft25px","colorblue"],[3,"label"],[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"colorred"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",1,"font12px",3,"dataSource"],["matColumnDef","appType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","appNumber"],["matColumnDef","productName"],["matColumnDef","sponsorName"],["matColumnDef","applicationStatus"],["matColumnDef","applicationSubType"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank",3,"routerLink"],["target","_blank","matTooltip","Edit GSRS Application Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit GSRS Application Record",3,"routerLink"],["svgIcon","edit"],[1,"font10px","colorgray"],[4,"ngFor","ngForOf"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.YNc(0,B,6,0,"div",0),t.TgZ(1,"mat-tab-group",1),t.NdJ("selectedTabChange",function(i){return o.applicationTabSelected(i)}),t.YNc(2,bt,33,12,"mat-tab",2),t.qZA()),2&a&&(t.Q6J("ngIf",!0===o.loadingComplete&&!1===o.foundCenterList&&0===o.applicationCount),t.xp6(2),t.Q6J("ngForOf",o.centerList))},directives:[v.O5,q.SP,v.sg,q.uX,S.lW,A.Hw,T.Ou,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,f.yS,l.as,l.XQ,l.nj,l.Gk,Z.NW],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font9px[_ngcontent-%COMP%]{font:size 10px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorgray[_ngcontent-%COMP%]{color:gray}.colorred[_ngcontent-%COMP%]{color:red}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Ct=_(69638);function xt(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",16),t.TgZ(1,"button",17),t.NdJ("click",function(){return t.CHM(a),t.oxw().export()}),t._UZ(2,"mat-icon",18),t._uU(3," Export All CT "),t.qZA(),t.qZA()}}function St(e,n){1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}function At(e,n){1&e&&t._UZ(0,"th",21)}function Tt(e,n){if(1&e&&(t.TgZ(0,"td",22),t.TgZ(1,"a",23),t._UZ(2,"mat-icon",24),t.qZA(),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("href","edit-clinical-trial/"+a.trialNumber,t.LSH)}}function Zt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1,"Trial Number"),t.qZA())}function yt(e,n){if(1&e&&(t.TgZ(0,"td",22),t.TgZ(1,"a",25),t._uU(2),t.qZA(),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("href","https://clinicaltrials.gov/ct2/show/"+a.trialNumber,t.LSH),t.xp6(1),t.Oqu(a.trialNumber)}}function Et(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Title "),t.qZA())}function Ut(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.title," ")}}function Pt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Sponsor Name "),t.qZA())}function Nt(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sponsor," ")}}function Dt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Conditions "),t.qZA())}function Ot(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.conditions," ")}}function qt(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Outcome Measures "),t.qZA())}function wt(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.outcomeMeasures," ")}}function Yt(e,n){1&e&&t._UZ(0,"tr",26)}function It(e,n){1&e&&t._UZ(0,"tr",27)}var kt=function(){return[5,10,25,100]},Mt=function(){var e=function(n){(0,C.Z)(o,n);var a=(0,x.Z)(o);function o(c,i,s,p,d,m,u){var r;return(0,b.Z)(this,o),(r=a.call(this,c,i)).gaService=c,r.clinicalTrialService=i,r.configService=s,r.authService=p,r.loadingService=d,r.router=m,r.dialog=u,r.clinicalTrialCount=0,r.showSpinner=!1,r.subscriptions=[],r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.loadingStatus="",r.countClinicalTrialOut=new t.vpe,r.displayedColumns=["edit","nctNumber","title","sponsorName","conditions","outcomemeasures"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var i=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,Y.q)(1)).subscribe(function(s){i.isAdmin=s}),this.substanceUuid&&this.getSubstanceClinicalTrials(null,"initial")}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getSubstanceClinicalTrials",value:function(i,s){var p=this;this.setPageEvent(i);var d=this.page*this.pageSize;this.showSpinner=!0;var m=this.clinicalTrialService.getClinicalTrials({searchTerm:this.substanceUuid,cutoff:null,type:"substanceKey",order:"$trialNumber",pageSize:this.pageSize,facets:this.privateFacetParams,skip:d}).subscribe(function(u){s&&"initial"===s&&(p.etagAllExport=u.etag),p.clinicalTrialService.totalRecords=u.total,p.setResultData(u.content),p.clinicalTrialCount=u.total,p.etag=u.etag,p.countClinicalTrialOut.emit(p.clinicalTrialCount),p.showSpinner=!1});this.subscriptions.push(m)}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var s="xlsx",p=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(P.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceClinicalTrialUS"}}).afterClosed().subscribe(function(m){m&&""!==m&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,m+"."+s).subscribe(function(r){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",r.id])},function(r){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.clinicalTrialService.getApiExportUrl(i,s)}},{key:"clinicalTrialListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.clinicalTrialService.getClinicalTrialListExportUrl(this.bdnum))}}]),o}(E);return e.\u0275fac=function(a){return new(a||e)(t.Y36(y.$),t.Y36(Ct.m),t.Y36(w.E),t.Y36(U.e),t.Y36(N.b),t.Y36(f.F0),t.Y36(D.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-clinical-trials"]],inputs:{substanceUuid:"substanceUuid"},outputs:{countClinicalTrialOut:"countClinicalTrialOut"},features:[t.qOj],decls:28,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","edit"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nctNumber"],["matColumnDef","title"],["matColumnDef","sponsorName"],["matColumnDef","conditions"],["matColumnDef","outcomemeasures"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank","title","Edit in new tab",1,"clinical-trials-browse-edit1",3,"href"],["svgIcon","edit",2,"width","20px","height","20px"],["target","_blank","title","see clinicaltrials.gov",3,"href"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Clinical Trial\xa0\xa0\xa0\xa0"),t.qZA(),t.YNc(3,xt,4,0,"span",1),t.qZA(),t.TgZ(4,"div",2),t.YNc(5,St,2,0,"div",3),t.TgZ(6,"table",4),t.ynx(7,5),t.YNc(8,At,1,0,"th",6),t.YNc(9,Tt,3,1,"td",7),t.BQk(),t.ynx(10,8),t.YNc(11,Zt,2,0,"th",6),t.YNc(12,yt,3,2,"td",7),t.BQk(),t.ynx(13,9),t.YNc(14,Et,2,0,"th",6),t.YNc(15,Ut,2,1,"td",7),t.BQk(),t.ynx(16,10),t.YNc(17,Pt,2,0,"th",6),t.YNc(18,Nt,2,1,"td",7),t.BQk(),t.ynx(19,11),t.YNc(20,Dt,2,0,"th",6),t.YNc(21,Ot,2,1,"td",7),t.BQk(),t.ynx(22,12),t.YNc(23,qt,2,0,"th",6),t.YNc(24,wt,2,1,"td",7),t.BQk(),t.YNc(25,Yt,1,0,"tr",13),t.YNc(26,It,1,0,"tr",14),t.qZA(),t.qZA(),t.TgZ(27,"mat-paginator",15),t.NdJ("page",function(i){return o.getSubstanceClinicalTrials(i)}),t.qZA()),2&a&&(t.xp6(3),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,kt)))},directives:[v.O5,S.lW,A.Hw,T.Ou,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,l.as,l.XQ,l.nj,l.Gk,Z.NW],styles:[".clinical-trials-browse-edit1[_ngcontent-%COMP%], .clinical-trials-browse-edit2[_ngcontent-%COMP%]{text-decoration:none}.clinical-trials-browse-edit1[_ngcontent-%COMP%], .clinical-trials-browse-edit2[_ngcontent-%COMP%]{padding-left:.5em;padding-right:.5em}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:gray}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorred[_ngcontent-%COMP%]{color:red}.btn1[_ngcontent-%COMP%]{color:#312e2e;background-color:#ffde79f5;border-radius:10px 0 0 10px;font-size:16px}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),I=_(43461),Lt=[{value:"default",display:"Relevance",displayedColumns:"default",direction:"asc"},{value:"^root_ptTerm",display:"PT Term, Ascending",displayedColumns:"ptTerm",direction:"asc"},{value:"$root_ptTerm",display:"PT Term, Descending",displayedColumns:"ptTerm",direction:"desc"},{value:"^root_primSoc",display:"Prim SOC, Ascending",displayedColumns:"primSoc",direction:"asc"},{value:"$root_primSoc",display:"Prim SOC, Descending",displayedColumns:"primSoc",direction:"desc"},{value:"^root_caseCount",display:"Case Count, Ascending",displayedColumns:"caseCount",direction:"asc"},{value:"$root_caseCount",display:"Case Count, Descending",displayedColumns:"caseCount",direction:"desc"},{value:"^root_ptCount",display:"PT Count, Ascending",displayedColumns:"ptCount",direction:"asc"},{value:"$root_ptCount",display:"PT Count, Descending",displayedColumns:"ptCount",direction:"desc"},{value:"^root_prr",display:"PRR, Ascending",displayedColumns:"prr",direction:"asc"},{value:"$root_prr",display:"PRR, Descending",displayedColumns:"prr",direction:"desc"}],k=_(64316);function Qt(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",20),t.TgZ(1,"button",21),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).export()}),t._UZ(2,"mat-icon",22),t._uU(3," Export "),t.qZA(),t.qZA()}}function Jt(e,n){if(1&e&&(t.TgZ(0,"div",18),t.YNc(1,Qt,4,0,"span",19),t.qZA()),2&e){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.isAdmin&&a.adverseEventCount>0)}}function Rt(e,n){if(1&e&&(t.TgZ(0,"div",23),t.TgZ(1,"a",24),t.TgZ(2,"button",25),t.TgZ(3,"mat-icon"),t._uU(4,"analytics"),t.qZA(),t.TgZ(5,"span",26),t._uU(6,"Analysis by Substance"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){var a=t.oxw();t.xp6(1),t.s9C("href",a.adverseEventShinySubstanceNameURLWithParam,t.LSH)}}function Ft(e,n){1&e&&(t.TgZ(0,"div",27),t._UZ(1,"mat-progress-spinner",28),t.qZA())}function zt(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PT Term "),t.qZA())}function $t(e,n){if(1&e&&(t.TgZ(0,"span",32),t.TgZ(1,"a",33),t.TgZ(2,"mat-icon"),t._uU(3,"analytics"),t.qZA(),t.qZA(),t.qZA()),2&e){var a=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.hYB("href","",o.adverseEventShinyAdverseEventURLWithParam,"",o.getDecodeURL(a.ptTerm),"",t.LSH)}}function Bt(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.YNc(2,$t,4,2,"span",31),t.qZA()),2&e){var a=n.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",a.ptTerm," "),t.xp6(1),t.Q6J("ngIf",!0===o.adverseEventShinyAdverseEventDisplay)}}function jt(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," Prim SOC "),t.qZA())}function Ht(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.primSoc," ")}}function Gt(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," Case Count "),t.qZA())}function Wt(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.caseCount,"")}}function Kt(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PT Count "),t.qZA())}function Xt(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",36),t.ALo(2,"titlecase"),t.ALo(3,"titlecase"),t._UZ(4,"div",37),t.qZA(),t.TgZ(5,"span",38),t._uU(6,"FAERS Public Dashboard"),t.qZA(),t.qZA()),2&e){var a=t.oxw().$implicit,o=t.oxw();t.xp6(1),t.FAE("href","",o.FAERSDashboardAdverseEventUrl,"",o.getDecodeURL(t.lcZ(2,5,a.ptTerm)),"",o.FAERSDashboardReactionGroup,"",o.getDecodeURL(t.lcZ(3,7,a.primSoc)),"",t.LSH),t.xp6(3),t.Q6J("innerHTML",a.ptCount,t.oJD)}}function Vt(e,n){if(1&e&&t._UZ(0,"div",37),2&e){var a=t.oxw().$implicit;t.Q6J("innerHTML",a.ptCount,t.oJD)}}function te(e,n){if(1&e&&(t.TgZ(0,"td",30),t.YNc(1,Xt,7,9,"div",34),t.YNc(2,Vt,1,1,"ng-template",null,35,t.W1O),t.qZA()),2&e){var a=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.FAERSDashboardAdverseEventUrl)("ngIfElse",a)}}function ee(e,n){1&e&&(t.TgZ(0,"th",29),t._uU(1," PRR "),t.qZA())}function ne(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.prr,".2-2")," ")}}function ae(e,n){1&e&&t._UZ(0,"tr",39)}function ie(e,n){1&e&&t._UZ(0,"tr",40)}var oe=function(){return[5,10,25,100]},se=function(){var e=function(n){(0,C.Z)(o,n);var a=(0,x.Z)(o);function o(c,i,s,p,d,m,u){var r;return(0,b.Z)(this,o),(r=a.call(this,i,s)).router=c,r.gaService=i,r.adverseEventService=s,r.loadingService=p,r.configService=d,r.authService=m,r.dialog=u,r.adverseEventCount=0,r.orderBy="$root_ptCount",r.ascDescDir="desc",r.showSpinner=!1,r.sortValues=Lt,r.privateExport=!1,r.disableExport=!1,r.etag="",r.loadingStatus="",r.subscriptions=[],r.countAdvPtOut=new t.vpe,r.adverseEventShinySubstanceNameDisplay=!1,r.adverseEventShinyAdverseEventDisplay=!1,r.FAERSDashboardSearchTerm="/select/Search%20Term/",r.FAERSDashboardReactionTerm="/select/Reaction%20Term/",r.FAERSDashboardReactionGroup="/select/Reaction%20Group/",r.displayedColumns=["ptTerm","primSoc","caseCount","ptCount","prr"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(p){i.isAdmin=p});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventPt(),this.getFaersDashboardUrl(),this.getFaersDashboardRecordByName(),this.adverseEventPtListExportUrl(),this.getAdverseEventShinyConfig())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventPt",value:function(i){var s=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventPt(this.orderBy,this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){s.adverseEventService.totalRecords=u.total,s.adverseEventCount=u.total,s.setResultData(u.content),s.etag=u.etag,s.countAdvPtOut.emit(s.adverseEventCount)},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"adverseEventPtListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventPtListExportUrl(this.bdnum))}},{key:"sortData",value:function(i){var s=this;if(i.active){var p=this.displayedColumns.indexOf(i.active).toString();this.ascDescDir=i.direction,this.sortValues.forEach(function(d){d.displayedColumns&&d.direction&&s.displayedColumns[p]===d.displayedColumns&&s.ascDescDir===d.direction&&(s.orderBy=d.value)}),this.getAdverseEventPt()}}},{key:"export",value:function(){var i=this;if(this.etag){var s="xlsx",p=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(P.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceAdverseEventPt"}}).afterClosed().subscribe(function(m){m&&""!==m&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,m+"."+s).subscribe(function(r){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",r.id])},function(r){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.adverseEventService.getApiExportUrlPt(i,s)}},{key:"getFaersDashboardRecordByName",value:function(){var i=this,s=this.adverseEventService.getFaersDashboardRecordByName(this.substanceName).subscribe(function(p){p&&p.name&&(i.FAERSDashboardSubstanceName=p.name,i.FAERSDashboardAdverseEventUrl=i.FAERSDashboardAdverseEventUrl+p.name+i.FAERSDashboardReactionTerm)});this.subscriptions.push(s)}},{key:"getFaersDashboardUrl",value:function(){this.configService.configData&&this.configService.configData.FAERSDashboardAdverseEventUrl&&null!==this.configService.configData.FAERSDashboardAdverseEventUrl&&(this.FAERSDashboardAdverseEventUrl=this.configService.configData.FAERSDashboardAdverseEventUrl+this.FAERSDashboardSearchTerm)}},{key:"getAdverseEventShinyConfig",value:function(){this.configService.configData&&(this.configService.configData.adverseEventShinySubstanceNameDisplay&&null!==this.configService.configData.adverseEventShinySubstanceNameDisplay&&(this.adverseEventShinySubstanceNameDisplay=JSON.parse(this.configService.configData.adverseEventShinySubstanceNameDisplay)),this.configService.configData.adverseEventShinySubstanceNameURL&&null!==this.configService.configData.adverseEventShinySubstanceNameURL&&(this.adverseEventShinySubstanceNameURL=this.configService.configData.adverseEventShinySubstanceNameURL,this.adverseEventShinySubstanceNameURLWithParam=this.adverseEventShinySubstanceNameURL+decodeURIComponent(this.substanceName)),this.configService.configData.adverseEventShinyAdverseEventDisplay&&null!==this.configService.configData.adverseEventShinyAdverseEventDisplay&&(this.adverseEventShinyAdverseEventDisplay=JSON.parse(this.configService.configData.adverseEventShinyAdverseEventDisplay)),this.configService.configData.adverseEventShinyAdverseEventURL&&null!==this.configService.configData.adverseEventShinyAdverseEventURL&&(this.adverseEventShinyAdverseEventURL=this.configService.configData.adverseEventShinyAdverseEventURL,this.adverseEventShinyAdverseEventURLWithParam=this.adverseEventShinyAdverseEventURL))}},{key:"getDecodeURL",value:function(i){var s="";return null!==i&&(s=decodeURIComponent(i)),s}}]),o}(E);return e.\u0275fac=function(a){return new(a||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(I.a),t.Y36(N.b),t.Y36(w.E),t.Y36(U.e),t.Y36(D.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventpt"]],inputs:{bdnum:"bdnum",substanceName:"substanceName"},outputs:{countAdvPtOut:"countAdvPtOut"},features:[t.qOj],decls:28,vars:10,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"divflex"],[1,"padtop10px"],["class","marginleft50px padleft25px padtopneg50px width120px",4,"ngIf"],["class","marginleft50px padleft25px width200px",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","","matSort","",3,"dataSource","matSortChange"],["matColumnDef","ptTerm"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","primSoc"],["matColumnDef","caseCount"],["matColumnDef","ptCount"],["matColumnDef","prr"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"marginleft50px","padleft25px","padtopneg50px","width120px"],["class","export",4,"ngIf"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"marginleft50px","padleft25px","width200px"],["target","_blank",3,"href"],["mat-icon-button","","color","accent","aria-label","Analysis by Substance Name on Shiny Server"],[1,"colororange"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","",4,"ngIf"],[1,""],["target","_blank","title","Analysis by Adverse Event/PT Term on Shiny Server",3,"href"],[4,"ngIf","ngIfElse"],["noFaersLink",""],["target","_blank","title","FAERS Public Dashboard",3,"href"],[3,"innerHTML"],[1,"colorgray","font10px"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"b"),t._uU(4,"Adverse Event PT"),t.qZA(),t.qZA(),t.YNc(5,Jt,2,1,"div",3),t.YNc(6,Rt,7,1,"div",4),t.qZA(),t.TgZ(7,"div",5),t.YNc(8,Ft,2,0,"div",6),t.TgZ(9,"table",7),t.NdJ("matSortChange",function(i){return o.sortData(i)}),t.ynx(10,8),t.YNc(11,zt,2,0,"th",9),t.YNc(12,Bt,3,2,"td",10),t.BQk(),t.ynx(13,11),t.YNc(14,jt,2,0,"th",9),t.YNc(15,Ht,2,1,"td",10),t.BQk(),t.ynx(16,12),t.YNc(17,Gt,2,0,"th",9),t.YNc(18,Wt,2,1,"td",10),t.BQk(),t.ynx(19,13),t.YNc(20,Kt,2,0,"th",9),t.YNc(21,te,4,2,"td",10),t.BQk(),t.ynx(22,14),t.YNc(23,ee,2,0,"th",9),t.YNc(24,ne,3,4,"td",10),t.BQk(),t.YNc(25,ae,1,0,"tr",15),t.YNc(26,ie,1,0,"tr",16),t.qZA(),t.qZA(),t.TgZ(27,"mat-paginator",17),t.NdJ("page",function(i){return o.getAdverseEventPt(i)}),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.Q6J("ngIf",o.totalRecords>0),t.xp6(1),t.Q6J("ngIf",!0===o.adverseEventShinySubstanceNameDisplay),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(9,oe)))},directives:[v.O5,S.lW,A.Hw,T.Ou,l.BZ,k.YE,l.w1,l.fO,l.ge,k.nU,l.Dz,l.ev,l.as,l.XQ,l.nj,l.Gk,Z.NW],pipes:[v.rS,v.JJ],styles:[".mat-table-style[_ngcontent-%COMP%]{position:relative}.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.divflex[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex}.font8px[_ngcontent-%COMP%]{font-size:8px}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.margintop10px[_ngcontent-%COMP%]{margin-top:10px}.margintop90px[_ngcontent-%COMP%]{margin-top:90px}marginleft50px[_ngcontent-%COMP%]{margin-left:50px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.padtop10px[_ngcontent-%COMP%]{padding-top:10px}.padtopneg50px[_ngcontent-%COMP%]{padding-top:-50px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorgray[_ngcontent-%COMP%]{color:gray}.colorred[_ngcontent-%COMP%]{color:red}.colororange[_ngcontent-%COMP%]{color:#e4862e}.bordergray[_ngcontent-%COMP%]{border:1px solid gray}.width120px[_ngcontent-%COMP%]{width:120px;display:block}.width200px[_ngcontent-%COMP%]{width:200px;display:block}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}();function re(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",16),t.TgZ(1,"button",17),t.NdJ("click",function(){return t.CHM(a),t.oxw().export()}),t._UZ(2,"mat-icon",18),t._uU(3," Export "),t.qZA(),t.qZA()}}function ce(e,n){1&e&&(t.TgZ(0,"div",19),t._UZ(1,"mat-progress-spinner",20),t.qZA())}function ue(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," DME Reactions "),t.qZA())}function pe(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.dmeReactions," ")}}function le(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," PT Term Meddra "),t.qZA())}function de(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.ptTermMeddra," ")}}function me(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Case Count "),t.qZA())}function _e(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.caseCount," ")}}function ve(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Dme Count "),t.qZA())}function fe(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.dmeCount," ")}}function ge(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Dme Count Percent "),t.qZA())}function be(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.dmeCountPercent," ")}}function he(e,n){1&e&&(t.TgZ(0,"th",21),t._uU(1," Weighted Average PRR"),t.qZA())}function Ce(e,n){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,a.weightedAvgPrr,".2-2")," ")}}function xe(e,n){1&e&&t._UZ(0,"tr",23)}function Se(e,n){1&e&&t._UZ(0,"tr",24)}var Ae=function(){return[5,10,25,100]},Te=function(){var e=function(n){(0,C.Z)(o,n);var a=(0,x.Z)(o);function o(c,i,s,p,d,m){var u;return(0,b.Z)(this,o),(u=a.call(this,i,s)).router=c,u.gaService=i,u.adverseEventService=s,u.authService=p,u.loadingService=d,u.dialog=m,u.adverseEventCount=0,u.showSpinner=!1,u.privateExport=!1,u.disableExport=!1,u.etag="",u.loadingStatus="",u.subscriptions=[],u.countAdvDmeOut=new t.vpe,u.displayedColumns=["dmeReactions","ptTermMeddra","caseCount","dmeCount","dmeCountPercent","weightedAvgPrr"],u}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(p){i.isAdmin=p});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventDme(),this.adverseEventDmeListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventDme",value:function(i){var s=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventDme("default",this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){s.adverseEventService.totalRecords=u.total,s.adverseEventCount=u.total,s.setResultData(u.content),s.etag=u.etag,s.countAdvDmeOut.emit(s.adverseEventCount)},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"export",value:function(){var i=this;if(this.etag){var s="xlsx",p=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(P.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceAdverseEventDme"}}).afterClosed().subscribe(function(m){m&&""!==m&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,m+"."+s).subscribe(function(r){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",r.id])},function(r){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.adverseEventService.getApiExportUrlDme(i,s)}},{key:"adverseEventDmeListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventDmeListExportUrl(this.bdnum))}}]),o}(E);return e.\u0275fac=function(a){return new(a||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(I.a),t.Y36(U.e),t.Y36(N.b),t.Y36(D.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventdme"]],outputs:{countAdvDmeOut:"countAdvDmeOut"},features:[t.qOj],decls:29,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","dmeReactions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ptTermMeddra"],["matColumnDef","caseCount"],["matColumnDef","dmeCount"],["matColumnDef","dmeCountPercent"],["matColumnDef","weightedAvgPrr"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Adverse Event DME"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,re,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,ce,2,0,"div",3),t.TgZ(7,"table",4),t.ynx(8,5),t.YNc(9,ue,2,0,"th",6),t.YNc(10,pe,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,le,2,0,"th",6),t.YNc(13,de,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,me,2,0,"th",6),t.YNc(16,_e,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,ve,2,0,"th",6),t.YNc(19,fe,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,ge,2,0,"th",6),t.YNc(22,be,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,he,2,0,"th",6),t.YNc(25,Ce,3,4,"td",7),t.BQk(),t.YNc(26,xe,1,0,"tr",13),t.YNc(27,Se,1,0,"tr",14),t.qZA(),t.qZA(),t.TgZ(28,"mat-paginator",15),t.NdJ("page",function(i){return o.getAdverseEventDme(i)}),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.adverseEventCount>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,Ae)))},directives:[v.O5,S.lW,A.Hw,T.Ou,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,l.as,l.XQ,l.nj,l.Gk,Z.NW],pipes:[v.JJ],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorgray[_ngcontent-%COMP%]{color:gray}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}();function Ze(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",14),t.TgZ(1,"button",15),t.NdJ("click",function(){return t.CHM(a),t.oxw().export()}),t._UZ(2,"mat-icon",16),t._uU(3," Export "),t.qZA(),t.qZA()}}function ye(e,n){1&e&&(t.TgZ(0,"div",17),t._UZ(1,"mat-progress-spinner",18),t.qZA())}function Ee(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Adverse Event "),t.qZA())}function Ue(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.adverseEvent," ")}}function Pe(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Species "),t.qZA())}function Ne(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.species," ")}}function De(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Adverse Event Count "),t.qZA())}function Oe(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.aeCount," ")}}function qe(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Route of Administration "),t.qZA())}function we(e,n){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.routeOfAdmin," ")}}function Ye(e,n){1&e&&t._UZ(0,"tr",21)}function Ie(e,n){1&e&&t._UZ(0,"tr",22)}var ke=function(){return[5,10,25,100]},Me=function(){var e=function(n){(0,C.Z)(o,n);var a=(0,x.Z)(o);function o(c,i,s,p,d,m){var u;return(0,b.Z)(this,o),(u=a.call(this,i,s)).router=c,u.gaService=i,u.adverseEventService=s,u.authService=p,u.loadingService=d,u.dialog=m,u.adverseEventCount=0,u.showSpinner=!1,u.privateExport=!1,u.disableExport=!1,u.etag="",u.loadingStatus="",u.subscriptions=[],u.countAdvCvmOut=new t.vpe,u.displayedColumns=["adverseEvent","species","adverseEventCount","routeOfAdmin"],u}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(p){i.isAdmin=p});this.subscriptions.push(s),this.bdnum&&(this.getAdverseEventCvm(),this.adverseEventCvmListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"getAdverseEventCvm",value:function(i){var s=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.adverseEventService.getAdverseEventCvm("default",this.page*this.pageSize,this.pageSize,"root_substanceKey:"+this.bdnum,this.privateFacetParams).subscribe(function(u){s.adverseEventService.totalRecords=u.total,s.adverseEventCount=u.total,s.setResultData(u.content),s.etag=u.etag,s.countAdvCvmOut.emit(s.adverseEventCount)},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"export",value:function(){var i=this;if(this.etag){var s="xlsx",p=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(P.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceAdverseEventCvm"}}).afterClosed().subscribe(function(m){m&&""!==m&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,m+"."+s).subscribe(function(r){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",r.id])},function(r){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.adverseEventService.getApiExportUrlCvm(i,s)}},{key:"adverseEventCvmListExportUrl",value:function(){null!=this.bdnum&&(this.exportUrl=this.adverseEventService.getAdverseEventCvmListExportUrl(this.bdnum))}}]),o}(E);return e.\u0275fac=function(a){return new(a||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(I.a),t.Y36(U.e),t.Y36(N.b),t.Y36(D.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-adverseeventcvm"]],outputs:{countAdvCvmOut:"countAdvCvmOut"},features:[t.qOj],decls:23,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","adverseEvent"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","species"],["matColumnDef","adverseEventCount"],["matColumnDef","routeOfAdmin"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Adverse Event CVM"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,Ze,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,ye,2,0,"div",3),t.TgZ(7,"table",4),t.ynx(8,5),t.YNc(9,Ee,2,0,"th",6),t.YNc(10,Ue,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,Pe,2,0,"th",6),t.YNc(13,Ne,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,De,2,0,"th",6),t.YNc(16,Oe,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,qe,2,0,"th",6),t.YNc(19,we,2,1,"td",7),t.BQk(),t.YNc(20,Ye,1,0,"tr",11),t.YNc(21,Ie,1,0,"tr",12),t.qZA(),t.qZA(),t.TgZ(22,"mat-paginator",13),t.NdJ("page",function(i){return o.getAdverseEventCvm(i)}),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin&&o.adverseEventCount>0),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,ke)))},directives:[v.O5,S.lW,A.Hw,T.Ou,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,l.as,l.XQ,l.nj,l.Gk,Z.NW],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorgray[_ngcontent-%COMP%]{color:gray}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),Le=_(91781);function Qe(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",18),t.TgZ(1,"button",19),t.NdJ("click",function(){return t.CHM(a),t.oxw().export()}),t._UZ(2,"mat-icon",20),t._uU(3," Export "),t.qZA(),t.qZA()}}function Je(e,n){1&e&&(t.TgZ(0,"div",21),t._UZ(1,"mat-progress-spinner",22),t.qZA())}function Re(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Product/Substance Name"),t.qZA())}function Fe(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.Oqu(a.productSubstanceName)}}function ze(e,n){1&e&&t._uU(0," View ")}_(52489);var $e=function(n){return["/impurities",n,"edit"]};function Be(e,n){if(1&e&&(t.TgZ(0,"a",30),t._UZ(1,"mat-icon",31),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,$e,a.id))}}var je=function(n){return["/impurities",n]};function He(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",26),t.YNc(2,Fe,2,1,"div",27),t.YNc(3,ze,1,0,"ng-template",null,28,t.W1O),t.qZA(),t._uU(5," \xa0\xa0 "),t.YNc(6,Be,2,3,"a",29),t.qZA()),2&e){var a=t.MAs(4),o=t.oxw().$implicit,c=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(4,je,o.id)),t.xp6(1),t.Q6J("ngIf",o.productSubstanceName)("ngIfElse",a),t.xp6(4),t.Q6J("ngIf",c.isAdmin)}}function Ge(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,He,7,6,"div",25),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.id)}}function We(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source Type"),t.qZA())}function Ke(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sourceType," ")}}function Xe(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source "),t.qZA())}function Ve(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.source," ")}}function tn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Source ID"),t.qZA())}function en(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.sourceId," ")}}function nn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Type "),t.qZA())}function an(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.type," ")}}function on(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Spec Type "),t.qZA())}function sn(e,n){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.specType," ")}}function rn(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Parent Substance "),t.qZA())}var cn=function(n){return["/substances",n]};function un(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"a",26),t.TgZ(2,"span",33),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,cn,a._parentSubstanceUuid)),t.xp6(2),t.Oqu(a._parentSubstanceName)}}function pn(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,un,4,4,"div",32),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.impuritiesSubstanceList)}}function ln(e,n){1&e&&(t.TgZ(0,"th",23),t._uU(1," Impurities Related Substance"),t.qZA())}function dn(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.hij("\xa0\xa0\xa0\xa0",a.limitType,"\xa0")}}function mn(e,n){if(1&e&&(t.TgZ(0,"span",38),t._UZ(1,"br"),t._uU(2),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(2),t.hij("\xa0\xa0\xa0\xa0",a.impurityType," ")}}function _n(e,n){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"span",36),t.YNc(2,dn,2,1,"span",25),t._uU(3),t.qZA(),t.YNc(4,mn,3,1,"span",37),t.qZA()),2&e){var a=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",a.limitType),t.xp6(1),t.AsE(" ",a.limitValue,"\xa0",a.unit," "),t.xp6(1),t.Q6J("ngIf",a.impurityType)}}function vn(e,n){if(1&e&&(t.TgZ(0,"div",35),t.YNc(1,_n,5,4,"div",25),t.qZA()),2&e){var a=n.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",a.relatedSubstanceUuid===o.substanceUuid)}}function fn(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,vn,2,1,"div",34),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.impuritiesDetailsList)}}function gn(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,fn,2,1,"div",32),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.impuritiesTestList)}}function bn(e,n){if(1&e&&(t.TgZ(0,"td",24),t.YNc(1,gn,2,1,"div",32),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.impuritiesSubstanceList)}}function hn(e,n){1&e&&t._UZ(0,"tr",39)}function Cn(e,n){1&e&&t._UZ(0,"tr",40)}var xn=function(){return[5,10,25,100]},Sn=function(){var e=function(n){(0,C.Z)(o,n);var a=(0,x.Z)(o);function o(c,i,s,p,d,m,u){var r;return(0,b.Z)(this,o),(r=a.call(this,i,s)).router=c,r.gaService=i,r.impuritiesService=s,r.generalService=p,r.authService=d,r.loadingService=m,r.dialog=u,r.countImpuritiesOut=new t.vpe,r.subscriptions=[],r.showSpinner=!1,r.totalImpurities=0,r.impuritiesCount=0,r.impuritiesTestTotal=0,r.pageIndex=0,r.pageSize=5,r.privateExport=!1,r.disableExport=!1,r.etag="",r.displayedColumns=["productName","sourceType","source","sourceid","type","specType","parentSubstance","relatedSubstance"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var i=this,s=this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").subscribe(function(p){i.isAdmin=p});this.subscriptions.push(s),this.substanceUuid&&(this.getImpuritiesBySubstanceUuid(),this.impuritiesListExportUrl())}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(i){i&&i.unsubscribe()})}},{key:"searchImpurities",value:function(){var i=this;this.privateSearchTerm=this.substanceUuid;var p=this.impuritiesService.searchImpurities(this.pageIndex*this.pageSize,this.pageSize,this.privateSearchTerm,this.privateFacetParams).subscribe(function(d){i.setResultData(d.content),i.impurities=d.content,i.impuritiesCount=d.total,i.countImpuritiesOut.emit(i.impuritiesCount),i.etag=d.etag},function(d){},function(){p.unsubscribe()})}},{key:"getImpuritiesBySubstanceUuid",value:function(i){var s=this;this.setPageEvent(i),this.showSpinner=!0,this.impuritiesService.getImpuritiesBySubstanceUuid(this.substanceUuid).subscribe(function(p){s.impuritiesService.totalRecords=p.total,s.impurities=p.content,s.loadImpuritiesTestDetails(),s.setResultData(s.impurities),s.totalImpurities=p.total,s.etag=p.etag,s.countImpuritiesOut.emit(s.totalImpurities)}),this.showSpinner=!1}},{key:"loadImpuritiesTestDetails",value:function(){var i=this;this.impurities.forEach(function(s,p){s.impuritiesSubstanceList.forEach(function(d,m){d.substanceUuid&&d.substanceUuid===i.substanceUuid&&(d._parentSubstanceName=i.substanceName,d._parentSubstanceUuid=d.substanceUuid),d.impuritiesTestList.forEach(function(u,r){u.impuritiesDetailsList.forEach(function(h,O){if(null!=h.relatedSubstanceUuid&&h.relatedSubstanceUuid===i.substanceUuid){var Ca=i.generalService.getSubstanceNamesBySubstanceUuid(d.substanceUuid).subscribe(function(xa){xa.forEach(function(J,ya){!0===J.displayName&&(d._parentSubstanceName=J.name,d._parentSubstanceUuid=d.substanceUuid)})});i.subscriptions.push(Ca)}})})})})}},{key:"getSubstanceNames",value:function(i){var s;if(i){var p=this.generalService.getSubstanceNamesBySubstanceUuid(i).subscribe(function(d){d.forEach(function(u,r){!0===u.displayName&&(s=u.name)})});return this.subscriptions.push(p),s}}},{key:"export",value:function(){var i=this;if(this.etag){var s="xlsx",p=this.getApiExportUrl(this.etag,s);""!==this.authService.getUser()&&this.dialog.open(P.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceImpurities"}}).afterClosed().subscribe(function(m){m&&""!==m&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,m+"."+s).subscribe(function(r){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",r.id])},function(r){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.impuritiesService.getApiExportUrl(i,s)}},{key:"impuritiesListExportUrl",value:function(){null!=this.substanceUuid&&(this.exportUrl=this.impuritiesService.getImpuritiesListExportUrl(this.substanceUuid))}}]),o}(E);return e.\u0275fac=function(a){return new(a||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(Le.q),t.Y36(L.m),t.Y36(U.e),t.Y36(N.b),t.Y36(D.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-impurities"]],inputs:{substanceUuid:"substanceUuid",substanceName:"substanceName"},outputs:{countImpuritiesOut:"countImpuritiesOut"},features:[t.qOj],decls:35,vars:9,consts:[[1,"padtop5px","padleft25px","font15px","colorblue"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","productName"],["mat-header-cell","","class","width100px",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sourceType"],["matColumnDef","source"],["matColumnDef","sourceid"],["matColumnDef","type"],["matColumnDef","specType"],["matColumnDef","parentSubstance"],["matColumnDef","relatedSubstance"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell","",1,"width100px"],["mat-cell",""],[4,"ngIf"],["target","_blank",3,"routerLink"],[4,"ngIf","ngIfElse"],["noProdName",""],["target","_blank","matTooltip","Edit Impurities Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit Impurities Record",3,"routerLink"],["svgIcon","edit"],[4,"ngFor","ngForOf"],[1,"colorblue"],["class","font12px",4,"ngFor","ngForOf"],[1,"font12px"],[1,"colorgreen"],["class","colorpurple",4,"ngIf"],[1,"colorpurple"],["mat-header-row",""],["mat-row",""]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"b"),t._uU(2,"Impurities Specs"),t.qZA(),t._uU(3," \xa0\xa0\xa0 "),t.YNc(4,Qe,4,0,"span",1),t.qZA(),t.TgZ(5,"div",2),t.YNc(6,Je,2,0,"div",3),t.TgZ(7,"table",4),t.ynx(8,5),t.YNc(9,Re,2,0,"th",6),t.YNc(10,Ge,2,1,"td",7),t.BQk(),t.ynx(11,8),t.YNc(12,We,2,0,"th",6),t.YNc(13,Ke,2,1,"td",7),t.BQk(),t.ynx(14,9),t.YNc(15,Xe,2,0,"th",6),t.YNc(16,Ve,2,1,"td",7),t.BQk(),t.ynx(17,10),t.YNc(18,tn,2,0,"th",6),t.YNc(19,en,2,1,"td",7),t.BQk(),t.ynx(20,11),t.YNc(21,nn,2,0,"th",6),t.YNc(22,an,2,1,"td",7),t.BQk(),t.ynx(23,12),t.YNc(24,on,2,0,"th",6),t.YNc(25,sn,2,1,"td",7),t.BQk(),t.ynx(26,13),t.YNc(27,rn,2,0,"th",6),t.YNc(28,pn,2,1,"td",7),t.BQk(),t.ynx(29,14),t.YNc(30,ln,2,0,"th",6),t.YNc(31,bn,2,1,"td",7),t.BQk(),t.YNc(32,hn,1,0,"tr",15),t.YNc(33,Cn,1,0,"tr",16),t.qZA(),t.qZA(),t.TgZ(34,"mat-paginator",17),t.NdJ("page",function(i){return o.getImpuritiesBySubstanceUuid(i)}),t.qZA()),2&a&&(t.xp6(4),t.Q6J("ngIf",o.isAdmin),t.xp6(2),t.Q6J("ngIf",o.showSpinner),t.xp6(1),t.Q6J("dataSource",o.paged),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("length",o.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(8,xn)))},directives:[v.O5,S.lW,A.Hw,T.Ou,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,f.yS,v.sg,l.as,l.XQ,l.nj,l.Gk,Z.NW],styles:['@charset "UTF-8";.mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.bordergray[_ngcontent-%COMP%]{border:1px solid gray}.font10px[_ngcontent-%COMP%]{font-size:10px}.font12px[_ngcontent-%COMP%]{font-size:12px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:gray}.colorred[_ngcontent-%COMP%]{color:red}.colorgreen[_ngcontent-%COMP%]{color:green}.colorpurple[_ngcontent-%COMP%]{color:purple}.colorblue[_ngcontent-%COMP%]{color:#3828c9}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.marginbottom10px[_ngcontent-%COMP%]{margin-bottom:10px}.width100px[_ngcontent-%COMP%]{width:100px}ol[_ngcontent-%COMP%], li[_ngcontent-%COMP%]{margin-left:0;padding-left:0}\\200b[_ngcontent-%COMP%]   .spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}']}),e}();function An(e,n){if(1&e&&t._UZ(0,"a",5),2&e){var a=t.oxw();t.Q6J("href",a.baseDomain+"/ginas/app/substance/"+a.substance.uuid+"#fdadetails",t.LSH)}}function Tn(e,n){1&e&&(t.TgZ(0,"div"),t._UZ(1,"br"),t.TgZ(2,"div",9),t.TgZ(3,"b"),t._uU(4,"No Product Found"),t.qZA(),t.qZA(),t._UZ(5,"br"),t.qZA())}function Zn(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"span",29),t.TgZ(1,"button",30),t.NdJ("click",function(){return t.CHM(a),t.oxw(3).export()}),t._UZ(2,"mat-icon",31),t._uU(3," Export All Products "),t.qZA(),t.qZA()}}function yn(e,n){1&e&&(t.TgZ(0,"div",32),t._UZ(1,"mat-progress-spinner",33),t.qZA())}function En(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product ID "),t.qZA())}function Un(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",a.productNDC," ")}}function Pn(e,n){1&e&&t._uU(0," (NO NDC) ")}var Nn=function(n){return["/product",n,"edit"]};function Dn(e,n){if(1&e&&(t.TgZ(0,"a",40),t._UZ(1,"mat-icon",41),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.Q6J("routerLink",t.VKq(1,Nn,a.productId))}}var On=function(n){return["/product",n]};function qn(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",36),t.YNc(2,Un,2,1,"span",37),t.YNc(3,Pn,1,0,"ng-template",null,38,t.W1O),t.qZA(),t._uU(5," \xa0\xa0 "),t.YNc(6,Dn,2,3,"a",39),t.qZA()),2&e){var a=t.MAs(4),o=t.oxw().$implicit,c=t.oxw(3);t.xp6(1),t.Q6J("routerLink",t.VKq(4,On,o.productId)),t.xp6(1),t.Q6J("ngIf",o.productNDC)("ngIfElse",a),t.xp6(4),t.Q6J("ngIf",c.isAdmin)}}function wn(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",a.productNDC," ")}}function Yn(e,n){1&e&&t._uU(0," (NO NDC) ")}var In=function(n){return["/product-elist",n]};function kn(e,n){if(1&e&&(t.TgZ(0,"span"),t.TgZ(1,"a",36),t.YNc(2,wn,2,1,"span",37),t.YNc(3,Yn,1,0,"ng-template",null,42,t.W1O),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"span",43),t._uU(7),t.qZA(),t.qZA()),2&e){var a=t.MAs(4),o=t.oxw().$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(4,In,o.productId)),t.xp6(1),t.Q6J("ngIf",o.productNDC)("ngIfElse",a),t.xp6(5),t.hij("(",o.fromtable,")")}}function Mn(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,qn,7,6,"span",4),t.YNc(2,kn,8,6,"span",4),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf","GSRS"===a.fromtable),t.xp6(1),t.Q6J("ngIf","GSRS"!=a.fromtable)}}function Ln(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product Name "),t.qZA())}function Qn(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.productName," ")}}function Jn(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,Qn,2,1,"div",44),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.productNameAllList)}}function Rn(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Labeler Name "),t.qZA())}function Fn(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.labelerName," ")}}function zn(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.YNc(2,Fn,2,1,"div",44),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.labelerName," "),t.xp6(1),t.Q6J("ngForOf",a.productCompanyAllList)}}function $n(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Country "),t.qZA())}function Bn(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.countryWithoutCode," ")}}function jn(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,Bn,2,1,"div",44),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.productCompanyAllList)}}function Hn(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Status "),t.qZA())}function Gn(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.status," ")}}function Wn(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Product Type "),t.qZA())}function Kn(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.productType," ")}}function Xn(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Ingredient Type "),t.qZA())}function Vn(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var a=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",a.ingredientType," ")}}function ta(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Vn,2,1,"div",4),t.qZA()),2&e){var a=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",o.substance.uuid===a.substanceUuid)}}function ea(e,n){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,ta,2,1,"div",4),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngIf",a.substanceUuid)}}function na(e,n){if(1&e&&(t.TgZ(0,"td",35),t.YNc(1,ea,2,1,"div",44),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.Q6J("ngForOf",a.productIngredientAllList)}}function aa(e,n){1&e&&(t.TgZ(0,"th",34),t._uU(1," Application Number "),t.qZA())}function ia(e,n){if(1&e&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&e){var a=n.$implicit;t.xp6(1),t.hij(" ",a.appTypeNumber," ")}}function oa(e,n){1&e&&t._UZ(0,"tr",45)}function sa(e,n){1&e&&t._UZ(0,"tr",46)}var ra=function(){return[5,10,25,100]};function ca(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"div",10),t.TgZ(2,"b"),t._uU(3),t.qZA(),t._uU(4," \xa0\xa0\xa0 "),t.TgZ(5,"span",11),t._uU(6),t.qZA(),t._uU(7," \xa0\xa0\xa0 "),t.YNc(8,Zn,4,0,"span",12),t.qZA(),t.TgZ(9,"div",13),t.YNc(10,yn,2,0,"div",14),t.TgZ(11,"table",15),t.ynx(12,16),t.YNc(13,En,2,0,"th",17),t.YNc(14,Mn,3,2,"td",18),t.BQk(),t.ynx(15,19),t.YNc(16,Ln,2,0,"th",17),t.YNc(17,Jn,2,1,"td",18),t.BQk(),t.ynx(18,20),t.YNc(19,Rn,2,0,"th",17),t.YNc(20,zn,3,2,"td",18),t.BQk(),t.ynx(21,21),t.YNc(22,$n,2,0,"th",17),t.YNc(23,jn,2,1,"td",18),t.BQk(),t.ynx(24,22),t.YNc(25,Hn,2,0,"th",17),t.YNc(26,Gn,2,1,"td",18),t.BQk(),t.ynx(27,23),t.YNc(28,Wn,2,0,"th",17),t.YNc(29,Kn,2,1,"td",18),t.BQk(),t.ynx(30,24),t.YNc(31,Xn,2,0,"th",17),t.YNc(32,na,2,1,"td",18),t.BQk(),t.ynx(33,25),t.YNc(34,aa,2,0,"th",17),t.YNc(35,ia,2,1,"td",18),t.BQk(),t.YNc(36,oa,1,0,"tr",26),t.YNc(37,sa,1,0,"tr",27),t.qZA(),t.qZA(),t.TgZ(38,"mat-paginator",28),t.NdJ("page",function(s){return t.CHM(a),t.oxw(2).getSubstanceProducts(s)}),t.qZA(),t.qZA()}if(2&e){var o=n.$implicit,c=t.oxw(2);t.s9C("label",o),t.xp6(3),t.hij(" ",o,""),t.xp6(3),t.Oqu(c.loadingStatus),t.xp6(2),t.Q6J("ngIf",c.isAdmin),t.xp6(2),t.Q6J("ngIf",c.showSpinner),t.xp6(1),t.Q6J("dataSource",c.paged),t.xp6(25),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(1),t.Q6J("length",c.totalRecords)("pageSize",5)("pageSizeOptions",t.DdM(11,ra))}}function ua(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.YNc(1,Tn,6,0,"div",4),t.TgZ(2,"mat-tab-group",7),t.NdJ("selectedTabChange",function(i){return t.CHM(a),t.oxw().tabSelected(i)}),t.YNc(3,ca,39,12,"mat-tab",8),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Product (",o.productCount,")"),t.xp6(1),t.Q6J("ngIf",!0===o.loadingComplete&&!1===o.foundProvenanceList&&0===o.productCount),t.xp6(2),t.Q6J("ngForOf",o.provenanceList)}}function pa(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-application",47),t.NdJ("countApplicationOut",function(i){return t.CHM(a),t.oxw().getApplicationCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Application (",o.applicationCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function la(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-tab",6),t.TgZ(2,"app-substance-clinical-trials",48),t.NdJ("countClinicalTrialOut",function(i){return t.CHM(a),t.oxw().getClinicalTrialCount(i)}),t.qZA(),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.xp6(1),t.MGl("label","Clinical Trial (",o.clinicalTrialCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceUuid",o.substance.uuid)}}function da(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventpt",49),t.NdJ("countAdvPtOut",function(i){return t.CHM(a),t.oxw().getAdvPtCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event PT (",o.advPtCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)("substanceName",o.substanceName)}}function ma(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventdme",50),t.NdJ("countAdvDmeOut",function(i){return t.CHM(a),t.oxw().getAdvDmeCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event DME (",o.advDmeCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function _a(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-adverseeventcvm",51),t.NdJ("countAdvCvmOut",function(i){return t.CHM(a),t.oxw().getAdvCvmCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Adverse Event CVM (",o.advCvmCount,")"),t.xp6(1),t.Q6J("bdnum",o.bdnum)}}function va(e,n){if(1&e){var a=t.EpF();t.TgZ(0,"mat-tab",6),t.TgZ(1,"app-substance-impurities",52),t.NdJ("countImpuritiesOut",function(i){return t.CHM(a),t.oxw().getImpuritiesCount(i)}),t.qZA(),t.qZA()}if(2&e){var o=t.oxw();t.MGl("label","Impurities Specs (",o.impuritiesCount,")"),t.xp6(1),t.Q6J("substanceUuid",o.substance.uuid)("substanceName",o.substanceName)}}var fa=function(){var e=function(n){(0,C.Z)(o,n);var a=(0,x.Z)(o);function o(c,i,s,p,d,m,u){var r;return(0,b.Z)(this,o),(r=a.call(this,i,s)).router=c,r.gaService=i,r.productService=s,r.configService=p,r.authService=d,r.loadingService=m,r.dialog=u,r.productCount=0,r.applicationCount=0,r.clinicalTrialCount=0,r.clinicalTrialEuCount=0,r.advPtCount=0,r.advDmeCount=0,r.advCvmCount=0,r.impuritiesCount=0,r.provenance="",r.provenanceList="",r.datasourceList="",r.loadingStatus="",r.showSpinner=!1,r.foundProvenanceList=!1,r.loadingComplete=!1,r.substanceName="",r.privateExport=!1,r.disableExport=!1,r.etag="",r.etagAllExport="",r.displayedColumns=["productId","productName","labelerName","country","status","productNameType","ingredientType","applicationNumber"],r}return(0,g.Z)(o,[{key:"ngOnInit",value:function(){var i=this;this.loadedComponents=this.configService.configData.loadedComponents||null,this.authService.hasAnyRolesAsync("Admin","Updater","SuperUpdater").pipe((0,Y.q)(1)).subscribe(function(s){i.isAdmin=s}),this.substance&&this.substance.uuid&&(this.getSubstanceKey(),this.getProductProvenanceList(),this.privateSearch='root_productIngredientAllList_substanceUuid:"'+this.substance.uuid+'"',this.getSubstanceProducts(null,"initial")),this.baseDomain=this.configService.configData.apiUrlDomain}},{key:"ngAfterViewInit",value:function(){}},{key:"getApplicationCount",value:function(i){this.applicationCount=i}},{key:"getClinicalTrialCount",value:function(i){this.clinicalTrialCount=i}},{key:"getClinicalTrialEuCount",value:function(i){this.clinicalTrialEuCount=i}},{key:"getAdvPtCount",value:function(i){this.advPtCount=i}},{key:"getAdvDmeCount",value:function(i){this.advDmeCount=i}},{key:"getAdvCvmCount",value:function(i){this.advCvmCount=i}},{key:"getImpuritiesCount",value:function(i){this.impuritiesCount=i}},{key:"getSubstanceKey",value:function(){var i=this;this.substance&&(this.substanceName=this.substance._name,this.substance.codes.length>0&&this.substance.codes.forEach(function(s){s.codeSystem&&"BDNUM"===s.codeSystem&&s.type&&"PRIMARY"===s.type&&(i.bdnum=s.code)}))}},{key:"getProductProvenanceList",value:function(){var i=this;this.productService.getProductProvenanceList(this.substance.uuid).subscribe(function(s){i.provenanceList=s,i.provenanceList&&i.provenanceList.length>0&&(i.foundProvenanceList=!0),i.loadingComplete=!0})}},{key:"getSubstanceProducts",value:function(i,s){var p=this;this.setPageEvent(i),this.showSpinner=!0;var m=this.productService.getProducts("default",this.page*this.pageSize,this.pageSize,this.privateSearch,this.privateFacetParams).subscribe(function(u){s&&"initial"===s?p.etagAllExport=u.etag:(p.productService.totalRecords=u.total,p.setResultData(u.content),p.productCount=u.total,p.etag=u.etag)},function(u){console.log("error")},function(){m.unsubscribe()});this.loadingStatus="",this.showSpinner=!1}},{key:"export",value:function(){var i=this;if(this.etagAllExport){var s="xlsx",p=this.getApiExportUrl(this.etagAllExport,s);""!==this.authService.getUser()&&this.dialog.open(P.L,{height:"215x",width:"550px",data:{extension:s,type:"substanceProduct"}}).afterClosed().subscribe(function(m){m&&""!==m&&(i.loadingService.setLoading(!0),i.authService.startUserDownload(p,i.privateExport,m+"."+s).subscribe(function(r){i.loadingService.setLoading(!1),i.router.navigate(["/user-downloads/",r.id])},function(r){return i.loadingService.setLoading(!1)}))})}}},{key:"getApiExportUrl",value:function(i,s){return this.productService.getApiExportUrl(i,s)}},{key:"productListExportUrl",value:function(){this.substance&&this.substance.uuid&&(this.exportUrl=this.productService.getProductListExportUrl(this.substance.uuid))}},{key:"tabSelected",value:function(i){if(i){var p=i.tab.textLabel;null!=p&&(this.loadingStatus="Loading data...",this.provenance=p,this.paged=[],this.privateSearch='root_productIngredientAllList_substanceUuid:"'+this.substance.uuid+'" AND root_provenance:'+this.provenance,this.getSubstanceProducts())}}}]),o}(E);return e.\u0275fac=function(a){return new(a||e)(t.Y36(f.F0),t.Y36(y.$),t.Y36(F.M),t.Y36(w.E),t.Y36(U.e),t.Y36(N.b),t.Y36(D.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-substance-products"]],features:[t.qOj],decls:11,vars:8,consts:[[1,"info-container"],["target","_blank",3,"href",4,"ngIf"],[1,"bordergray","mat-tab-style"],[3,"label",4,"ngIf"],[4,"ngIf"],["target","_blank",3,"href"],[3,"label"],[3,"selectedTabChange"],[3,"label",4,"ngFor","ngForOf"],[1,"padleft25px","colorblue"],[1,"padtop5px","padleft25px","font15px","colorblue"],[1,"colorred"],["class","export",4,"ngIf"],[1,"responsive","mat-table-style"],["class","spinnerstyle",4,"ngIf"],["mat-table","",1,"font12px",3,"dataSource"],["matColumnDef","productId"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","productName"],["matColumnDef","labelerName"],["matColumnDef","country"],["matColumnDef","status"],["matColumnDef","productNameType"],["matColumnDef","ingredientType"],["matColumnDef","applicationNumber"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],[1,"export"],["matTooltip","Export Search Results","mat-button","",1,"mat-button","export-button","mat-raised-button",3,"click"],["svgIcon","get_app"],[1,"spinnerstyle"],["diameter","80","color","warn","mode","indeterminate"],["mat-header-cell",""],["mat-cell",""],["target","_blank",3,"routerLink"],[4,"ngIf","ngIfElse"],["noProdNDCGSRS",""],["target","_blank","matTooltip","Edit GSRS Product Record",3,"routerLink",4,"ngIf"],["target","_blank","matTooltip","Edit GSRS Product Record",3,"routerLink"],["svgIcon","edit"],["noProdNDC",""],[1,"font10px","colorgray"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row",""],[3,"bdnum","countApplicationOut"],[3,"bdnum","substanceUuid","countClinicalTrialOut"],[3,"bdnum","substanceName","countAdvPtOut"],[3,"bdnum","countAdvDmeOut"],[3,"bdnum","countAdvCvmOut"],[3,"substanceUuid","substanceName","countImpuritiesOut"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0),t.YNc(1,An,1,1,"a",1),t.qZA(),t.TgZ(2,"div",2),t.TgZ(3,"mat-tab-group"),t.YNc(4,ua,4,3,"mat-tab",3),t.YNc(5,pa,2,2,"mat-tab",3),t.YNc(6,la,3,3,"div",4),t.YNc(7,da,2,3,"mat-tab",3),t.YNc(8,ma,2,2,"mat-tab",3),t.YNc(9,_a,2,2,"mat-tab",3),t.YNc(10,va,2,3,"mat-tab",3),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngIf",o.substance&&o.substance.uuid),t.xp6(3),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.products),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.applications),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.clinicaltrials),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.adverseevents),t.xp6(1),t.Q6J("ngIf",o.loadedComponents&&o.loadedComponents.impurities))},directives:[v.O5,q.SP,q.uX,v.sg,S.lW,A.Hw,T.Ou,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,f.yS,l.as,l.XQ,l.nj,l.Gk,Z.NW,ht,Mt,se,Te,Me,Sn],styles:[".mat-table-style[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{vertical-align:top;font-size:12px}.mat-tab-style[_ngcontent-%COMP%]   .mat-tab-labels[_ngcontent-%COMP%], .mat-tab-style[_ngcontent-%COMP%]   .mat-tab-label[_ngcontent-%COMP%], .mat-tab-style[_ngcontent-%COMP%]   .mat-tab-link[_ngcontent-%COMP%]{color:#00f}.bordergray[_ngcontent-%COMP%]{border:1px solid gray}.font10px[_ngcontent-%COMP%]{font-size:10px}.font15px[_ngcontent-%COMP%]{font-size:15px}.colorgray[_ngcontent-%COMP%]{color:gray}.padleft15px[_ngcontent-%COMP%]{padding-left:15px}.padleft25px[_ngcontent-%COMP%]{padding-left:25px}.padtop5px[_ngcontent-%COMP%]{padding-top:5px}.colorblue[_ngcontent-%COMP%]{color:#4b4572}.colorred[_ngcontent-%COMP%]{color:red}.info-container[_ngcontent-%COMP%]{margin-bottom:15px}.info-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00f;text-decoration:none}.spinnerstyle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(150,148,148,.15);z-index:1;display:-ms-flexbox;display:flex;-ms-flex-align:top;align-items:top;-ms-flex-pack:center;justify-content:center}"]}),e}(),ga=_(33865),ba=_(43365),Q=_(90587),ha=(_(64061),function(){var e=(0,g.Z)(function n(){(0,b.Z)(this,n)});return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.ez,R.o0.forChild(fa),l.p0,ga.HT,Z.TU,k.JX,ba.c,q.Nh,S.ot,A.Ps,T.Cq,Q.UX,Q.u5,f.Bz]]}),e}())}}]);
//# sourceMappingURL=1896.89cc596c2f766bc5.js.map