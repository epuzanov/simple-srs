"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[328],{70328:function(ae,x,a){a.r(x),a.d(x,{SubstanceFormCodesModule:function(){return ie}});var u=a(48047),g=a(78069),p=a(36362),F=a(24582),M=a(7318),O=a(79550),A=a(33567),J=a(24874),I=a(66452),e=a(76442),w=a(78444),f=a(44770),v=a(43365),l=a(90587),C=a(87317),h=a(40089),Z=a(26439),P=a(51279),N=a(42827),E=a(52149),_=a(65590),Q=a(16667),U=a(84577),D=a(48302),k=a(14900);function Y(o,c){if(1&o){var n=e.EpF();e.TgZ(0,"div",18),e._uU(1," Deleted\xa0 "),e.TgZ(2,"button",19),e.NdJ("click",function(){return e.CHM(n),e.oxw().undoDelete()}),e._UZ(3,"mat-icon",20),e.qZA(),e.qZA()}}function z(o,c){if(1&o&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e._uU(2," Code System Type "),e.qZA(),e.TgZ(3,"div",23),e._uU(4),e.qZA(),e.qZA()),2&o){var n=e.oxw();e.xp6(4),e.hij(" ",n.codeSystemType," ")}}function q(o,c){1&o&&e._UZ(0,"mat-icon",24)}function H(o,c){1&o&&e._UZ(0,"mat-icon",25)}function L(o,c){if(1&o){var n=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",2),e.TgZ(2,"mat-form-field",26),e.TgZ(3,"input",27),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().trimWhitespace(i)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",28),e.TgZ(6,"div",29),e._uU(7,"Code text"),e.qZA(),e.TgZ(8,"textarea",30),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().code.comments=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"div",28),e.TgZ(11,"div",29),e._uU(12,"Comments"),e.qZA(),e.TgZ(13,"textarea",31),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().code.codeText=i}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",2),e.TgZ(15,"div",32),e._UZ(16,"app-domain-references",33,34),e.qZA(),e.qZA(),e.qZA()}if(2&o){var t=e.oxw();e.xp6(3),e.Q6J("ngModel",t.code.url),e.xp6(5),e.Q6J("ngModel",t.code.comments),e.xp6(5),e.Q6J("ngModel",t.code.codeText),e.xp6(3),e.Q6J("referencesUuids",t.code.references)}}function $(o,c){if(1&o&&e._UZ(0,"app-audit-info",35),2&o){var n=e.oxw();e.Q6J("source",n.code)}}var j=function(){var o=function(){function c(n,t){(0,g.Z)(this,c),this.cvService=n,this.utilsService=t,this.codeDeleted=new e.vpe,this.codeSystemList=[],this.codeTypeList=[],this.viewFull=!0}return(0,u.Z)(c,[{key:"ngOnInit",value:function(){this.getVocabularies()}},{key:"code",get:function(){return this.privateCode},set:function(t){this.privateCode=t}},{key:"show",get:function(){return this.viewFull||null},set:function(t){null!=t&&(this.viewFull=t)}},{key:"getVocabularies",value:function(){var t=this;this.cvService.getDomainVocabulary("CODE_SYSTEM","CODE_TYPE").subscribe(function(d){t.codeSystemList=d.CODE_SYSTEM.list,t.codeSystemDictionary=d.CODE_SYSTEM.dictionary,t.setCodeSystemType(),t.codeTypeList=d.CODE_TYPE.list})}},{key:"deleteCode",value:function(){var t=this;this.privateCode.$$deletedCode=this.utilsService.newUUID(),!this.privateCode.codeSystem&&!this.privateCode.type&&!this.privateCode.code&&(this.deleteTimer=setTimeout(function(){t.codeDeleted.emit(t.privateCode)},2e3))}},{key:"trimWhitespace",value:function(t){this.code.url=t,this.privateCode.url=this.privateCode.url.replace(/[\u200A|\u2009|\u2006|\u2008]/g," ").trim(),this.privateCode.url=t.trim().trim().trim()}},{key:"undoDelete",value:function(){clearTimeout(this.deleteTimer),delete this.privateCode.$$deletedCode}},{key:"setCodeSystemType",value:function(t){t&&(this.code.codeSystem=t),null!=this.privateCode&&null!=this.codeSystemDictionary&&(this.codeSystemType=this.codeSystemDictionary[this.privateCode.codeSystem]&&this.codeSystemDictionary[this.privateCode.codeSystem].systemCategory||"")}},{key:"updateAccess",value:function(t){this.code.access=t}}]),c}();return o.\u0275fac=function(n){return new(n||o)(e.Y36(N.I),e.Y36(E.F))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-code-form"]],inputs:{code:"code",show:"show"},outputs:{codeDeleted:"codeDeleted"},decls:19,vars:11,consts:[[1,"code-form-container",3,"ngClass"],["class","notification-backdrop",4,"ngIf"],[1,"form-row"],[1,"delete-container"],["mat-icon-button","","matTooltip","Delete code",3,"click"],["svgIcon","delete_forever"],["required","true","key","Code System","title","Code System","name","code",1,"code-system",3,"model","valueChange"],["class","key-value-pair code-system-type",4,"ngIf"],["domain","CODE_TYPE","title","Type","name","type",1,"type",3,"model","valueChange"],[1,"code"],["matInput","","placeholder","Code","required","","name","code",3,"ngModel","ngModelChange"],[3,"access","accessOut"],[1,"chevron"],["mat-icon-button","","matTooltip","Expand / collapse rows",1,"chevron-button",3,"click"],["svgIcon","chevron_up",4,"ngIf"],["svgIcon","chevron_down",4,"ngIf"],[4,"ngIf"],[3,"source",4,"ngIf"],[1,"notification-backdrop"],["mat-icon-button","","matTooltip","Undo",3,"click"],["svgIcon","undo"],[1,"key-value-pair","code-system-type"],[1,"key"],[1,"value"],["svgIcon","chevron_up"],["svgIcon","chevron_down"],[1,"url"],["matInput","","placeholder","Url","name","url",3,"ngModel","ngModelChange"],[1,"code-text"],[1,"textarea-label"],["placeholder","Enter text here","name","comments",3,"ngModel","ngModelChange"],["placeholder","Enter text here","name","codeText",3,"ngModel","ngModelChange"],[1,"references-container"],[3,"referencesUuids"],["references",""],[3,"source"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Y,4,0,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return t.deleteCode()}),e._UZ(5,"mat-icon",5),e.qZA(),e.qZA(),e.TgZ(6,"app-cv-input",6),e.NdJ("valueChange",function(i){return t.setCodeSystemType(i)}),e.qZA(),e.YNc(7,z,5,1,"div",7),e.TgZ(8,"app-cv-input",8),e.NdJ("valueChange",function(i){return t.code.type=i}),e.qZA(),e.TgZ(9,"mat-form-field",9),e.TgZ(10,"input",10),e.NdJ("ngModelChange",function(i){return t.code.code=i}),e.qZA(),e.qZA(),e.TgZ(11,"div"),e.TgZ(12,"app-access-manager",11),e.NdJ("accessOut",function(i){return t.updateAccess(i)}),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"button",13),e.NdJ("click",function(){return t.viewFull=!t.viewFull}),e.YNc(15,q,1,0,"mat-icon",14),e.YNc(16,H,1,0,"mat-icon",15),e.qZA(),e.qZA(),e.qZA(),e.YNc(17,L,18,4,"div",16),e.YNc(18,$,1,1,"app-audit-info",17),e.qZA()),2&n&&(e.Q6J("ngClass",t.viewFull?"code-form-container":"collapse"),e.xp6(1),e.Q6J("ngIf",t.code.$$deletedCode),e.xp6(5),e.Q6J("model",t.code.codeSystem),e.xp6(1),e.Q6J("ngIf",t.code.codeSystem),e.xp6(1),e.Q6J("model",t.code.type),e.xp6(2),e.Q6J("ngModel",t.code.code),e.xp6(2),e.Q6J("access",t.code.access),e.xp6(3),e.Q6J("ngIf",t.viewFull),e.xp6(1),e.Q6J("ngIf",!t.viewFull),e.xp6(1),e.Q6J("ngIf",!t.code.$$deletedCode&&t.viewFull),e.xp6(1),e.Q6J("ngIf",t.viewFull))},directives:[p.mk,p.O5,C.lW,h.gM,_.Hw,Q.S,f.KE,v.Nt,l.Fj,l.Q7,l.JJ,l.On,U.h,D.V,k.n],styles:[".code-form-container[_ngcontent-%COMP%]{padding:30px 10px 12px;position:relative}.collapse[_ngcontent-%COMP%]{padding:20px 10px 12px;position:relative}.resolve[_ngcontent-%COMP%]{padding:0 20px 20px 0;color:#4793d1}.chevron[_ngcontent-%COMP%]{width:20px;line-height:67px;color:#0009}.chevron-button[_ngcontent-%COMP%]{width:20px}.notification-backdrop[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;display:-ms-flexbox;display:flex;z-index:10;background-color:#fffc;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:30px;font-weight:700;color:#666}.form-row[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:end;align-items:flex-end}.form-row[_ngcontent-%COMP%]   .delete-container[_ngcontent-%COMP%]{padding:0 10px 8px 0}.form-row[_ngcontent-%COMP%]   .code-system[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .code-system-type[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1;padding-right:15px}.form-row[_ngcontent-%COMP%]   .code-text[_ngcontent-%COMP%], .form-row[_ngcontent-%COMP%]   .url[_ngcontent-%COMP%]{-ms-flex-positive:1;flex-grow:1}.key-value-pair[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-item-align:start;align-self:flex-start}.key-value-pair[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{font-size:11px;padding-bottom:3.5px;line-height:11px;color:#0000008a;font-weight:400;font-family:Roboto,Helvetica Neue,sans-serif}.key-value-pair[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:15.5px}.references-container[_ngcontent-%COMP%]{width:100%}"]}),o}(),b=a(19975);function V(o,c){if(1&o&&(e.TgZ(0,"mat-form-field",7),e._UZ(1,"input",8),e.qZA()),2&o){var n=e.oxw();e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",n.searchControl)}}function W(o,c){if(1&o){var n=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(n),e.oxw().collapse()}),e._uU(1),e.qZA()}if(2&o){var t=e.oxw();e.xp6(1),e.hij("",t.expanded?"Collapse":"Expand"," All")}}var S=function(){return[5,10,25,100]};function B(o,c){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",10),e.NdJ("page",function(i){e.CHM(n);var r=e.oxw();return r.pageChange(i,r.analyticsEventCategory)}),e.qZA()}if(2&o){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",10)("pageSizeOptions",e.DdM(4,S))}}function X(o,c){1&o&&e._UZ(0,"mat-divider",14),2&o&&e.Q6J("inset",!0)}function K(o,c){if(1&o){var n=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"app-code-form",12),e.NdJ("codeDeleted",function(s){return e.CHM(n),e.oxw().deleteCode(s)}),e.qZA(),e.YNc(2,X,1,1,"mat-divider",13),e.qZA()}if(2&o){var t=c.$implicit,d=c.last,i=c.index,r=e.oxw();e.Q6J("id","substance-code-"+i),e.xp6(1),e.Q6J("code",t)("show",r.expanded),e.xp6(1),e.Q6J("ngIf",!d)}}function R(o,c){if(1&o){var n=e.EpF();e.TgZ(0,"mat-paginator",10),e.NdJ("page",function(i){e.CHM(n);var r=e.oxw();return r.pageChange(i,r.analyticsEventCategory)}),e.qZA()}if(2&o){var t=e.oxw();e.Q6J("length",t.filtered&&t.filtered.length||0)("pageIndex",t.page)("pageSize",10)("pageSizeOptions",e.DdM(4,S))}}function G(o,c){if(1&o){var n=e.EpF();e.TgZ(0,"div",15),e._UZ(1,"span",2),e.TgZ(2,"button",16),e.NdJ("click",function(){return e.CHM(n),e.oxw().addCode()}),e._uU(3," Add code "),e._UZ(4,"mat-icon",17),e.qZA(),e.qZA()}if(2&o){var t=e.oxw();e.xp6(2),e.Q6J("disabled",t.isAlternative)}}var ee=function(){var o=function(c){(0,F.Z)(t,c);var n=(0,M.Z)(t);function t(d,i,r,m){var s;return(0,g.Z)(this,t),(s=n.call(this,m)).substanceFormCodesService=d,s.substanceFormService=i,s.scrollToService=r,s.gaService=m,s.subscriptions=[],s.pageSize=10,s.expanded=!0,s.validate=!1,s.analyticsEventCategory="substance form codes",s}return(0,u.Z)(t,[{key:"ngOnInit",value:function(){this.menuLabelUpdate.emit("Codes")}},{key:"collapse",value:function(){this.expanded=!this.expanded}},{key:"ngAfterViewInit",value:function(){var i=this,r=this.substanceFormService.definition.subscribe(function(s){s.definitionType&&"ALTERNATIVE"===s.definitionType?i.hiddenStateUpdate.emit(!0):(i.canAddItemUpdate.emit(!0),i.hiddenStateUpdate.emit(!1))});this.subscriptions.push(r);var m=this.substanceFormCodesService.substanceCodes.subscribe(function(s){i.codes=s,i.filtered=s;var y=i.searchControl.valueChanges.subscribe(function(T){i.filterList(T,i.codes,i.analyticsEventCategory)},function(T){console.log(T)});i.subscriptions.push(y),i.page=0,i.pageChange()});this.subscriptions.push(m)}},{key:"ngOnDestroy",value:function(){this.componentDestroyed.emit(),this.subscriptions.forEach(function(i){i.unsubscribe()})}},{key:"addItem",value:function(){this.addCode()}},{key:"addCode",value:function(){var i=this;this.substanceFormCodesService.addSubstanceCode(),setTimeout(function(){i.scrollToService.scrollToElement("substance-code-0","center")})}},{key:"deleteCode",value:function(i){this.substanceFormCodesService.deleteSubstanceCode(i)}}]),t}(O.u);return o.\u0275fac=function(n){return new(n||o)(e.Y36(I.W),e.Y36(A.B),e.Y36(w.i),e.Y36(J.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-substance-form-codes-card"]],features:[e.qOj],decls:8,vars:6,consts:[[1,"flex-row"],["class","search",3,"floatLabel",4,"ngIf"],[1,"middle-fill"],["class","standardize","mat-button","","matTooltip","expand / collapse code view rows",3,"click",4,"ngIf"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","code","appScrollToTarget","",3,"id",4,"ngFor","ngForOf"],["style","display: flex;",4,"ngIf"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],["mat-button","","matTooltip","expand / collapse code view rows",1,"standardize",3,"click"],["showFirstLastButtons","true",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["appScrollToTarget","",1,"code",3,"id"],[3,"code","show","codeDeleted"],["class","form-divider",3,"inset",4,"ngIf"],[1,"form-divider",3,"inset"],[2,"display","flex"],["mat-button","",3,"disabled","click"],["svgIcon","add_circle_outline"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,V,2,2,"mat-form-field",1),e._UZ(2,"span",2),e.YNc(3,W,2,1,"button",3),e.qZA(),e.YNc(4,B,1,5,"mat-paginator",4),e.YNc(5,K,3,4,"div",5),e.YNc(6,R,1,5,"mat-paginator",4),e.YNc(7,G,5,1,"div",6)),2&n&&(e.xp6(1),e.Q6J("ngIf",t.codes&&t.codes.length>t.pageSize),e.xp6(2),e.Q6J("ngIf",t.codes&&t.codes.length>0),e.xp6(1),e.Q6J("ngIf",t.codes&&t.codes.length>5),e.xp6(1),e.Q6J("ngForOf",t.paged),e.xp6(1),e.Q6J("ngIf",t.codes&&t.codes.length>5),e.xp6(1),e.Q6J("ngIf",t.codes&&t.codes.length>0))},directives:[p.O5,f.KE,v.Nt,l.Fj,l.JJ,l.oH,C.lW,h.gM,Z.NW,p.sg,P.P,j,b.d,_.Hw],styles:[".mat-divider.mat-divider-inset[_ngcontent-%COMP%]{margin-left:0}.mat-divider[_ngcontent-%COMP%]{border-top-color:#00000080}.code[_ngcontent-%COMP%]:nth-child(odd){background-color:#448aff12}.code[_ngcontent-%COMP%]:nth-child(odd)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#448aff26}.code[_ngcontent-%COMP%]:nth-child(even)     .mat-expansion-panel:not(.mat-expanded):not([aria-disabled=true]) .mat-expansion-panel-header:hover{background-color:#80808026}.code[_ngcontent-%COMP%]     .mat-expansion-panel, .code[_ngcontent-%COMP%]     .mat-table, .code[_ngcontent-%COMP%]     textarea{background-color:transparent}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}"]}),o}(),te=a(64061),oe=a(7168),ne=a(94673),ie=function(){var o=(0,u.Z)(function c(){(0,g.Z)(this,c)});return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,te.o.forChild(ee),oe.O,b.t,_.Ps,C.ot,ne.w,f.lN,l.UX,l.u5,Z.TU,v.c,h.AV]]}),o}()}}]);
//# sourceMappingURL=328.b555b6debe46b9ca.js.map