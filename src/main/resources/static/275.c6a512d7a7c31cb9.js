"use strict";(self.webpackChunkgsrs_client=self.webpackChunkgsrs_client||[]).push([[275],{60275:function(qe,x,a){a.r(x),a.d(x,{SubstanceCodesModule:function(){return Ue}});var S=a(48047),b=a(78069),C=a(36362),v=a(95106),U=a(24582),N=a(7318),q=a(54025),Q=a(24874),Y=a(50253),J=a(63169),p=a(90587),e=a(76442),h=a(95758),M=a(66088),Z=a(44770),F=a(43365),m=a(97217),y=a(64316),A=a(65590),w=a(98002),T=a(91434),D=a(1130),I=a(73430),O=a(26439),P=a(89633);function H(t,o){1&t&&(e.TgZ(0,"th",26),e._uU(1," Classification Tree "),e.qZA())}function $(t,o){1&t&&e._UZ(0,"mat-icon",32)}var L=function(o){return{"padding-left.px":o}},V=function(o){return{search:o}};function k(t,o){if(1&t&&(e.TgZ(0,"div",29),e.YNc(1,$,1,0,"mat-icon",30),e.TgZ(2,"a",31),e._uU(3),e.qZA(),e.qZA()),2&t){var n=o.$implicit,l=o.index;e.Q6J("ngStyle",e.VKq(4,L,10*l)),e.xp6(1),e.Q6J("ngIf",l>0),e.xp6(1),e.Q6J("queryParams",e.VKq(6,V,'root_codes_comments:"'+n+'"')),e.xp6(1),e.hij(" ",n," ")}}function B(t,o){if(1&t&&(e.TgZ(0,"td",27),e.YNc(1,k,4,8,"div",28),e.qZA()),2&t){var n=o.$implicit,l=e.oxw();e.xp6(1),e.Q6J("ngForOf",l.getClassificationTree(n.comments))}}function j(t,o){1&t&&(e.TgZ(0,"th",33),e._uU(1," Code System "),e.qZA())}function E(t,o){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"async"),e.ALo(3,"codeSystemDisplay"),e.qZA()),2&t){var n=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,n.codeSystem))," ")}}function R(t,o){1&t&&(e.TgZ(0,"th",33),e._uU(1," Code "),e.qZA())}function z(t,o){if(1&t&&(e.TgZ(0,"a",36),e._uU(1),e.qZA()),2&t){var n=e.oxw().$implicit;e.Q6J("href",n.url,e.LSH),e.xp6(1),e.Oqu(n.code)}}function W(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){var n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.code,"")}}function X(t,o){if(1&t&&(e.TgZ(0,"td",27),e.YNc(1,z,2,2,"a",34),e.YNc(2,W,2,1,"span",35),e.qZA()),2&t){var n=o.$implicit;e.xp6(1),e.Q6J("ngIf",n.url),e.xp6(1),e.Q6J("ngIf",!n.url)}}function K(t,o){1&t&&(e.TgZ(0,"th",33),e._uU(1," Type "),e.qZA())}function G(t,o){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&t){var n=o.$implicit;e.xp6(1),e.hij(" ",n.type," ")}}function ee(t,o){if(1&t&&(e.TgZ(0,"th",26),e.TgZ(1,"div",37),e.TgZ(2,"mat-form-field"),e._UZ(3,"input",38),e.qZA(),e.qZA(),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("formControl",n.codeSystemFilter)}}function te(t,o){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"async"),e.ALo(3,"codeSystemDisplay"),e.qZA()),2&t){var n=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,n.codeSystem))," ")}}function ne(t,o){if(1&t&&(e.TgZ(0,"th",26),e.TgZ(1,"div",37),e.TgZ(2,"mat-form-field"),e._UZ(3,"input",39),e.qZA(),e.qZA(),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("formControl",n.codeFilter)}}function oe(t,o){if(1&t&&(e.TgZ(0,"a",36),e._uU(1),e.qZA()),2&t){var n=e.oxw().$implicit;e.Q6J("href",n.url,e.LSH),e.xp6(1),e.Oqu(n.code)}}function ie(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){var n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.code,"")}}function ae(t,o){if(1&t&&(e.TgZ(0,"td",27),e.YNc(1,oe,2,2,"a",34),e.YNc(2,ie,2,1,"span",35),e.qZA()),2&t){var n=o.$implicit;e.xp6(1),e.Q6J("ngIf",n.url),e.xp6(1),e.Q6J("ngIf",!n.url)}}function le(t,o){if(1&t&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&t){var n=o.$implicit;e.Q6J("value",n.display),e.xp6(1),e.Oqu(n.display)}}function se(t,o){if(1&t&&(e.TgZ(0,"th",26),e.TgZ(1,"div",37),e.TgZ(2,"mat-form-field",40),e.TgZ(3,"mat-select",41),e.TgZ(4,"mat-select-trigger"),e._uU(5),e.qZA(),e.TgZ(6,"mat-option",42),e._uU(7,"Select Type Filter"),e.qZA(),e.YNc(8,le,2,2,"mat-option",43),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){var n=e.oxw();e.xp6(3),e.Q6J("formControl",n.typeFilter),e.xp6(2),e.hij(" ",n.typeFilter.value?n.typeFilter.value:""," "),e.xp6(3),e.Q6J("ngForOf",n.typeFilterOptions)}}function ce(t,o){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&t){var n=o.$implicit;e.xp6(1),e.hij(" ",n.type," ")}}function re(t,o){1&t&&(e.TgZ(0,"th",33),e._uU(1," Comments "),e.qZA())}function de(t,o){if(1&t&&(e.TgZ(0,"div",52),e.TgZ(1,"div",53),e._uU(2,"Comments:"),e.qZA(),e.TgZ(3,"div",54),e._uU(4),e.qZA(),e.qZA()),2&t){var n=e.oxw(2).$implicit;e.xp6(4),e.Oqu(n.codeText)}}function ue(t,o){if(1&t&&(e.TgZ(0,"div",52),e.TgZ(1,"div",53),e._uU(2,"Code Text:"),e.qZA(),e.TgZ(3,"div",54),e._uU(4),e.qZA(),e.qZA()),2&t){var n=e.oxw(2).$implicit;e.xp6(4),e.Oqu(n.comments)}}function me(t,o){if(1&t&&(e.TgZ(0,"h2",47),e._uU(1,"Code Comments"),e.qZA(),e.TgZ(2,"div",48),e.YNc(3,de,5,1,"div",49),e.YNc(4,ue,5,1,"div",49),e.qZA(),e.TgZ(5,"div",50),e._UZ(6,"span",1),e.TgZ(7,"button",51),e._uU(8,"Close"),e.qZA(),e.qZA()),2&t){var n=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",n.codeText),e.xp6(1),e.Q6J("ngIf",n.comments)}}function pe(t,o){if(1&t){var n=e.EpF();e.TgZ(0,"td",27),e.TgZ(1,"button",45),e.NdJ("click",function(){e.CHM(n);var i=e.MAs(4);return e.oxw().openModal(i)}),e._uU(2,"View"),e.qZA(),e.YNc(3,me,9,2,"ng-template",null,46,e.W1O),e.qZA()}if(2&t){var l=o.$implicit;e.xp6(1),e.Q6J("disabled",!l.comments&&!l.codeText)}}function fe(t,o){1&t&&(e.TgZ(0,"th",26),e._uU(1," References "),e.qZA())}function Ce(t,o){if(1&t&&(e.TgZ(0,"h2",47),e._uU(1,"References"),e.qZA(),e.TgZ(2,"div",48),e._UZ(3,"app-references-manager",56),e.qZA(),e.TgZ(4,"div",50),e._UZ(5,"span",1),e.TgZ(6,"button",51),e._uU(7,"Close"),e.qZA(),e.qZA()),2&t){var n=e.oxw().$implicit,l=e.oxw();e.xp6(3),e.Q6J("substance",l.substance)("references",n.references)}}function he(t,o){if(1&t){var n=e.EpF();e.TgZ(0,"td",27),e.TgZ(1,"button",45),e.NdJ("click",function(){e.CHM(n);var i=e.MAs(4);return e.oxw().openModal(i)}),e._uU(2,"View"),e.qZA(),e.YNc(3,Ce,8,2,"ng-template",null,55,e.W1O),e.qZA()}if(2&t){var l=o.$implicit;e.xp6(1),e.Q6J("disabled",l.references.length<=0)}}function ge(t,o){1&t&&e._UZ(0,"th",26)}function ve(t,o){if(1&t){var n=e.EpF();e.TgZ(0,"th",26),e.TgZ(1,"div",37),e.TgZ(2,"button",6),e.NdJ("click",function(){return e.CHM(n),e.oxw().resetFilters()}),e._uU(3,"Reset"),e.qZA(),e.qZA(),e.qZA()}}function Ze(t,o){1&t&&e._UZ(0,"tr",57)}function ye(t,o){if(1&t&&e._UZ(0,"tr",58),2&t){var n=e.oxw();e.Q6J("hidden",n.hideFilters)}}function Te(t,o){1&t&&e._UZ(0,"tr",59)}var _e=function(o){return{classification:o}},xe=function(){return[5,10,25,100]},Se=function(){var t=function(o){(0,U.Z)(l,o);var n=(0,N.Z)(l);function l(d,i,s,r){var c;return(0,b.Z)(this,l),(c=n.call(this,i)).dialog=d,c.gaService=i,c.overlayContainerService=s,c.utilsService=r,c.codes=[],c.substanceUpdated=new Y.x,c.hideFilters=!0,c.showHideFilterText="Show Filter",c.codeSystemFilter=new p.NI,c.typeFilter=new p.NI,c.codeFilter=new p.NI,c.typeFilterOptions=[],c}return(0,S.Z)(l,[{key:"ngOnInit",value:function(){var i=this;this.substanceUpdated.subscribe(function(s){i.substance=s,i.codes=[],null!=i.substance&&null!=i.type&&("Codes - Classifications"===i.type?i.displayedColumns=["classificationTree","codeSystem","code","references"]:(i.displayedColumns=["codeSystem","code","type","comments","references"],i.displayedFilterColumns=["codeSystemFilter","codeFilter","typeFilter","emptyFilter","resetFilter"]),i.filterSubstanceCodes(),null!=i.codes&&i.codes.length?(i.codes.forEach(function(r){r.url&&(r.url=r.url.trim())}),i.filtered=i.codes,i.pageChange(),i.searchControl.valueChanges.subscribe(function(r){i.filterList(r,i.codes)},function(r){}),i.getTypeFilterOptions()):i.filtered=[])}),this.pageSize=10,this.overlayContainer=this.overlayContainerService.getContainerElement(),this.codeSystemFilter.valueChanges.subscribe(function(s){i.filterTable()}),this.codeFilter.valueChanges.subscribe(function(s){i.filterTable()}),this.typeFilter.valueChanges.subscribe(function(s){i.filterTable()})}},{key:"filterTable",value:function(i){var s=null===this.codeSystemFilter.value?"":this.codeSystemFilter.value,r=null===this.codeFilter.value?"":this.codeFilter.value,c=null===this.typeFilter.value?"":this.typeFilter.value;this.filtered=[];var g,u=(0,v.Z)(this.codes);try{for(u.s();!(g=u.n()).done;){var f=g.value;f.codeSystem.toLowerCase().includes(s.toLowerCase())&&f.code.toLowerCase().includes(r.toLowerCase())&&f.type.toLowerCase().includes(c.toLowerCase())&&this.filtered.push(f)}}catch(_){u.e(_)}finally{u.f()}this.pageChange()}},{key:"toggleFilter",value:function(){this.hideFilters=!this.hideFilters,this.showHideFilterText=this.hideFilters?"Show Filter":"Hide Filter"}},{key:"getTypeFilterValue",value:function(i){var r,s=(0,v.Z)(this.typeFilterOptions);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(c.display===i)return c}}catch(u){s.e(u)}finally{s.f()}}},{key:"getTypeFilterOptions",value:function(){var r,i=this,s=(0,v.Z)(this.codes);try{var c=function(){var f=r.value.type,_={value:f,display:f};i.typeFilterOptions.filter(function(Ne){return Ne.value===f}).length>0||i.typeFilterOptions.push(_)};for(s.s();!(r=s.n()).done;)c()}catch(u){s.e(u)}finally{s.f()}}},{key:"sortData",value:function(i){var s=this,r=this.codes.slice();if(!i.active||""===i.direction)return this.filtered=r,void this.pageChange();this.filtered=r.sort(function(c,u){return s.utilsService.compare(c[i.active]?c[i.active]:null,u[i.active]?u[i.active]:null,"asc"===i.direction)}),this.pageChange()}},{key:"ngAfterViewInit",value:function(){}},{key:"filterSubstanceCodes",value:function(){var i=this;this.substance.codes&&this.substance.codes.length>0&&(this.substance.codes.forEach(function(s){(s._isClassification&&"Codes - Classifications"===i.type||!s._isClassification&&"Codes - Identifiers"===i.type)&&i.codes.push(s)}),this.countUpdate.emit(this.codes.length))}},{key:"getClassificationTree",value:function(i){return i.split("|")}},{key:"resetFilters",value:function(){this.pageChange(),this.searchControl.setValue(""),this.codeFilter.setValue(""),this.codeSystemFilter.setValue(""),this.typeFilter.setValue("")}},{key:"openModal",value:function(i){var s=this;this.gaService.sendEvent(this.analyticsEventCategory,"button","references view");var r=this.dialog.open(i,{minWidth:"40%",maxWidth:"90%"});this.overlayContainer.style.zIndex="1002",r.afterClosed().subscribe(function(c){s.overlayContainer.style.zIndex=null})}}]),l}(q.u);return t.\u0275fac=function(n){return new(n||t)(e.Y36(h.uw),e.Y36(Q.$),e.Y36(M.Xj),e.Y36(J.FW))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-substance-codes"]],features:[e.qOj],decls:44,vars:14,consts:[[1,"flex-row"],[1,"middle-fill"],[1,"search",3,"floatLabel"],["matInput","","placeholder","Search",3,"formControl"],[1,"responsive"],[1,"show-filter-span"],["mat-flat-button","","color","warn",1,"mat-button","mat-button-primary",3,"click"],["mat-table","","matSort","",3,"ngClass","dataSource","matSortChange"],["matColumnDef","classificationTree"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","codeSystem"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","code"],["matColumnDef","type"],["matColumnDef","codeSystemFilter"],["matColumnDef","codeFilter"],["matColumnDef","typeFilter"],["matColumnDef","comments"],["matColumnDef","references"],["matColumnDef","emptyFilter"],["matColumnDef","resetFilter"],["mat-header-row","",4,"matHeaderRowDef"],["mat-header-row","",3,"hidden",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","true",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],["svgIcon","subdirectory_arrow_right",4,"ngIf"],["routerLink","/browse-substance",3,"queryParams"],["svgIcon","subdirectory_arrow_right"],["mat-header-cell","","mat-sort-header",""],["class","a-link","target","_blank",3,"href",4,"ngIf"],[4,"ngIf"],["target","_blank",1,"a-link",3,"href"],[1,"tableFilter"],["matInput","","placeholder","Code System Filter",1,"form-field",3,"formControl"],["matInput","","placeholder","Code Filter",1,"form-field",3,"formControl"],["appearance","fill"],[3,"formControl"],["selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-raised-button","mat-primary",3,"disabled","click"],["commentTemplate",""],["mat-dialog-title",""],["mat-dialog-content",""],["class","form-row",4,"ngIf"],["mat-dialog-actions",""],["mat-dialog-close","",1,"mat-raised-button","mat-primary"],[1,"form-row"],[1,"label"],[1,"content"],["refTemplate",""],[3,"substance","references"],["mat-header-row",""],["mat-header-row","",3,"hidden"],["mat-row",""]],template:function(n,l){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"span",1),e.TgZ(2,"mat-form-field",2),e._UZ(3,"input",3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"span",5),e.TgZ(6,"mat-label",6),e.NdJ("click",function(){return l.toggleFilter()}),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"table",7),e.NdJ("matSortChange",function(i){return l.sortData(i)}),e.ynx(9,8),e.YNc(10,H,2,0,"th",9),e.YNc(11,B,2,1,"td",10),e.BQk(),e.ynx(12,11),e.YNc(13,j,2,0,"th",12),e.YNc(14,E,4,5,"td",10),e.BQk(),e.ynx(15,13),e.YNc(16,R,2,0,"th",12),e.YNc(17,X,3,2,"td",10),e.BQk(),e.ynx(18,14),e.YNc(19,K,2,0,"th",12),e.YNc(20,G,2,1,"td",10),e.BQk(),e.ynx(21,15),e.YNc(22,ee,4,1,"th",9),e.YNc(23,te,4,5,"td",10),e.BQk(),e.ynx(24,16),e.YNc(25,ne,4,1,"th",9),e.YNc(26,ae,3,2,"td",10),e.BQk(),e.ynx(27,17),e.YNc(28,se,9,3,"th",9),e.YNc(29,ce,2,1,"td",10),e.BQk(),e.ynx(30,18),e.YNc(31,re,2,0,"th",12),e.YNc(32,pe,5,1,"td",10),e.BQk(),e.ynx(33,19),e.YNc(34,fe,2,0,"th",9),e.YNc(35,he,5,1,"td",10),e.BQk(),e.ynx(36,20),e.YNc(37,ge,1,0,"th",9),e.BQk(),e.ynx(38,21),e.YNc(39,ve,4,0,"th",9),e.BQk(),e.YNc(40,Ze,1,0,"tr",22),e.YNc(41,ye,1,1,"tr",23),e.YNc(42,Te,1,0,"tr",24),e.qZA(),e.qZA(),e.TgZ(43,"mat-paginator",25),e.NdJ("page",function(i){return l.pageChange(i,l.analyticsEventCategory)}),e.qZA()),2&n&&(e.xp6(2),e.Q6J("floatLabel","never"),e.xp6(1),e.Q6J("formControl",l.searchControl),e.xp6(4),e.Oqu(l.showHideFilterText),e.xp6(1),e.Q6J("ngClass",e.VKq(11,_e,"Codes - Classifications"==l.type))("dataSource",l.paged),e.xp6(32),e.Q6J("matHeaderRowDef",l.displayedColumns),e.xp6(1),e.Q6J("matHeaderRowDef",l.displayedFilterColumns),e.xp6(1),e.Q6J("matRowDefColumns",l.displayedColumns),e.xp6(1),e.Q6J("length",l.filtered&&l.filtered.length||0)("pageSize",10)("pageSizeOptions",e.DdM(13,xe)))},directives:[Z.KE,F.Nt,p.Fj,p.JJ,p.oH,Z.hX,m.BZ,y.YE,C.mk,m.w1,m.fO,m.ge,m.Dz,m.ev,C.sg,C.PC,C.O5,A.Hw,w.yS,y.nU,T.gD,T.$L,D.ey,h.uh,h.xY,h.H8,h.ZT,I.C,m.as,m.XQ,m.nj,m.Gk,O.NW],pipes:[C.Ov,P.q],styles:["table.mat-table[_ngcontent-%COMP%]{width:100%}td.mat-cell[_ngcontent-%COMP%]:not(:last-child), td.mat-footer-cell[_ngcontent-%COMP%]:not(:last-child), th.mat-header-cell[_ngcontent-%COMP%]:not(:last-child){padding-right:10px}td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}.no-bottom-border[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td.mat-cell[_ngcontent-%COMP%]{border-bottom:none}.mat-sort-header-content[_ngcontent-%COMP%]{display:block!important}.search[_ngcontent-%COMP%]{width:400px;max-width:100%}.a-link[_ngcontent-%COMP%]{text-decoration:none;color:#1565c0}.form-row[_ngcontent-%COMP%]{width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;padding-bottom:25px}.form-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:10%;font-weight:600;min-width:100px}.form-row[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:90%}.show-filter-span[_ngcontent-%COMP%]{display:block;float:right}"]}),t}(),be=a(64061),Fe=a(33865),Ae=a(34972),we=a(38277),Oe=a(2711),Ue=function(){var t=(0,S.Z)(function o(){(0,b.Z)(this,o)});return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[C.ez,be.o.forChild(Se),m.p0,Fe.HT,O.TU,F.c,Z.lN,T.LD,p.UX,p.u5,Ae.dp,w.Bz,A.Ps,we.V,h.Is,y.JX,Oe.v]]}),t}()}}]);
//# sourceMappingURL=275.c6a512d7a7c31cb9.js.map